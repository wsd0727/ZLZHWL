"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginElement = void 0;

var _vue = require("vue");

var _xeUtils = _interopRequireDefault(require("xe-utils"));

var _dayjs = _interopRequireDefault(require("dayjs"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var vxetable;

function isEmptyValue(cellValue) {
  return cellValue === null || cellValue === undefined || cellValue === '';
}

function getOnName(type) {
  return 'on' + type.substring(0, 1).toLocaleUpperCase() + type.substring(1);
}

function getModelProp(renderOpts) {
  return 'modelValue';
}

function getModelEvent(renderOpts) {
  return 'update:modelValue';
}

function getChangeEvent(renderOpts) {
  var type = 'change';

  switch (renderOpts.name) {
    case 'ElAutocomplete':
      type = 'select';
      break;

    case 'ElInput':
    case 'ElInputNumber':
      type = 'input';
      break;
  }

  return type;
}

function toDayStringDate(value, format) {
  return (0, _dayjs["default"])(value, format).date;
}

function toDayDateString(date, format) {
  return (0, _dayjs["default"])(date).format(format);
}

function parseDate(value, props) {
  return value && props.valueFormat ? toDayStringDate(value, props.valueFormat) : value;
}

function getFormatDate(value, props, defaultFormat) {
  return value ? toDayDateString(parseDate(value, props), props.format || defaultFormat) : value;
}

function getFormatDates(values, props, separator, defaultFormat) {
  return _xeUtils["default"].map(values, function (date) {
    return getFormatDate(date, props, defaultFormat);
  }).join(separator);
}

function equalDaterange(cellValue, data, props, defaultFormat) {
  cellValue = getFormatDate(cellValue, props, defaultFormat);
  return cellValue >= getFormatDate(data[0], props, defaultFormat) && cellValue <= getFormatDate(data[1], props, defaultFormat);
}

function getCellEditFilterProps(renderOpts, params, value, defaultProps) {
  return _xeUtils["default"].assign({}, defaultProps, renderOpts.props, _defineProperty({}, getModelProp(renderOpts), value));
}

function getItemProps(renderOpts, params, value, defaultProps) {
  return _xeUtils["default"].assign({}, defaultProps, renderOpts.props, _defineProperty({}, getModelProp(renderOpts), value));
}

function formatText(cellValue) {
  return '' + (isEmptyValue(cellValue) ? '' : cellValue);
}

function getCellLabelVNs(renderOpts, params, cellLabel) {
  var placeholder = renderOpts.placeholder;
  return [(0, _vue.h)('span', {
    "class": 'vxe-cell--label'
  }, placeholder && isEmptyValue(cellLabel) ? [(0, _vue.h)('span', {
    "class": 'vxe-cell--placeholder'
  }, formatText(vxetable._t(placeholder)))] : formatText(cellLabel))];
}

function getOns(renderOpts, params, inputFunc, changeFunc) {
  var events = renderOpts.events;
  var modelEvent = getModelEvent(renderOpts);
  var changeEvent = getChangeEvent(renderOpts);
  var isSameEvent = changeEvent === modelEvent;
  var ons = {};

  _xeUtils["default"].objectEach(events, function (func, key) {
    ons[getOnName(key)] = function () {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      func.apply(void 0, [params].concat(args));
    };
  });

  if (inputFunc) {
    ons[getOnName(modelEvent)] = function (targetEvnt) {
      inputFunc(targetEvnt);

      if (events && events[modelEvent]) {
        events[modelEvent](params, targetEvnt);
      }

      if (isSameEvent && changeFunc) {
        changeFunc(targetEvnt);
      }
    };
  }

  if (!isSameEvent && changeFunc) {
    ons[getOnName(changeEvent)] = function () {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      changeFunc.apply(void 0, args);

      if (events && events[changeEvent]) {
        events[changeEvent].apply(events, [params].concat(args));
      }
    };
  }

  return ons;
}

function getEditOns(renderOpts, params) {
  var $table = params.$table,
      row = params.row,
      column = params.column;
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    _xeUtils["default"].set(row, column.field, value);
  }, function () {
    // 处理 change 事件相关逻辑
    $table.updateStatus(params);
  });
}

function getFilterOns(renderOpts, params, option, changeFunc) {
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    option.data = value;
  }, changeFunc);
}

function getItemOns(renderOpts, params) {
  var $form = params.$form,
      data = params.data,
      field = params.field;
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    _xeUtils["default"].set(data, field, value);
  }, function () {
    // 处理 change 事件相关逻辑
    $form.updateStatus(params);
  });
}

function matchCascaderData(index, list, values, labels) {
  var val = values[index];

  if (list && values.length > index) {
    _xeUtils["default"].each(list, function (item) {
      if (item.value === val) {
        labels.push(item.label);
        matchCascaderData(++index, item.children, values, labels);
      }
    });
  }
}

function getSelectCellValue(renderOpts, params) {
  var _renderOpts$options = renderOpts.options,
      options = _renderOpts$options === void 0 ? [] : _renderOpts$options,
      optionGroups = renderOpts.optionGroups,
      _renderOpts$props = renderOpts.props,
      props = _renderOpts$props === void 0 ? {} : _renderOpts$props,
      _renderOpts$optionPro = renderOpts.optionProps,
      optionProps = _renderOpts$optionPro === void 0 ? {} : _renderOpts$optionPro,
      _renderOpts$optionGro = renderOpts.optionGroupProps,
      optionGroupProps = _renderOpts$optionGro === void 0 ? {} : _renderOpts$optionGro;
  var $table = params.$table,
      rowid = params.rowid,
      row = params.row,
      column = params.column;
  var filterable = props.filterable,
      multiple = props.multiple;
  var labelProp = optionProps.label || 'label';
  var valueProp = optionProps.value || 'value';
  var groupOptions = optionGroupProps.options || 'options';

  var cellValue = _xeUtils["default"].get(row, column.field);

  var colid = column.id;
  var cellData;

  if (filterable) {
    var internalData = $table.internalData;
    var fullAllDataRowIdData = internalData.fullAllDataRowIdData;
    var rest = fullAllDataRowIdData[rowid];

    if (rest) {
      cellData = rest.cellData;

      if (!cellData) {
        cellData = rest.cellData = {};
      }
    }

    if (rest && cellData[colid] && cellData[colid].value === cellValue) {
      return cellData[colid].label;
    }
  }

  if (!isEmptyValue(cellValue)) {
    var selectlabel = _xeUtils["default"].map(multiple ? cellValue : [cellValue], optionGroups ? function (value) {
      var selectItem;

      for (var index = 0; index < optionGroups.length; index++) {
        selectItem = _xeUtils["default"].find(optionGroups[index][groupOptions], function (item) {
          return item[valueProp] === value;
        });

        if (selectItem) {
          break;
        }
      }

      return selectItem ? selectItem[labelProp] : value;
    } : function (value) {
      var selectItem = _xeUtils["default"].find(options, function (item) {
        return item[valueProp] === value;
      });

      return selectItem ? selectItem[labelProp] : value;
    }).join(', ');

    if (cellData && options && options.length) {
      cellData[colid] = {
        value: cellValue,
        label: selectlabel
      };
    }

    return selectlabel;
  }

  return '';
}

function getCascaderCellValue(renderOpts, params) {
  var _renderOpts$props2 = renderOpts.props,
      props = _renderOpts$props2 === void 0 ? {} : _renderOpts$props2;
  var row = params.row,
      column = params.column;

  var cellValue = _xeUtils["default"].get(row, column.field);

  var values = cellValue || [];
  var labels = [];
  matchCascaderData(0, props.options, values, labels);
  return (props.showAllLevels === false ? labels.slice(labels.length - 1, labels.length) : labels).join(" ".concat(props.separator || '/', " "));
}

function getDatePickerCellValue(renderOpts, params) {
  var _renderOpts$props3 = renderOpts.props,
      props = _renderOpts$props3 === void 0 ? {} : _renderOpts$props3;
  var row = params.row,
      column = params.column;
  var _props$rangeSeparator = props.rangeSeparator,
      rangeSeparator = _props$rangeSeparator === void 0 ? '-' : _props$rangeSeparator;

  var cellValue = _xeUtils["default"].get(row, column.field);

  switch (props.type) {
    case 'week':
      cellValue = getFormatDate(cellValue, props, 'YYYYwWW');
      break;

    case 'month':
      cellValue = getFormatDate(cellValue, props, 'YYYY-MM');
      break;

    case 'year':
      cellValue = getFormatDate(cellValue, props, 'YYYY');
      break;

    case 'dates':
      cellValue = getFormatDates(cellValue, props, ', ', 'YYYY-MM-DD');
      break;

    case 'daterange':
      cellValue = getFormatDates(cellValue, props, " ".concat(rangeSeparator, " "), 'YYYY-MM-DD');
      break;

    case 'datetimerange':
      cellValue = getFormatDates(cellValue, props, " ".concat(rangeSeparator, " "), 'YYYY-MM-DD HH:ss:mm');
      break;

    case 'monthrange':
      cellValue = getFormatDates(cellValue, props, " ".concat(rangeSeparator, " "), 'YYYY-MM');
      break;

    default:
      cellValue = getFormatDate(cellValue, props, 'YYYY-MM-DD');
  }

  return cellValue;
}

function getTimePickerCellValue(renderOpts, params) {
  var _renderOpts$props4 = renderOpts.props,
      props = _renderOpts$props4 === void 0 ? {} : _renderOpts$props4;
  var row = params.row,
      column = params.column;
  var isRange = props.isRange,
      _props$format = props.format,
      format = _props$format === void 0 ? 'hh:mm:ss' : _props$format,
      _props$rangeSeparator2 = props.rangeSeparator,
      rangeSeparator = _props$rangeSeparator2 === void 0 ? '-' : _props$rangeSeparator2;

  var cellValue = _xeUtils["default"].get(row, column.field);

  if (cellValue && isRange) {
    cellValue = _xeUtils["default"].map(cellValue, function (date) {
      return toDayDateString(parseDate(date, props), format);
    }).join(" ".concat(rangeSeparator, " "));
  }

  return toDayDateString(parseDate(cellValue, props), format);
}

function createEditRender(defaultProps) {
  return function (renderOpts, params) {
    var row = params.row,
        column = params.column;
    var name = renderOpts.name,
        attrs = renderOpts.attrs;

    var cellValue = _xeUtils["default"].get(row, column.field);

    return [(0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({}, attrs), getCellEditFilterProps(renderOpts, params, cellValue, defaultProps)), getEditOns(renderOpts, params)))];
  };
}

function defaultButtonEditRender(renderOpts, params) {
  var attrs = renderOpts.attrs;
  return [(0, _vue.h)((0, _vue.resolveComponent)('el-button'), _objectSpread(_objectSpread(_objectSpread({}, attrs), getCellEditFilterProps(renderOpts, params, null)), getOns(renderOpts, params)), cellText(renderOpts.content))];
}

function defaultButtonsEditRender(renderOpts, params) {
  var children = renderOpts.children;

  if (children) {
    return children.map(function (childRenderOpts) {
      return defaultButtonEditRender(childRenderOpts, params)[0];
    });
  }

  return [];
}

function createFilterRender(defaultProps) {
  return function (renderOpts, params) {
    var column = params.column;
    var name = renderOpts.name,
        attrs = renderOpts.attrs;
    return [(0, _vue.h)('div', {
      "class": 'vxe-table--filter-element-wrapper'
    }, column.filters.map(function (option, oIndex) {
      var optionValue = option.data;
      return (0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({
        key: oIndex
      }, attrs), getCellEditFilterProps(renderOpts, params, optionValue, defaultProps)), getFilterOns(renderOpts, params, option, function () {
        // 处理 change 事件相关逻辑
        handleConfirmFilter(params, !!option.data, option);
      })));
    }))];
  };
}

function handleConfirmFilter(params, checked, option) {
  var $panel = params.$panel;
  $panel.changeOption(null, checked, option);
}
/**
 * 模糊匹配
 * @param params
 */


function defaultFuzzyFilterMethod(params) {
  var option = params.option,
      row = params.row,
      column = params.column;
  var data = option.data;

  var cellValue = _xeUtils["default"].get(row, column.field);

  return _xeUtils["default"].toValueString(cellValue).indexOf(data) > -1;
}
/**
 * 精确匹配
 * @param params
 */


function defaultExactFilterMethod(params) {
  var option = params.option,
      row = params.row,
      column = params.column;
  var data = option.data;

  var cellValue = _xeUtils["default"].get(row, column.field);
  /* eslint-disable eqeqeq */


  return cellValue === data;
}

function renderOptions(options, optionProps) {
  var labelProp = optionProps.label || 'label';
  var valueProp = optionProps.value || 'value';
  return _xeUtils["default"].map(options, function (item, oIndex) {
    return (0, _vue.h)((0, _vue.resolveComponent)('el-option'), {
      key: oIndex,
      value: item[valueProp],
      label: item[labelProp],
      disabled: item.disabled
    });
  });
}

function cellText(cellValue) {
  return [formatText(cellValue)];
}

function createFormItemRender(defaultProps) {
  return function (renderOpts, params) {
    var data = params.data,
        field = params.field;
    var name = renderOpts.name;
    var attrs = renderOpts.attrs;

    var itemValue = _xeUtils["default"].get(data, field);

    return [(0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({}, attrs), getItemProps(renderOpts, params, itemValue, defaultProps)), getItemOns(renderOpts, params)))];
  };
}

function defaultButtonItemRender(renderOpts, params) {
  var attrs = renderOpts.attrs;
  var props = getItemProps(renderOpts, params, null);
  return [(0, _vue.h)((0, _vue.resolveComponent)('el-button'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), getOns(renderOpts, params)), {
    "default": function _default() {
      return cellText(renderOpts.content || props.content);
    }
  })];
}

function defaultButtonsItemRender(renderOpts, params) {
  var children = renderOpts.children;

  if (children) {
    return children.map(function (childRenderOpts) {
      return defaultButtonItemRender(childRenderOpts, params)[0];
    });
  }

  return [];
}

function createExportMethod(getExportCellValue) {
  return function (params) {
    var row = params.row,
        column = params.column,
        options = params.options;
    return options && options.original ? _xeUtils["default"].get(row, column.field) : getExportCellValue(column.editRender || column.cellRender, params);
  };
}

function createFormItemRadioAndCheckboxRender() {
  return function (renderOpts, params) {
    var name = renderOpts.name,
        _renderOpts$options2 = renderOpts.options,
        options = _renderOpts$options2 === void 0 ? [] : _renderOpts$options2,
        _renderOpts$optionPro2 = renderOpts.optionProps,
        optionProps = _renderOpts$optionPro2 === void 0 ? {} : _renderOpts$optionPro2,
        attrs = renderOpts.attrs;
    var data = params.data,
        field = params.field;
    var labelProp = optionProps.label || 'label';
    var valueProp = optionProps.value || 'value';

    var itemValue = _xeUtils["default"].get(data, field);

    return [(0, _vue.h)((0, _vue.resolveComponent)("".concat(name, "Group")), _objectSpread(_objectSpread(_objectSpread({}, attrs), getItemProps(renderOpts, params, itemValue)), getItemOns(renderOpts, params)), {
      "default": function _default() {
        return options.map(function (option, oIndex) {
          return (0, _vue.h)((0, _vue.resolveComponent)(name), {
            key: oIndex,
            label: option[valueProp],
            disabled: option.disabled
          }, {
            "default": function _default() {
              return cellText(option[labelProp]);
            }
          });
        });
      }
    })];
  };
}
/**
 * 检查触发源是否属于目标节点
 */


function getEventTargetNode(evnt, container, className) {
  var targetElem;
  var target = evnt.target;

  while (target && target.nodeType && target !== document) {
    if (className && target.className && target.className.split && target.className.split(' ').indexOf(className) > -1) {
      targetElem = target;
    } else if (target === container) {
      return {
        flag: className ? !!targetElem : true,
        container: container,
        targetElem: targetElem
      };
    }

    target = target.parentNode;
  }

  return {
    flag: false
  };
}
/**
 * 事件兼容性处理
 */


function handleClearEvent(params) {
  var $event = params.$event;
  var bodyElem = document.body;

  if ( // 远程搜索
  getEventTargetNode($event, bodyElem, 'el-autocomplete-suggestion').flag || // 下拉框
  getEventTargetNode($event, bodyElem, 'el-select-dropdown').flag || // 级联
  getEventTargetNode($event, bodyElem, 'el-cascader__dropdown').flag || getEventTargetNode($event, bodyElem, 'el-cascader-menus').flag || // 日期
  getEventTargetNode($event, bodyElem, 'el-time-panel').flag || getEventTargetNode($event, bodyElem, 'el-picker-panel').flag || // 颜色
  getEventTargetNode($event, bodyElem, 'el-color-dropdown').flag) {
    return false;
  }
}
/**
 * 基于 vxe-table 表格的适配插件，用于兼容 element-ui 组件库
 */


var VXETablePluginElement = {
  install: function install(vxetablecore) {
    var interceptor = vxetablecore.interceptor,
        renderer = vxetablecore.renderer;
    vxetable = vxetablecore;
    renderer.mixin({
      ElAutocomplete: {
        autofocus: 'input.el-input__inner',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElInput: {
        autofocus: 'input.el-input__inner',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultFuzzyFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElInputNumber: {
        autofocus: 'input.el-input__inner',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultFuzzyFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElSelect: {
        renderEdit: function renderEdit(renderOpts, params) {
          var _renderOpts$options3 = renderOpts.options,
              options = _renderOpts$options3 === void 0 ? [] : _renderOpts$options3,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro3 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro3 === void 0 ? {} : _renderOpts$optionPro3,
              _renderOpts$optionGro2 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro2 === void 0 ? {} : _renderOpts$optionGro2;
          var row = params.row,
              column = params.column;
          var attrs = renderOpts.attrs;

          var cellValue = _xeUtils["default"].get(row, column.field);

          var props = getCellEditFilterProps(renderOpts, params, cellValue);
          var ons = getEditOns(renderOpts, params);

          if (optionGroups) {
            var groupOptions = optionGroupProps.options || 'options';
            var groupLabel = optionGroupProps.label || 'label';
            return [(0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), ons), {
              "default": function _default() {
                return _xeUtils["default"].map(optionGroups, function (group, gIndex) {
                  return (0, _vue.h)((0, _vue.resolveComponent)('el-option-group'), {
                    key: gIndex,
                    label: group[groupLabel]
                  }, {
                    "default": function _default() {
                      return renderOptions(group[groupOptions], optionProps);
                    }
                  });
                });
              }
            })];
          }

          return [(0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({}, props), attrs), ons), {
            "default": function _default() {
              return renderOptions(options, optionProps);
            }
          })];
        },
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getSelectCellValue(renderOpts, params));
        },
        renderFilter: function renderFilter(renderOpts, params) {
          var _renderOpts$options4 = renderOpts.options,
              options = _renderOpts$options4 === void 0 ? [] : _renderOpts$options4,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro4 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro4 === void 0 ? {} : _renderOpts$optionPro4,
              _renderOpts$optionGro3 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro3 === void 0 ? {} : _renderOpts$optionGro3;
          var groupOptions = optionGroupProps.options || 'options';
          var groupLabel = optionGroupProps.label || 'label';
          var column = params.column;
          var attrs = renderOpts.attrs;
          return [(0, _vue.h)('div', {
            "class": 'vxe-table--filter-element-wrapper'
          }, optionGroups ? column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            var props = getCellEditFilterProps(renderOpts, params, optionValue);
            return (0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), props), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, props.multiple ? option.data && option.data.length > 0 : !_xeUtils["default"].eqNull(option.data), option);
            })), {
              "default": function _default() {
                return _xeUtils["default"].map(optionGroups, function (group, gIndex) {
                  return (0, _vue.h)((0, _vue.resolveComponent)('el-option-group'), {
                    key: gIndex,
                    label: group[groupLabel]
                  }, {
                    "default": function _default() {
                      return renderOptions(group[groupOptions], optionProps);
                    }
                  });
                });
              }
            });
          }) : column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            var props = getCellEditFilterProps(renderOpts, params, optionValue);
            return (0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), props), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, props.multiple ? option.data && option.data.length > 0 : !_xeUtils["default"].eqNull(option.data), option);
            })), {
              "default": function _default() {
                return renderOptions(options, optionProps);
              }
            });
          }))];
        },
        defaultFilterMethod: function defaultFilterMethod(params) {
          var option = params.option,
              row = params.row,
              column = params.column;
          var data = option.data;
          var field = column.field,
              renderOpts = column.filterRender;
          var _renderOpts$props5 = renderOpts.props,
              props = _renderOpts$props5 === void 0 ? {} : _renderOpts$props5;

          var cellValue = _xeUtils["default"].get(row, field);

          if (props.multiple) {
            if (_xeUtils["default"].isArray(cellValue)) {
              return _xeUtils["default"].includeArrays(cellValue, data);
            }

            return data.indexOf(cellValue) > -1;
          }
          /* eslint-disable eqeqeq */


          return cellValue == data;
        },
        renderItemContent: function renderItemContent(renderOpts, params) {
          var _renderOpts$options5 = renderOpts.options,
              options = _renderOpts$options5 === void 0 ? [] : _renderOpts$options5,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro5 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro5 === void 0 ? {} : _renderOpts$optionPro5,
              _renderOpts$optionGro4 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro4 === void 0 ? {} : _renderOpts$optionGro4;
          var data = params.data,
              field = params.field;
          var attrs = renderOpts.attrs;

          var itemValue = _xeUtils["default"].get(data, field);

          var props = getItemProps(renderOpts, params, itemValue);
          var ons = getItemOns(renderOpts, params);

          if (optionGroups) {
            var groupOptions = optionGroupProps.options || 'options';
            var groupLabel = optionGroupProps.label || 'label';
            return [(0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), ons), {
              "default": function _default() {
                return _xeUtils["default"].map(optionGroups, function (group, gIndex) {
                  return (0, _vue.h)((0, _vue.resolveComponent)('el-option-group'), {
                    label: group[groupLabel],
                    key: gIndex
                  }, {
                    "default": function _default() {
                      return renderOptions(group[groupOptions], optionProps);
                    }
                  });
                });
              }
            })];
          }

          return [(0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), ons), {
            "default": function _default() {
              return renderOptions(options, optionProps);
            }
          })];
        },
        exportMethod: createExportMethod(getSelectCellValue)
      },
      ElCascader: {
        renderEdit: createEditRender(),
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getCascaderCellValue(renderOpts, params));
        },
        renderItemContent: createFormItemRender(),
        exportMethod: createExportMethod(getCascaderCellValue)
      },
      ElDatePicker: {
        renderEdit: createEditRender(),
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getDatePickerCellValue(renderOpts, params));
        },
        renderFilter: function renderFilter(renderOpts, params) {
          var column = params.column;
          var name = renderOpts.name,
              attrs = renderOpts.attrs;
          return [(0, _vue.h)('div', {
            "class": 'vxe-table--filter-element-wrapper'
          }, column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            return (0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), getCellEditFilterProps(renderOpts, params, optionValue)), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, !!option.data, option);
            })));
          }))];
        },
        defaultFilterMethod: function defaultFilterMethod(params) {
          var option = params.option,
              row = params.row,
              column = params.column;
          var data = option.data;
          var renderOpts = column.filterRender;
          var _renderOpts$props6 = renderOpts.props,
              props = _renderOpts$props6 === void 0 ? {} : _renderOpts$props6;

          var cellValue = _xeUtils["default"].get(row, column.field);

          if (data) {
            switch (props.type) {
              case 'daterange':
                return equalDaterange(cellValue, data, props, 'YYYY-MM-DD');

              case 'datetimerange':
                return equalDaterange(cellValue, data, props, 'YYYY-MM-DD HH:ss:mm');

              case 'monthrange':
                return equalDaterange(cellValue, data, props, 'YYYY-MM');

              default:
                return cellValue === data;
            }
          }

          return false;
        },
        renderItemContent: createFormItemRender(),
        exportMethod: createExportMethod(getDatePickerCellValue)
      },
      ElTimePicker: {
        renderEdit: createEditRender(),
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getTimePickerCellValue(renderOpts, params));
        },
        renderItemContent: createFormItemRender(),
        exportMethod: createExportMethod(getTimePickerCellValue)
      },
      ElTimeSelect: {
        renderEdit: createEditRender(),
        renderItemContent: createFormItemRender()
      },
      ElRate: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElSwitch: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: function renderFilter(renderOpts, params) {
          var column = params.column;
          var name = renderOpts.name,
              attrs = renderOpts.attrs;
          return [(0, _vue.h)('div', {
            "class": 'vxe-table--filter-element-wrapper'
          }, column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            return (0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), getCellEditFilterProps(renderOpts, params, optionValue)), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, _xeUtils["default"].isBoolean(option.data), option);
            })));
          }))];
        },
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElSlider: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElRadio: {
        renderItemContent: createFormItemRadioAndCheckboxRender()
      },
      ElCheckbox: {
        renderItemContent: createFormItemRadioAndCheckboxRender()
      },
      ElButton: {
        renderDefault: defaultButtonEditRender,
        renderItemContent: defaultButtonItemRender
      },
      ElButtons: {
        renderDefault: defaultButtonsEditRender,
        renderItemContent: defaultButtonsItemRender
      }
    });
    interceptor.add('event.clearFilter', handleClearEvent);
    interceptor.add('event.clearActived', handleClearEvent);
    interceptor.add('event.clearAreas', handleClearEvent);
  }
};
exports.VXETablePluginElement = VXETablePluginElement;

if (typeof window !== 'undefined' && window.VXETable && window.VXETable.use) {
  window.VXETable.use(VXETablePluginElement);
}

var _default2 = VXETablePluginElement;
exports["default"] = _default2;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIiwiaW5kZXguanMiXSwibmFtZXMiOlsidnhldGFibGUiLCJpc0VtcHR5VmFsdWUiLCJjZWxsVmFsdWUiLCJ1bmRlZmluZWQiLCJnZXRPbk5hbWUiLCJ0eXBlIiwic3Vic3RyaW5nIiwidG9Mb2NhbGVVcHBlckNhc2UiLCJnZXRNb2RlbFByb3AiLCJyZW5kZXJPcHRzIiwiZ2V0TW9kZWxFdmVudCIsImdldENoYW5nZUV2ZW50IiwibmFtZSIsInRvRGF5U3RyaW5nRGF0ZSIsInZhbHVlIiwiZm9ybWF0IiwiZGF5anMiLCJkYXRlIiwidG9EYXlEYXRlU3RyaW5nIiwicGFyc2VEYXRlIiwicHJvcHMiLCJ2YWx1ZUZvcm1hdCIsImdldEZvcm1hdERhdGUiLCJkZWZhdWx0Rm9ybWF0IiwiZ2V0Rm9ybWF0RGF0ZXMiLCJ2YWx1ZXMiLCJzZXBhcmF0b3IiLCJYRVV0aWxzIiwibWFwIiwiam9pbiIsImVxdWFsRGF0ZXJhbmdlIiwiZGF0YSIsImdldENlbGxFZGl0RmlsdGVyUHJvcHMiLCJwYXJhbXMiLCJkZWZhdWx0UHJvcHMiLCJhc3NpZ24iLCJnZXRJdGVtUHJvcHMiLCJmb3JtYXRUZXh0IiwiZ2V0Q2VsbExhYmVsVk5zIiwiY2VsbExhYmVsIiwicGxhY2Vob2xkZXIiLCJoIiwiX3QiLCJnZXRPbnMiLCJpbnB1dEZ1bmMiLCJjaGFuZ2VGdW5jIiwiZXZlbnRzIiwibW9kZWxFdmVudCIsImNoYW5nZUV2ZW50IiwiaXNTYW1lRXZlbnQiLCJvbnMiLCJvYmplY3RFYWNoIiwiZnVuYyIsImtleSIsImFyZ3MiLCJ0YXJnZXRFdm50IiwiZ2V0RWRpdE9ucyIsIiR0YWJsZSIsInJvdyIsImNvbHVtbiIsInNldCIsImZpZWxkIiwidXBkYXRlU3RhdHVzIiwiZ2V0RmlsdGVyT25zIiwib3B0aW9uIiwiZ2V0SXRlbU9ucyIsIiRmb3JtIiwibWF0Y2hDYXNjYWRlckRhdGEiLCJpbmRleCIsImxpc3QiLCJsYWJlbHMiLCJ2YWwiLCJsZW5ndGgiLCJlYWNoIiwiaXRlbSIsInB1c2giLCJsYWJlbCIsImNoaWxkcmVuIiwiZ2V0U2VsZWN0Q2VsbFZhbHVlIiwib3B0aW9ucyIsIm9wdGlvbkdyb3VwcyIsIm9wdGlvblByb3BzIiwib3B0aW9uR3JvdXBQcm9wcyIsInJvd2lkIiwiZmlsdGVyYWJsZSIsIm11bHRpcGxlIiwibGFiZWxQcm9wIiwidmFsdWVQcm9wIiwiZ3JvdXBPcHRpb25zIiwiZ2V0IiwiY29saWQiLCJpZCIsImNlbGxEYXRhIiwiaW50ZXJuYWxEYXRhIiwiZnVsbEFsbERhdGFSb3dJZERhdGEiLCJyZXN0Iiwic2VsZWN0bGFiZWwiLCJzZWxlY3RJdGVtIiwiZmluZCIsImdldENhc2NhZGVyQ2VsbFZhbHVlIiwic2hvd0FsbExldmVscyIsInNsaWNlIiwiZ2V0RGF0ZVBpY2tlckNlbGxWYWx1ZSIsInJhbmdlU2VwYXJhdG9yIiwiZ2V0VGltZVBpY2tlckNlbGxWYWx1ZSIsImlzUmFuZ2UiLCJjcmVhdGVFZGl0UmVuZGVyIiwiYXR0cnMiLCJyZXNvbHZlQ29tcG9uZW50IiwiZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIiLCJjZWxsVGV4dCIsImNvbnRlbnQiLCJkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIiLCJjaGlsZFJlbmRlck9wdHMiLCJjcmVhdGVGaWx0ZXJSZW5kZXIiLCJmaWx0ZXJzIiwib0luZGV4Iiwib3B0aW9uVmFsdWUiLCJoYW5kbGVDb25maXJtRmlsdGVyIiwiY2hlY2tlZCIsIiRwYW5lbCIsImNoYW5nZU9wdGlvbiIsImRlZmF1bHRGdXp6eUZpbHRlck1ldGhvZCIsInRvVmFsdWVTdHJpbmciLCJpbmRleE9mIiwiZGVmYXVsdEV4YWN0RmlsdGVyTWV0aG9kIiwicmVuZGVyT3B0aW9ucyIsImRpc2FibGVkIiwiY3JlYXRlRm9ybUl0ZW1SZW5kZXIiLCJpdGVtVmFsdWUiLCJkZWZhdWx0QnV0dG9uSXRlbVJlbmRlciIsImRlZmF1bHRCdXR0b25zSXRlbVJlbmRlciIsImNyZWF0ZUV4cG9ydE1ldGhvZCIsImdldEV4cG9ydENlbGxWYWx1ZSIsIm9yaWdpbmFsIiwiZWRpdFJlbmRlciIsImNlbGxSZW5kZXIiLCJjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIiLCJnZXRFdmVudFRhcmdldE5vZGUiLCJldm50IiwiY29udGFpbmVyIiwiY2xhc3NOYW1lIiwidGFyZ2V0RWxlbSIsInRhcmdldCIsIm5vZGVUeXBlIiwiZG9jdW1lbnQiLCJzcGxpdCIsImZsYWciLCJwYXJlbnROb2RlIiwiaGFuZGxlQ2xlYXJFdmVudCIsIiRldmVudCIsImJvZHlFbGVtIiwiYm9keSIsIlZYRVRhYmxlUGx1Z2luRWxlbWVudCIsImluc3RhbGwiLCJ2eGV0YWJsZWNvcmUiLCJpbnRlcmNlcHRvciIsInJlbmRlcmVyIiwibWl4aW4iLCJFbEF1dG9jb21wbGV0ZSIsImF1dG9mb2N1cyIsInJlbmRlckRlZmF1bHQiLCJyZW5kZXJFZGl0IiwicmVuZGVyRmlsdGVyIiwiZGVmYXVsdEZpbHRlck1ldGhvZCIsInJlbmRlckl0ZW1Db250ZW50IiwiRWxJbnB1dCIsIkVsSW5wdXROdW1iZXIiLCJFbFNlbGVjdCIsImdyb3VwTGFiZWwiLCJncm91cCIsImdJbmRleCIsInJlbmRlckNlbGwiLCJlcU51bGwiLCJmaWx0ZXJSZW5kZXIiLCJpc0FycmF5IiwiaW5jbHVkZUFycmF5cyIsImV4cG9ydE1ldGhvZCIsIkVsQ2FzY2FkZXIiLCJFbERhdGVQaWNrZXIiLCJFbFRpbWVQaWNrZXIiLCJFbFRpbWVTZWxlY3QiLCJFbFJhdGUiLCJFbFN3aXRjaCIsImlzQm9vbGVhbiIsIkVsU2xpZGVyIiwiRWxSYWRpbyIsIkVsQ2hlY2tib3giLCJFbEJ1dHRvbiIsIkVsQnV0dG9ucyIsImFkZCIsIndpbmRvdyIsIlZYRVRhYmxlIiwidXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7QUFFQSxJQUFJQSxRQUFKOztBQUVBLFNBQVNDLFlBQVQsQ0FBdUJDLFNBQXZCLEVBQXFDO0VBQ25DLE9BQU9BLFNBQVMsS0FBSyxJQUFkLElBQXNCQSxTQUFT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b3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoLCByZXNvbHZlQ29tcG9uZW50LCBDb21wb25lbnRPcHRpb25zIH0gZnJvbSAndnVlJ1xyXG5pbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscydcclxuaW1wb3J0IHsgVlhFVGFibGVDb3JlLCBWeGVUYWJsZURlZmluZXMsIFZ4ZUNvbHVtblByb3BUeXBlcywgVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLCBWeGVHbG9iYWxJbnRlcmNlcHRvckhhbmRsZXMsIEZvcm1JdGVtUmVuZGVyT3B0aW9ucywgRm9ybUl0ZW1Db250ZW50UmVuZGVyUGFyYW1zIH0gZnJvbSAndnhlLXRhYmxlJ1xyXG5pbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnXHJcblxyXG5sZXQgdnhldGFibGU6IFZYRVRhYmxlQ29yZVxyXG5cclxuZnVuY3Rpb24gaXNFbXB0eVZhbHVlIChjZWxsVmFsdWU6IGFueSkge1xyXG4gIHJldHVybiBjZWxsVmFsdWUgPT09IG51bGwgfHwgY2VsbFZhbHVlID09PSB1bmRlZmluZWQgfHwgY2VsbFZhbHVlID09PSAnJ1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRPbk5hbWUgKHR5cGU6IHN0cmluZykge1xyXG4gIHJldHVybiAnb24nICsgdHlwZS5zdWJzdHJpbmcoMCwgMSkudG9Mb2NhbGVVcHBlckNhc2UoKSArIHR5cGUuc3Vic3RyaW5nKDEpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE1vZGVsUHJvcCAocmVuZGVyT3B0czogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvbnMpIHtcclxuICByZXR1cm4gJ21vZGVsVmFsdWUnXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE1vZGVsRXZlbnQgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zKSB7XHJcbiAgcmV0dXJuICd1cGRhdGU6bW9kZWxWYWx1ZSdcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2hhbmdlRXZlbnQgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zKSB7XHJcbiAgbGV0IHR5cGUgPSAnY2hhbmdlJ1xyXG4gIHN3aXRjaCAocmVuZGVyT3B0cy5uYW1lKSB7XHJcbiAgICBjYXNlICdFbEF1dG9jb21wbGV0ZSc6XHJcbiAgICAgIHR5cGUgPSAnc2VsZWN0J1xyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnRWxJbnB1dCc6XHJcbiAgICBjYXNlICdFbElucHV0TnVtYmVyJzpcclxuICAgICAgdHlwZSA9ICdpbnB1dCdcclxuICAgICAgYnJlYWtcclxuICB9XHJcbiAgcmV0dXJuIHR5cGVcclxufVxyXG5cclxuZnVuY3Rpb24gdG9EYXlTdHJpbmdEYXRlICh2YWx1ZTogYW55LCBmb3JtYXQ6IHN0cmluZykge1xyXG4gIHJldHVybiBkYXlqcyh2YWx1ZSwgZm9ybWF0KS5kYXRlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvRGF5RGF0ZVN0cmluZyAoZGF0ZTogYW55LCBmb3JtYXQ6IHN0cmluZykge1xyXG4gIHJldHVybiBkYXlqcyhkYXRlKS5mb3JtYXQoZm9ybWF0KVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZURhdGUgKHZhbHVlOiBhbnksIHByb3BzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgcmV0dXJuIHZhbHVlICYmIHByb3BzLnZhbHVlRm9ybWF0ID8gdG9EYXlTdHJpbmdEYXRlKHZhbHVlLCBwcm9wcy52YWx1ZUZvcm1hdCkgOiB2YWx1ZVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGb3JtYXREYXRlICh2YWx1ZTogYW55LCBwcm9wczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgZGVmYXVsdEZvcm1hdDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIHZhbHVlID8gdG9EYXlEYXRlU3RyaW5nKHBhcnNlRGF0ZSh2YWx1ZSwgcHJvcHMpLCBwcm9wcy5mb3JtYXQgfHwgZGVmYXVsdEZvcm1hdCkgOiB2YWx1ZVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGb3JtYXREYXRlcyAodmFsdWVzOiBhbnlbXSwgcHJvcHM6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIHNlcGFyYXRvcjogc3RyaW5nLCBkZWZhdWx0Rm9ybWF0OiBzdHJpbmcpIHtcclxuICByZXR1cm4gWEVVdGlscy5tYXAodmFsdWVzLCAoZGF0ZTogYW55KSA9PiBnZXRGb3JtYXREYXRlKGRhdGUsIHByb3BzLCBkZWZhdWx0Rm9ybWF0KSkuam9pbihzZXBhcmF0b3IpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVxdWFsRGF0ZXJhbmdlIChjZWxsVmFsdWU6IGFueSwgZGF0YTogYW55LCBwcm9wczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgZGVmYXVsdEZvcm1hdDogc3RyaW5nKSB7XHJcbiAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCBkZWZhdWx0Rm9ybWF0KVxyXG4gIHJldHVybiBjZWxsVmFsdWUgPj0gZ2V0Rm9ybWF0RGF0ZShkYXRhWzBdLCBwcm9wcywgZGVmYXVsdEZvcm1hdCkgJiYgY2VsbFZhbHVlIDw9IGdldEZvcm1hdERhdGUoZGF0YVsxXSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENlbGxFZGl0RmlsdGVyUHJvcHMgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJFZGl0UGFyYW1zIHwgVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckZpbHRlclBhcmFtcywgdmFsdWU6IGFueSwgZGVmYXVsdFByb3BzPzogeyBbcHJvcDogc3RyaW5nXTogYW55IH0pIHtcclxuICByZXR1cm4gWEVVdGlscy5hc3NpZ24oe30sIGRlZmF1bHRQcm9wcywgcmVuZGVyT3B0cy5wcm9wcywgeyBbZ2V0TW9kZWxQcm9wKHJlbmRlck9wdHMpXTogdmFsdWUgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0SXRlbVByb3BzIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBGb3JtSXRlbUNvbnRlbnRSZW5kZXJQYXJhbXMsIHZhbHVlOiBhbnksIGRlZmF1bHRQcm9wcz86IHsgW3Byb3A6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgcmV0dXJuIFhFVXRpbHMuYXNzaWduKHt9LCBkZWZhdWx0UHJvcHMsIHJlbmRlck9wdHMucHJvcHMsIHsgW2dldE1vZGVsUHJvcChyZW5kZXJPcHRzKV06IHZhbHVlIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFRleHQgKGNlbGxWYWx1ZTogYW55KSB7XHJcbiAgcmV0dXJuICcnICsgKGlzRW1wdHlWYWx1ZShjZWxsVmFsdWUpID8gJycgOiBjZWxsVmFsdWUpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENlbGxMYWJlbFZOcyAocmVuZGVyT3B0czogVnhlQ29sdW1uUHJvcFR5cGVzLkVkaXRSZW5kZXIsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckNlbGxQYXJhbXMsIGNlbGxMYWJlbDogYW55KSB7XHJcbiAgY29uc3QgeyBwbGFjZWhvbGRlciB9ID0gcmVuZGVyT3B0c1xyXG4gIHJldHVybiBbXHJcbiAgICBoKCdzcGFuJywge1xyXG4gICAgICBjbGFzczogJ3Z4ZS1jZWxsLS1sYWJlbCdcclxuICAgIH0sIHBsYWNlaG9sZGVyICYmIGlzRW1wdHlWYWx1ZShjZWxsTGFiZWwpXHJcbiAgICAgID8gW1xyXG4gICAgICAgICAgaCgnc3BhbicsIHtcclxuICAgICAgICAgICAgY2xhc3M6ICd2eGUtY2VsbC0tcGxhY2Vob2xkZXInXHJcbiAgICAgICAgICB9LCBmb3JtYXRUZXh0KHZ4ZXRhYmxlLl90KHBsYWNlaG9sZGVyKSkpXHJcbiAgICAgICAgXVxyXG4gICAgICA6IGZvcm1hdFRleHQoY2VsbExhYmVsKSlcclxuICBdXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE9ucyAocmVuZGVyT3B0czogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvbnMsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlclBhcmFtcywgaW5wdXRGdW5jPzogRnVuY3Rpb24sIGNoYW5nZUZ1bmM/OiBGdW5jdGlvbikge1xyXG4gIGNvbnN0IHsgZXZlbnRzIH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgbW9kZWxFdmVudCA9IGdldE1vZGVsRXZlbnQocmVuZGVyT3B0cylcclxuICBjb25zdCBjaGFuZ2VFdmVudCA9IGdldENoYW5nZUV2ZW50KHJlbmRlck9wdHMpXHJcbiAgY29uc3QgaXNTYW1lRXZlbnQgPSBjaGFuZ2VFdmVudCA9PT0gbW9kZWxFdmVudFxyXG4gIGNvbnN0IG9uczogeyBbdHlwZTogc3RyaW5nXTogRnVuY3Rpb24gfSA9IHt9XHJcbiAgWEVVdGlscy5vYmplY3RFYWNoKGV2ZW50cywgKGZ1bmM6IEZ1bmN0aW9uLCBrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgb25zW2dldE9uTmFtZShrZXkpXSA9IGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICBmdW5jKHBhcmFtcywgLi4uYXJncylcclxuICAgIH1cclxuICB9KVxyXG4gIGlmIChpbnB1dEZ1bmMpIHtcclxuICAgIG9uc1tnZXRPbk5hbWUobW9kZWxFdmVudCldID0gZnVuY3Rpb24gKHRhcmdldEV2bnQ6IGFueSkge1xyXG4gICAgICBpbnB1dEZ1bmModGFyZ2V0RXZudClcclxuICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHNbbW9kZWxFdmVudF0pIHtcclxuICAgICAgICBldmVudHNbbW9kZWxFdmVudF0ocGFyYW1zLCB0YXJnZXRFdm50KVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc1NhbWVFdmVudCAmJiBjaGFuZ2VGdW5jKSB7XHJcbiAgICAgICAgY2hhbmdlRnVuYyh0YXJnZXRFdm50KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmICghaXNTYW1lRXZlbnQgJiYgY2hhbmdlRnVuYykge1xyXG4gICAgb25zW2dldE9uTmFtZShjaGFuZ2VFdmVudCldID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgIGNoYW5nZUZ1bmMoLi4uYXJncylcclxuICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHNbY2hhbmdlRXZlbnRdKSB7XHJcbiAgICAgICAgZXZlbnRzW2NoYW5nZUV2ZW50XShwYXJhbXMsIC4uLmFyZ3MpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG9uc1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRFZGl0T25zIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRWRpdFBhcmFtcykge1xyXG4gIGNvbnN0IHsgJHRhYmxlLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgcmV0dXJuIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsICh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAvLyDlpITnkIYgbW9kZWwg5YC85Y+M5ZCR57uR5a6aXHJcbiAgICBYRVV0aWxzLnNldChyb3csIGNvbHVtbi5maWVsZCwgdmFsdWUpXHJcbiAgfSwgKCkgPT4ge1xyXG4gICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcclxuICAgICR0YWJsZS51cGRhdGVTdGF0dXMocGFyYW1zKVxyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZpbHRlck9ucyAocmVuZGVyT3B0czogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvbnMsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckZpbHRlclBhcmFtcywgb3B0aW9uOiBWeGVUYWJsZURlZmluZXMuRmlsdGVyT3B0aW9uLCBjaGFuZ2VGdW5jOiBGdW5jdGlvbikge1xyXG4gIHJldHVybiBnZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zLCAodmFsdWU6IGFueSkgPT4ge1xyXG4gICAgLy8g5aSE55CGIG1vZGVsIOWAvOWPjOWQkee7keWumlxyXG4gICAgb3B0aW9uLmRhdGEgPSB2YWx1ZVxyXG4gIH0sIGNoYW5nZUZ1bmMpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEl0ZW1PbnMgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IEZvcm1JdGVtQ29udGVudFJlbmRlclBhcmFtcykge1xyXG4gIGNvbnN0IHsgJGZvcm0sIGRhdGEsIGZpZWxkIH0gPSBwYXJhbXNcclxuICByZXR1cm4gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgKHZhbHVlOiBhbnkpID0+IHtcclxuICAgIC8vIOWkhOeQhiBtb2RlbCDlgLzlj4zlkJHnu5HlrppcclxuICAgIFhFVXRpbHMuc2V0KGRhdGEsIGZpZWxkLCB2YWx1ZSlcclxuICB9LCAoKSA9PiB7XHJcbiAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgJGZvcm0udXBkYXRlU3RhdHVzKHBhcmFtcylcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYXRjaENhc2NhZGVyRGF0YSAoaW5kZXg6IG51bWJlciwgbGlzdDogYW55W10sIHZhbHVlczogYW55W10sIGxhYmVsczogYW55W10pIHtcclxuICBjb25zdCB2YWwgPSB2YWx1ZXNbaW5kZXhdXHJcbiAgaWYgKGxpc3QgJiYgdmFsdWVzLmxlbmd0aCA+IGluZGV4KSB7XHJcbiAgICBYRVV0aWxzLmVhY2gobGlzdCwgKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKGl0ZW0udmFsdWUgPT09IHZhbCkge1xyXG4gICAgICAgIGxhYmVscy5wdXNoKGl0ZW0ubGFiZWwpXHJcbiAgICAgICAgbWF0Y2hDYXNjYWRlckRhdGEoKytpbmRleCwgaXRlbS5jaGlsZHJlbiwgdmFsdWVzLCBsYWJlbHMpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZWxlY3RDZWxsVmFsdWUgKHJlbmRlck9wdHM6IFZ4ZUNvbHVtblByb3BUeXBlcy5FZGl0UmVuZGVyLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJDZWxsUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBvcHRpb25zID0gW10sIG9wdGlvbkdyb3VwcywgcHJvcHMgPSB7fSwgb3B0aW9uUHJvcHMgPSB7fSwgb3B0aW9uR3JvdXBQcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgeyAkdGFibGUsIHJvd2lkLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgY29uc3QgeyBmaWx0ZXJhYmxlLCBtdWx0aXBsZSB9ID0gcHJvcHNcclxuICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnXHJcbiAgY29uc3QgdmFsdWVQcm9wID0gb3B0aW9uUHJvcHMudmFsdWUgfHwgJ3ZhbHVlJ1xyXG4gIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucydcclxuICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZClcclxuICBjb25zdCBjb2xpZCA9IGNvbHVtbi5pZFxyXG4gIGxldCBjZWxsRGF0YTogYW55XHJcbiAgaWYgKGZpbHRlcmFibGUpIHtcclxuICAgIGNvbnN0IHsgaW50ZXJuYWxEYXRhIH0gPSAkdGFibGVcclxuICAgIGNvbnN0IHsgZnVsbEFsbERhdGFSb3dJZERhdGEgfSA9IGludGVybmFsRGF0YVxyXG4gICAgY29uc3QgcmVzdDogYW55ID0gZnVsbEFsbERhdGFSb3dJZERhdGFbcm93aWRdXHJcbiAgICBpZiAocmVzdCkge1xyXG4gICAgICBjZWxsRGF0YSA9IHJlc3QuY2VsbERhdGFcclxuICAgICAgaWYgKCFjZWxsRGF0YSkge1xyXG4gICAgICAgIGNlbGxEYXRhID0gcmVzdC5jZWxsRGF0YSA9IHt9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChyZXN0ICYmIGNlbGxEYXRhW2NvbGlkXSAmJiBjZWxsRGF0YVtjb2xpZF0udmFsdWUgPT09IGNlbGxWYWx1ZSkge1xyXG4gICAgICByZXR1cm4gY2VsbERhdGFbY29saWRdLmxhYmVsXHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmICghaXNFbXB0eVZhbHVlKGNlbGxWYWx1ZSkpIHtcclxuICAgIGNvbnN0IHNlbGVjdGxhYmVsID0gWEVVdGlscy5tYXAobXVsdGlwbGUgPyBjZWxsVmFsdWUgOiBbY2VsbFZhbHVlXSwgb3B0aW9uR3JvdXBzXHJcbiAgICAgID8gKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICBsZXQgc2VsZWN0SXRlbTogYW55XHJcbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb3B0aW9uR3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBzZWxlY3RJdGVtID0gWEVVdGlscy5maW5kKG9wdGlvbkdyb3Vwc1tpbmRleF1bZ3JvdXBPcHRpb25zXSwgKGl0ZW0pID0+IGl0ZW1bdmFsdWVQcm9wXSA9PT0gdmFsdWUpXHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW0gPyBzZWxlY3RJdGVtW2xhYmVsUHJvcF0gOiB2YWx1ZVxyXG4gICAgICAgIH1cclxuICAgICAgOiAodmFsdWUpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHNlbGVjdEl0ZW0gPSBYRVV0aWxzLmZpbmQob3B0aW9ucywgKGl0ZW0pID0+IGl0ZW1bdmFsdWVQcm9wXSA9PT0gdmFsdWUpXHJcbiAgICAgICAgICByZXR1cm4gc2VsZWN0SXRlbSA/IHNlbGVjdEl0ZW1bbGFiZWxQcm9wXSA6IHZhbHVlXHJcbiAgICAgICAgfSkuam9pbignLCAnKVxyXG4gICAgaWYgKGNlbGxEYXRhICYmIG9wdGlvbnMgJiYgb3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgY2VsbERhdGFbY29saWRdID0geyB2YWx1ZTogY2VsbFZhbHVlLCBsYWJlbDogc2VsZWN0bGFiZWwgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlbGVjdGxhYmVsXHJcbiAgfVxyXG4gIHJldHVybiAnJ1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDYXNjYWRlckNlbGxWYWx1ZSAocmVuZGVyT3B0czogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvbnMsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckNlbGxQYXJhbXMpIHtcclxuICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZClcclxuICBjb25zdCB2YWx1ZXM6IGFueVtdID0gY2VsbFZhbHVlIHx8IFtdXHJcbiAgY29uc3QgbGFiZWxzOiBhbnlbXSA9IFtdXHJcbiAgbWF0Y2hDYXNjYWRlckRhdGEoMCwgcHJvcHMub3B0aW9ucywgdmFsdWVzLCBsYWJlbHMpXHJcbiAgcmV0dXJuIChwcm9wcy5zaG93QWxsTGV2ZWxzID09PSBmYWxzZSA/IGxhYmVscy5zbGljZShsYWJlbHMubGVuZ3RoIC0gMSwgbGFiZWxzLmxlbmd0aCkgOiBsYWJlbHMpLmpvaW4oYCAke3Byb3BzLnNlcGFyYXRvciB8fCAnLyd9IGApXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldERhdGVQaWNrZXJDZWxsVmFsdWUgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJDZWxsUGFyYW1zIHwgVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLkV4cG9ydE1ldGhvZFBhcmFtcykge1xyXG4gIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGNvbnN0IHsgcmFuZ2VTZXBhcmF0b3IgPSAnLScgfSA9IHByb3BzXHJcbiAgbGV0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKVxyXG4gIHN3aXRjaCAocHJvcHMudHlwZSkge1xyXG4gICAgY2FzZSAnd2Vlayc6XHJcbiAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGUoY2VsbFZhbHVlLCBwcm9wcywgJ1lZWVl3V1cnKVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnbW9udGgnOlxyXG4gICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsICdZWVlZLU1NJylcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ3llYXInOlxyXG4gICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsICdZWVlZJylcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ2RhdGVzJzpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZXMoY2VsbFZhbHVlLCBwcm9wcywgJywgJywgJ1lZWVktTU0tREQnKVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnZGF0ZXJhbmdlJzpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZXMoY2VsbFZhbHVlLCBwcm9wcywgYCAke3JhbmdlU2VwYXJhdG9yfSBgLCAnWVlZWS1NTS1ERCcpXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICdkYXRldGltZXJhbmdlJzpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZXMoY2VsbFZhbHVlLCBwcm9wcywgYCAke3JhbmdlU2VwYXJhdG9yfSBgLCAnWVlZWS1NTS1ERCBISDpzczptbScpXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICdtb250aHJhbmdlJzpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZXMoY2VsbFZhbHVlLCBwcm9wcywgYCAke3JhbmdlU2VwYXJhdG9yfSBgLCAnWVlZWS1NTScpXHJcbiAgICAgIGJyZWFrXHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsICdZWVlZLU1NLUREJylcclxuICB9XHJcbiAgcmV0dXJuIGNlbGxWYWx1ZVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUaW1lUGlja2VyQ2VsbFZhbHVlIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyQ2VsbFBhcmFtcyB8IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJFZGl0UGFyYW1zKSB7XHJcbiAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgY29uc3QgeyBpc1JhbmdlLCBmb3JtYXQgPSAnaGg6bW06c3MnLCByYW5nZVNlcGFyYXRvciA9ICctJyB9ID0gcHJvcHNcclxuICBsZXQgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpXHJcbiAgaWYgKGNlbGxWYWx1ZSAmJiBpc1JhbmdlKSB7XHJcbiAgICBjZWxsVmFsdWUgPSBYRVV0aWxzLm1hcChjZWxsVmFsdWUsIChkYXRlKSA9PiB0b0RheURhdGVTdHJpbmcocGFyc2VEYXRlKGRhdGUsIHByb3BzKSwgZm9ybWF0KSkuam9pbihgICR7cmFuZ2VTZXBhcmF0b3J9IGApXHJcbiAgfVxyXG4gIHJldHVybiB0b0RheURhdGVTdHJpbmcocGFyc2VEYXRlKGNlbGxWYWx1ZSwgcHJvcHMpLCBmb3JtYXQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUVkaXRSZW5kZXIgKGRlZmF1bHRQcm9wcz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlck9wdHM6IFZ4ZUNvbHVtblByb3BUeXBlcy5FZGl0UmVuZGVyICYgeyBuYW1lOiBzdHJpbmcgfSwgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRWRpdFBhcmFtcykge1xyXG4gICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZClcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xyXG4gICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUsIGRlZmF1bHRQcm9wcyksXHJcbiAgICAgICAgLi4uZ2V0RWRpdE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICAgIH0pXHJcbiAgICBdXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uRWRpdFJlbmRlciAocmVuZGVyT3B0czogVnhlQ29sdW1uUHJvcFR5cGVzLkVkaXRSZW5kZXIsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckVkaXRQYXJhbXMpIHtcclxuICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgcmV0dXJuIFtcclxuICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtYnV0dG9uJyksIHtcclxuICAgICAgLi4uYXR0cnMsXHJcbiAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBudWxsKSxcclxuICAgICAgLi4uZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgIH0sIGNlbGxUZXh0KHJlbmRlck9wdHMuY29udGVudCkpXHJcbiAgXVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIgKHJlbmRlck9wdHM6IFZ4ZUNvbHVtblByb3BUeXBlcy5FZGl0UmVuZGVyLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJFZGl0UGFyYW1zKSB7XHJcbiAgY29uc3QgeyBjaGlsZHJlbiB9ID0gcmVuZGVyT3B0c1xyXG4gIGlmIChjaGlsZHJlbikge1xyXG4gICAgcmV0dXJuIGNoaWxkcmVuLm1hcCgoY2hpbGRSZW5kZXJPcHRzOiBWeGVDb2x1bW5Qcm9wVHlwZXMuRWRpdFJlbmRlcikgPT4gZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIoY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKVxyXG4gIH1cclxuICByZXR1cm4gW11cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRmlsdGVyUmVuZGVyIChkZWZhdWx0UHJvcHM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJPcHRzOiBWeGVDb2x1bW5Qcm9wVHlwZXMuRmlsdGVyUmVuZGVyICYgeyBuYW1lOiBzdHJpbmcgfSwgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRmlsdGVyUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBoKCdkaXYnLCB7XHJcbiAgICAgICAgY2xhc3M6ICd2eGUtdGFibGUtLWZpbHRlci1lbGVtZW50LXdyYXBwZXInXHJcbiAgICAgIH0sIGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5kYXRhXHJcbiAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xyXG4gICAgICAgICAga2V5OiBvSW5kZXgsXHJcbiAgICAgICAgICAuLi5hdHRycyxcclxuICAgICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb25WYWx1ZSwgZGVmYXVsdFByb3BzKSxcclxuICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgISFvcHRpb24uZGF0YSwgb3B0aW9uKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICB9KSlcclxuICAgIF1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1GaWx0ZXIgKHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckZpbHRlclBhcmFtcywgY2hlY2tlZDogYm9vbGVhbiwgb3B0aW9uOiBWeGVUYWJsZURlZmluZXMuRmlsdGVyT3B0aW9uKSB7XHJcbiAgY29uc3QgeyAkcGFuZWwgfSA9IHBhcmFtc1xyXG4gICRwYW5lbC5jaGFuZ2VPcHRpb24obnVsbCwgY2hlY2tlZCwgb3B0aW9uKVxyXG59XHJcblxyXG4vKipcclxuICog5qih57OK5Yy56YWNXHJcbiAqIEBwYXJhbSBwYXJhbXNcclxuICovXHJcbmZ1bmN0aW9uIGRlZmF1bHRGdXp6eUZpbHRlck1ldGhvZCAocGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuRmlsdGVyTWV0aG9kUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBvcHRpb24sIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvblxyXG4gIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKVxyXG4gIHJldHVybiBYRVV0aWxzLnRvVmFsdWVTdHJpbmcoY2VsbFZhbHVlKS5pbmRleE9mKGRhdGEpID4gLTFcclxufVxyXG5cclxuLyoqXHJcbiAqIOeyvuehruWMuemFjVxyXG4gKiBAcGFyYW0gcGFyYW1zXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QgKHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLkZpbHRlck1ldGhvZFBhcmFtcykge1xyXG4gIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgY29uc3QgeyBkYXRhIH0gPSBvcHRpb25cclxuICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZClcclxuICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cclxuICByZXR1cm4gY2VsbFZhbHVlID09PSBkYXRhXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlck9wdGlvbnMgKG9wdGlvbnM6IGFueVtdLCBvcHRpb25Qcm9wczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvblByb3BzKSB7XHJcbiAgY29uc3QgbGFiZWxQcm9wID0gb3B0aW9uUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gIGNvbnN0IHZhbHVlUHJvcCA9IG9wdGlvblByb3BzLnZhbHVlIHx8ICd2YWx1ZSdcclxuICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9ucywgKGl0ZW0sIG9JbmRleCkgPT4ge1xyXG4gICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtb3B0aW9uJyksIHtcclxuICAgICAga2V5OiBvSW5kZXgsXHJcbiAgICAgIHZhbHVlOiBpdGVtW3ZhbHVlUHJvcF0sXHJcbiAgICAgIGxhYmVsOiBpdGVtW2xhYmVsUHJvcF0sXHJcbiAgICAgIGRpc2FibGVkOiBpdGVtLmRpc2FibGVkXHJcbiAgICB9KVxyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNlbGxUZXh0IChjZWxsVmFsdWU6IGFueSk6IHN0cmluZ1tdIHtcclxuICByZXR1cm4gW2Zvcm1hdFRleHQoY2VsbFZhbHVlKV1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRm9ybUl0ZW1SZW5kZXIgKGRlZmF1bHRQcm9wcz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlck9wdHM6IEZvcm1JdGVtUmVuZGVyT3B0aW9ucyAmIHsgbmFtZTogc3RyaW5nIH0sIHBhcmFtczogRm9ybUl0ZW1Db250ZW50UmVuZGVyUGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGZpZWxkIH0gPSBwYXJhbXNcclxuICAgIGNvbnN0IHsgbmFtZSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgY29uc3QgaXRlbVZhbHVlID0gWEVVdGlscy5nZXQoZGF0YSwgZmllbGQpXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBoKHJlc29sdmVDb21wb25lbnQobmFtZSksIHtcclxuICAgICAgICAuLi5hdHRycyxcclxuICAgICAgICAuLi5nZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBpdGVtVmFsdWUsIGRlZmF1bHRQcm9wcyksXHJcbiAgICAgICAgLi4uZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICAgIH0pXHJcbiAgICBdXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uSXRlbVJlbmRlciAocmVuZGVyT3B0czogRm9ybUl0ZW1SZW5kZXJPcHRpb25zLCBwYXJhbXM6IEZvcm1JdGVtQ29udGVudFJlbmRlclBhcmFtcykge1xyXG4gIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICBjb25zdCBwcm9wcyA9IGdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG51bGwpXHJcbiAgcmV0dXJuIFtcclxuICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtYnV0dG9uJykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAuLi5hdHRycyxcclxuICAgICAgLi4ucHJvcHMsXHJcbiAgICAgIC4uLmdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICB9LCB7XHJcbiAgICAgIGRlZmF1bHQ6ICgpID0+IGNlbGxUZXh0KHJlbmRlck9wdHMuY29udGVudCB8fCBwcm9wcy5jb250ZW50KVxyXG4gICAgfSlcclxuICBdXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25zSXRlbVJlbmRlciAocmVuZGVyT3B0czogRm9ybUl0ZW1SZW5kZXJPcHRpb25zLCBwYXJhbXM6IEZvcm1JdGVtQ29udGVudFJlbmRlclBhcmFtcykge1xyXG4gIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHJlbmRlck9wdHNcclxuICBpZiAoY2hpbGRyZW4pIHtcclxuICAgIHJldHVybiBjaGlsZHJlbi5tYXAoKGNoaWxkUmVuZGVyT3B0czogRm9ybUl0ZW1SZW5kZXJPcHRpb25zKSA9PiBkZWZhdWx0QnV0dG9uSXRlbVJlbmRlcihjaGlsZFJlbmRlck9wdHMsIHBhcmFtcylbMF0pXHJcbiAgfVxyXG4gIHJldHVybiBbXVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFeHBvcnRNZXRob2QgKGdldEV4cG9ydENlbGxWYWx1ZTogRnVuY3Rpb24pIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLkV4cG9ydE1ldGhvZFBhcmFtcykge1xyXG4gICAgY29uc3QgeyByb3csIGNvbHVtbiwgb3B0aW9ucyB9ID0gcGFyYW1zXHJcbiAgICByZXR1cm4gb3B0aW9ucyAmJiBvcHRpb25zLm9yaWdpbmFsID8gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpIDogZ2V0RXhwb3J0Q2VsbFZhbHVlKGNvbHVtbi5lZGl0UmVuZGVyIHx8IGNvbHVtbi5jZWxsUmVuZGVyLCBwYXJhbXMpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIgKCkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0czogRm9ybUl0ZW1SZW5kZXJPcHRpb25zICYgeyBuYW1lOiBzdHJpbmcgfSwgcGFyYW1zOiBGb3JtSXRlbUNvbnRlbnRSZW5kZXJQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgbmFtZSwgb3B0aW9ucyA9IFtdLCBvcHRpb25Qcm9wcyA9IHt9LCBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgY29uc3QgeyBkYXRhLCBmaWVsZCB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnXHJcbiAgICBjb25zdCB2YWx1ZVByb3AgPSBvcHRpb25Qcm9wcy52YWx1ZSB8fCAndmFsdWUnXHJcbiAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBmaWVsZClcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGgocmVzb2x2ZUNvbXBvbmVudChgJHtuYW1lfUdyb3VwYCkgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgIC4uLmdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSksXHJcbiAgICAgICAgLi4uZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICAgIH0sIHtcclxuICAgICAgICBkZWZhdWx0OiAoKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQobmFtZSkgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgIGtleTogb0luZGV4LFxyXG4gICAgICAgICAgICAgIGxhYmVsOiBvcHRpb25bdmFsdWVQcm9wXSxcclxuICAgICAgICAgICAgICBkaXNhYmxlZDogb3B0aW9uLmRpc2FibGVkXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBjZWxsVGV4dChvcHRpb25bbGFiZWxQcm9wXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOajgOafpeinpuWPkea6kOaYr+WQpuWxnuS6juebruagh+iKgueCuVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXROb2RlIChldm50OiBhbnksIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nKSB7XHJcbiAgbGV0IHRhcmdldEVsZW1cclxuICBsZXQgdGFyZ2V0ID0gZXZudC50YXJnZXRcclxuICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldC5ub2RlVHlwZSAmJiB0YXJnZXQgIT09IGRvY3VtZW50KSB7XHJcbiAgICBpZiAoY2xhc3NOYW1lICYmIHRhcmdldC5jbGFzc05hbWUgJiYgdGFyZ2V0LmNsYXNzTmFtZS5zcGxpdCAmJiB0YXJnZXQuY2xhc3NOYW1lLnNwbGl0KCcgJykuaW5kZXhPZihjbGFzc05hbWUpID4gLTEpIHtcclxuICAgICAgdGFyZ2V0RWxlbSA9IHRhcmdldFxyXG4gICAgfSBlbHNlIGlmICh0YXJnZXQgPT09IGNvbnRhaW5lcikge1xyXG4gICAgICByZXR1cm4geyBmbGFnOiBjbGFzc05hbWUgPyAhIXRhcmdldEVsZW0gOiB0cnVlLCBjb250YWluZXIsIHRhcmdldEVsZW06IHRhcmdldEVsZW0gfVxyXG4gICAgfVxyXG4gICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGVcclxuICB9XHJcbiAgcmV0dXJuIHsgZmxhZzogZmFsc2UgfVxyXG59XHJcblxyXG4vKipcclxuICog5LqL5Lu25YW85a655oCn5aSE55CGXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVDbGVhckV2ZW50IChwYXJhbXM6IFZ4ZUdsb2JhbEludGVyY2VwdG9ySGFuZGxlcy5JbnRlcmNlcHRvckNsZWFyRmlsdGVyUGFyYW1zIHwgVnhlR2xvYmFsSW50ZXJjZXB0b3JIYW5kbGVzLkludGVyY2VwdG9yQ2xlYXJBY3RpdmVkUGFyYW1zIHwgVnhlR2xvYmFsSW50ZXJjZXB0b3JIYW5kbGVzLkludGVyY2VwdG9yQ2xlYXJBcmVhc1BhcmFtcykge1xyXG4gIGNvbnN0IHsgJGV2ZW50IH0gPSBwYXJhbXNcclxuICBjb25zdCBib2R5RWxlbSA9IGRvY3VtZW50LmJvZHlcclxuICBpZiAoXHJcbiAgICAvLyDov5znqIvmkJzntKJcclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtYXV0b2NvbXBsZXRlLXN1Z2dlc3Rpb24nKS5mbGFnIHx8XHJcbiAgICAvLyDkuIvmi4nmoYZcclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtc2VsZWN0LWRyb3Bkb3duJykuZmxhZyB8fFxyXG4gICAgLy8g57qn6IGUXHJcbiAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2VsLWNhc2NhZGVyX19kcm9wZG93bicpLmZsYWcgfHxcclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtY2FzY2FkZXItbWVudXMnKS5mbGFnIHx8XHJcbiAgICAvLyDml6XmnJ9cclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtdGltZS1wYW5lbCcpLmZsYWcgfHxcclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtcGlja2VyLXBhbmVsJykuZmxhZyB8fFxyXG4gICAgLy8g6aKc6ImyXHJcbiAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2VsLWNvbG9yLWRyb3Bkb3duJykuZmxhZ1xyXG4gICkge1xyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5Z+65LqOIHZ4ZS10YWJsZSDooajmoLznmoTpgILphY3mj5Lku7bvvIznlKjkuo7lhbzlrrkgZWxlbWVudC11aSDnu4Tku7blupNcclxuICovXHJcbmV4cG9ydCBjb25zdCBWWEVUYWJsZVBsdWdpbkVsZW1lbnQgPSB7XHJcbiAgaW5zdGFsbCAodnhldGFibGVjb3JlOiBWWEVUYWJsZUNvcmUpIHtcclxuICAgIGNvbnN0IHsgaW50ZXJjZXB0b3IsIHJlbmRlcmVyIH0gPSB2eGV0YWJsZWNvcmVcclxuXHJcbiAgICB2eGV0YWJsZSA9IHZ4ZXRhYmxlY29yZVxyXG5cclxuICAgIHJlbmRlcmVyLm1peGluKHtcclxuICAgICAgRWxBdXRvY29tcGxldGU6IHtcclxuICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5lbC1pbnB1dF9faW5uZXInLFxyXG4gICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcclxuICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgRWxJbnB1dDoge1xyXG4gICAgICAgIGF1dG9mb2N1czogJ2lucHV0LmVsLWlucHV0X19pbm5lcicsXHJcbiAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxyXG4gICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRGdXp6eUZpbHRlck1ldGhvZCxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxyXG4gICAgICB9LFxyXG4gICAgICBFbElucHV0TnVtYmVyOiB7XHJcbiAgICAgICAgYXV0b2ZvY3VzOiAnaW5wdXQuZWwtaW5wdXRfX2lubmVyJyxcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXHJcbiAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEZ1enp5RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEVsU2VsZWN0OiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdCAocmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpXHJcbiAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUpXHJcbiAgICAgICAgICBjb25zdCBvbnMgPSBnZXRFZGl0T25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgICAgICAgIGlmIChvcHRpb25Hcm91cHMpIHtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJ1xyXG4gICAgICAgICAgICBjb25zdCBncm91cExhYmVsID0gb3B0aW9uR3JvdXBQcm9wcy5sYWJlbCB8fCAnbGFiZWwnXHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgaChyZXNvbHZlQ29tcG9uZW50KCdlbC1zZWxlY3QnKSBhcyBDb21wb25lbnRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAuLi5hdHRycyxcclxuICAgICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgICAgLi4ub25zXHJcbiAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQoJ2VsLW9wdGlvbi1ncm91cCcpIGFzIENvbXBvbmVudE9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGtleTogZ0luZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGdyb3VwW2dyb3VwTGFiZWxdXHJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhncm91cFtncm91cE9wdGlvbnNdLCBvcHRpb25Qcm9wcylcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgICAgICAgIC4uLm9uc1xyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckNlbGwgKHJlbmRlck9wdHMsIHBhcmFtcykge1xyXG4gICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldFNlbGVjdENlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJ1xyXG4gICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gICAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItZWxlbWVudC13cmFwcGVyJ1xyXG4gICAgICAgICAgICB9LCBvcHRpb25Hcm91cHNcclxuICAgICAgICAgICAgICA/IGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgcHJvcHMubXVsdGlwbGUgPyAob3B0aW9uLmRhdGEgJiYgb3B0aW9uLmRhdGEubGVuZ3RoID4gMCkgOiAhWEVVdGlscy5lcU51bGwob3B0aW9uLmRhdGEpLCBvcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtb3B0aW9uLWdyb3VwJykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGdyb3VwW2dyb3VwTGFiZWxdXHJcbiAgICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMoZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICA6IGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCBwcm9wcy5tdWx0aXBsZSA/IChvcHRpb24uZGF0YSAmJiBvcHRpb24uZGF0YS5sZW5ndGggPiAwKSA6ICFYRVV0aWxzLmVxTnVsbChvcHRpb24uZGF0YSksIG9wdGlvbilcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kIChwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvblxyXG4gICAgICAgICAgY29uc3QgeyBmaWVsZCwgZmlsdGVyUmVuZGVyOiByZW5kZXJPcHRzIH0gPSBjb2x1bW5cclxuICAgICAgICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBmaWVsZClcclxuICAgICAgICAgIGlmIChwcm9wcy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgICBpZiAoWEVVdGlscy5pc0FycmF5KGNlbGxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5pbmNsdWRlQXJyYXlzKGNlbGxWYWx1ZSwgZGF0YSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5pbmRleE9mKGNlbGxWYWx1ZSkgPiAtMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXHJcbiAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlID09IGRhdGFcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50IChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhLCBmaWVsZCB9ID0gcGFyYW1zXHJcbiAgICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICAgICAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBmaWVsZClcclxuICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlKVxyXG4gICAgICAgICAgY29uc3Qgb25zID0gZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICAgICAgICBpZiAob3B0aW9uR3JvdXBzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucydcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAuLi5wcm9wcyxcclxuICAgICAgICAgICAgICAgIC4uLm9uc1xyXG4gICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdlbC1vcHRpb24tZ3JvdXAnKSBhcyBDb21wb25lbnRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZ3JvdXBbZ3JvdXBMYWJlbF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMoZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2VsLXNlbGVjdCcpIGFzIENvbXBvbmVudE9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAuLi5hdHRycyxcclxuICAgICAgICAgICAgICAuLi5wcm9wcyxcclxuICAgICAgICAgICAgICAuLi5vbnNcclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMob3B0aW9ucywgb3B0aW9uUHJvcHMpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRTZWxlY3RDZWxsVmFsdWUpXHJcbiAgICAgIH0sXHJcbiAgICAgIEVsQ2FzY2FkZXI6IHtcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyQ2VsbCAocmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ2V0Q2VsbExhYmVsVk5zKHJlbmRlck9wdHMsIHBhcmFtcywgZ2V0Q2FzY2FkZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxyXG4gICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldENhc2NhZGVyQ2VsbFZhbHVlKVxyXG4gICAgICB9LFxyXG4gICAgICBFbERhdGVQaWNrZXI6IHtcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyQ2VsbCAocmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ2V0Q2VsbExhYmVsVk5zKHJlbmRlck9wdHMsIHBhcmFtcywgZ2V0RGF0ZVBpY2tlckNlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcclxuICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS10YWJsZS0tZmlsdGVyLWVsZW1lbnQtd3JhcHBlcidcclxuICAgICAgICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KG5hbWUgYXMgc3RyaW5nKSwge1xyXG4gICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAuLi5hdHRycyxcclxuICAgICAgICAgICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb25WYWx1ZSksXHJcbiAgICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcclxuICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsICEhb3B0aW9uLmRhdGEsIG9wdGlvbilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kIChwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvblxyXG4gICAgICAgICAgY29uc3QgeyBmaWx0ZXJSZW5kZXI6IHJlbmRlck9wdHMgfSA9IGNvbHVtblxyXG4gICAgICAgICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZClcclxuICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAocHJvcHMudHlwZSkge1xyXG4gICAgICAgICAgICAgIGNhc2UgJ2RhdGVyYW5nZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXF1YWxEYXRlcmFuZ2UoY2VsbFZhbHVlLCBkYXRhLCBwcm9wcywgJ1lZWVktTU0tREQnKVxyXG4gICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lcmFuZ2UnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVxdWFsRGF0ZXJhbmdlKGNlbGxWYWx1ZSwgZGF0YSwgcHJvcHMsICdZWVlZLU1NLUREIEhIOnNzOm1tJylcclxuICAgICAgICAgICAgICBjYXNlICdtb250aHJhbmdlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcXVhbERhdGVyYW5nZShjZWxsVmFsdWUsIGRhdGEsIHByb3BzLCAnWVlZWS1NTScpXHJcbiAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgPT09IGRhdGFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcclxuICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXREYXRlUGlja2VyQ2VsbFZhbHVlKVxyXG4gICAgICB9LFxyXG4gICAgICBFbFRpbWVQaWNrZXI6IHtcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyQ2VsbCAocmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ2V0Q2VsbExhYmVsVk5zKHJlbmRlck9wdHMsIHBhcmFtcywgZ2V0VGltZVBpY2tlckNlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXHJcbiAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVFeHBvcnRNZXRob2QoZ2V0VGltZVBpY2tlckNlbGxWYWx1ZSlcclxuICAgICAgfSxcclxuICAgICAgRWxUaW1lU2VsZWN0OiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEVsUmF0ZToge1xyXG4gICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcclxuICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgRWxTd2l0Y2g6IHtcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckZpbHRlciAocmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgICAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBoKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtdGFibGUtLWZpbHRlci1lbGVtZW50LXdyYXBwZXInXHJcbiAgICAgICAgICAgIH0sIGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5kYXRhXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lIGFzIHN0cmluZyksIHtcclxuICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxyXG4gICAgICAgICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAuLi5nZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpLFxyXG4gICAgICAgICAgICAgICAgLi4uZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXHJcbiAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCBYRVV0aWxzLmlzQm9vbGVhbihvcHRpb24uZGF0YSksIG9wdGlvbilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgRWxTbGlkZXI6IHtcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXHJcbiAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEV4YWN0RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEVsUmFkaW86IHtcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgRWxDaGVja2JveDoge1xyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIoKVxyXG4gICAgICB9LFxyXG4gICAgICBFbEJ1dHRvbjoge1xyXG4gICAgICAgIHJlbmRlckRlZmF1bHQ6IGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBkZWZhdWx0QnV0dG9uSXRlbVJlbmRlclxyXG4gICAgICB9LFxyXG4gICAgICBFbEJ1dHRvbnM6IHtcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIsXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGRlZmF1bHRCdXR0b25zSXRlbVJlbmRlclxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGludGVyY2VwdG9yLmFkZCgnZXZlbnQuY2xlYXJGaWx0ZXInLCBoYW5kbGVDbGVhckV2ZW50KVxyXG4gICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFjdGl2ZWQnLCBoYW5kbGVDbGVhckV2ZW50KVxyXG4gICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFyZWFzJywgaGFuZGxlQ2xlYXJFdmVudClcclxuICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUgJiYgd2luZG93LlZYRVRhYmxlLnVzZSkge1xyXG4gIHdpbmRvdy5WWEVUYWJsZS51c2UoVlhFVGFibGVQbHVnaW5FbGVtZW50KVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpbkVsZW1lbnRcclxuIiwiaW1wb3J0IHsgaCwgcmVzb2x2ZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgWEVVdGlscyBmcm9tICd4ZS11dGlscyc7XG5pbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnO1xubGV0IHZ4ZXRhYmxlO1xuZnVuY3Rpb24gaXNFbXB0eVZhbHVlKGNlbGxWYWx1ZSkge1xuICAgIHJldHVybiBjZWxsVmFsdWUgPT09IG51bGwgfHwgY2VsbFZhbHVlID09PSB1bmRlZmluZWQgfHwgY2VsbFZhbHVlID09PSAnJztcbn1cbmZ1bmN0aW9uIGdldE9uTmFtZSh0eXBlKSB7XG4gICAgcmV0dXJuICdvbicgKyB0eXBlLnN1YnN0cmluZygwLCAxKS50b0xvY2FsZVVwcGVyQ2FzZSgpICsgdHlwZS5zdWJzdHJpbmcoMSk7XG59XG5mdW5jdGlvbiBnZXRNb2RlbFByb3AocmVuZGVyT3B0cykge1xuICAgIHJldHVybiAnbW9kZWxWYWx1ZSc7XG59XG5mdW5jdGlvbiBnZXRNb2RlbEV2ZW50KHJlbmRlck9wdHMpIHtcbiAgICByZXR1cm4gJ3VwZGF0ZTptb2RlbFZhbHVlJztcbn1cbmZ1bmN0aW9uIGdldENoYW5nZUV2ZW50KHJlbmRlck9wdHMpIHtcbiAgICBsZXQgdHlwZSA9ICdjaGFuZ2UnO1xuICAgIHN3aXRjaCAocmVuZGVyT3B0cy5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ0VsQXV0b2NvbXBsZXRlJzpcbiAgICAgICAgICAgIHR5cGUgPSAnc2VsZWN0JztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFbElucHV0JzpcbiAgICAgICAgY2FzZSAnRWxJbnB1dE51bWJlcic6XG4gICAgICAgICAgICB0eXBlID0gJ2lucHV0JztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZTtcbn1cbmZ1bmN0aW9uIHRvRGF5U3RyaW5nRGF0ZSh2YWx1ZSwgZm9ybWF0KSB7XG4gICAgcmV0dXJuIGRheWpzKHZhbHVlLCBmb3JtYXQpLmRhdGU7XG59XG5mdW5jdGlvbiB0b0RheURhdGVTdHJpbmcoZGF0ZSwgZm9ybWF0KSB7XG4gICAgcmV0dXJuIGRheWpzKGRhdGUpLmZvcm1hdChmb3JtYXQpO1xufVxuZnVuY3Rpb24gcGFyc2VEYXRlKHZhbHVlLCBwcm9wcykge1xuICAgIHJldHVybiB2YWx1ZSAmJiBwcm9wcy52YWx1ZUZvcm1hdCA/IHRvRGF5U3RyaW5nRGF0ZSh2YWx1ZSwgcHJvcHMudmFsdWVGb3JtYXQpIDogdmFsdWU7XG59XG5mdW5jdGlvbiBnZXRGb3JtYXREYXRlKHZhbHVlLCBwcm9wcywgZGVmYXVsdEZvcm1hdCkge1xuICAgIHJldHVybiB2YWx1ZSA/IHRvRGF5RGF0ZVN0cmluZyhwYXJzZURhdGUodmFsdWUsIHByb3BzKSwgcHJvcHMuZm9ybWF0IHx8IGRlZmF1bHRGb3JtYXQpIDogdmFsdWU7XG59XG5mdW5jdGlvbiBnZXRGb3JtYXREYXRlcyh2YWx1ZXMsIHByb3BzLCBzZXBhcmF0b3IsIGRlZmF1bHRGb3JtYXQpIHtcbiAgICByZXR1cm4gWEVVdGlscy5tYXAodmFsdWVzLCAoZGF0ZSkgPT4gZ2V0Rm9ybWF0RGF0ZShkYXRlLCBwcm9wcywgZGVmYXVsdEZvcm1hdCkpLmpvaW4oc2VwYXJhdG9yKTtcbn1cbmZ1bmN0aW9uIGVxdWFsRGF0ZXJhbmdlKGNlbGxWYWx1ZSwgZGF0YSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpIHtcbiAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpO1xuICAgIHJldHVybiBjZWxsVmFsdWUgPj0gZ2V0Rm9ybWF0RGF0ZShkYXRhWzBdLCBwcm9wcywgZGVmYXVsdEZvcm1hdCkgJiYgY2VsbFZhbHVlIDw9IGdldEZvcm1hdERhdGUoZGF0YVsxXSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpO1xufVxuZnVuY3Rpb24gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIHZhbHVlLCBkZWZhdWx0UHJvcHMpIHtcbiAgICByZXR1cm4gWEVVdGlscy5hc3NpZ24oe30sIGRlZmF1bHRQcm9wcywgcmVuZGVyT3B0cy5wcm9wcywgeyBbZ2V0TW9kZWxQcm9wKHJlbmRlck9wdHMpXTogdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBnZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCB2YWx1ZSwgZGVmYXVsdFByb3BzKSB7XG4gICAgcmV0dXJuIFhFVXRpbHMuYXNzaWduKHt9LCBkZWZhdWx0UHJvcHMsIHJlbmRlck9wdHMucHJvcHMsIHsgW2dldE1vZGVsUHJvcChyZW5kZXJPcHRzKV06IHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gZm9ybWF0VGV4dChjZWxsVmFsdWUpIHtcbiAgICByZXR1cm4gJycgKyAoaXNFbXB0eVZhbHVlKGNlbGxWYWx1ZSkgPyAnJyA6IGNlbGxWYWx1ZSk7XG59XG5mdW5jdGlvbiBnZXRDZWxsTGFiZWxWTnMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsTGFiZWwpIHtcbiAgICBjb25zdCB7IHBsYWNlaG9sZGVyIH0gPSByZW5kZXJPcHRzO1xuICAgIHJldHVybiBbXG4gICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICBjbGFzczogJ3Z4ZS1jZWxsLS1sYWJlbCdcbiAgICAgICAgfSwgcGxhY2Vob2xkZXIgJiYgaXNFbXB0eVZhbHVlKGNlbGxMYWJlbClcbiAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLWNlbGwtLXBsYWNlaG9sZGVyJ1xuICAgICAgICAgICAgICAgIH0sIGZvcm1hdFRleHQodnhldGFibGUuX3QocGxhY2Vob2xkZXIpKSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDogZm9ybWF0VGV4dChjZWxsTGFiZWwpKVxuICAgIF07XG59XG5mdW5jdGlvbiBnZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBpbnB1dEZ1bmMsIGNoYW5nZUZ1bmMpIHtcbiAgICBjb25zdCB7IGV2ZW50cyB9ID0gcmVuZGVyT3B0cztcbiAgICBjb25zdCBtb2RlbEV2ZW50ID0gZ2V0TW9kZWxFdmVudChyZW5kZXJPcHRzKTtcbiAgICBjb25zdCBjaGFuZ2VFdmVudCA9IGdldENoYW5nZUV2ZW50KHJlbmRlck9wdHMpO1xuICAgIGNvbnN0IGlzU2FtZUV2ZW50ID0gY2hhbmdlRXZlbnQgPT09IG1vZGVsRXZlbnQ7XG4gICAgY29uc3Qgb25zID0ge307XG4gICAgWEVVdGlscy5vYmplY3RFYWNoKGV2ZW50cywgKGZ1bmMsIGtleSkgPT4ge1xuICAgICAgICBvbnNbZ2V0T25OYW1lKGtleSldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGZ1bmMocGFyYW1zLCAuLi5hcmdzKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICBpZiAoaW5wdXRGdW5jKSB7XG4gICAgICAgIG9uc1tnZXRPbk5hbWUobW9kZWxFdmVudCldID0gZnVuY3Rpb24gKHRhcmdldEV2bnQpIHtcbiAgICAgICAgICAgIGlucHV0RnVuYyh0YXJnZXRFdm50KTtcbiAgICAgICAgICAgIGlmIChldmVudHMgJiYgZXZlbnRzW21vZGVsRXZlbnRdKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzW21vZGVsRXZlbnRdKHBhcmFtcywgdGFyZ2V0RXZudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNTYW1lRXZlbnQgJiYgY2hhbmdlRnVuYykge1xuICAgICAgICAgICAgICAgIGNoYW5nZUZ1bmModGFyZ2V0RXZudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghaXNTYW1lRXZlbnQgJiYgY2hhbmdlRnVuYykge1xuICAgICAgICBvbnNbZ2V0T25OYW1lKGNoYW5nZUV2ZW50KV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgY2hhbmdlRnVuYyguLi5hcmdzKTtcbiAgICAgICAgICAgIGlmIChldmVudHMgJiYgZXZlbnRzW2NoYW5nZUV2ZW50XSkge1xuICAgICAgICAgICAgICAgIGV2ZW50c1tjaGFuZ2VFdmVudF0ocGFyYW1zLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG9ucztcbn1cbmZ1bmN0aW9uIGdldEVkaXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyAkdGFibGUsIHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsICh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyDlpITnkIYgbW9kZWwg5YC85Y+M5ZCR57uR5a6aXG4gICAgICAgIFhFVXRpbHMuc2V0KHJvdywgY29sdW1uLmZpZWxkLCB2YWx1ZSk7XG4gICAgfSwgKCkgPT4ge1xuICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxuICAgICAgICAkdGFibGUudXBkYXRlU3RhdHVzKHBhcmFtcyk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sIGNoYW5nZUZ1bmMpIHtcbiAgICByZXR1cm4gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIOWkhOeQhiBtb2RlbCDlgLzlj4zlkJHnu5HlrppcbiAgICAgICAgb3B0aW9uLmRhdGEgPSB2YWx1ZTtcbiAgICB9LCBjaGFuZ2VGdW5jKTtcbn1cbmZ1bmN0aW9uIGdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyAkZm9ybSwgZGF0YSwgZmllbGQgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIOWkhOeQhiBtb2RlbCDlgLzlj4zlkJHnu5HlrppcbiAgICAgICAgWEVVdGlscy5zZXQoZGF0YSwgZmllbGQsIHZhbHVlKTtcbiAgICB9LCAoKSA9PiB7XG4gICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXG4gICAgICAgICRmb3JtLnVwZGF0ZVN0YXR1cyhwYXJhbXMpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gbWF0Y2hDYXNjYWRlckRhdGEoaW5kZXgsIGxpc3QsIHZhbHVlcywgbGFiZWxzKSB7XG4gICAgY29uc3QgdmFsID0gdmFsdWVzW2luZGV4XTtcbiAgICBpZiAobGlzdCAmJiB2YWx1ZXMubGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgICAgWEVVdGlscy5lYWNoKGxpc3QsIChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgbGFiZWxzLnB1c2goaXRlbS5sYWJlbCk7XG4gICAgICAgICAgICAgICAgbWF0Y2hDYXNjYWRlckRhdGEoKytpbmRleCwgaXRlbS5jaGlsZHJlbiwgdmFsdWVzLCBsYWJlbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRTZWxlY3RDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBvcHRpb25zID0gW10sIG9wdGlvbkdyb3VwcywgcHJvcHMgPSB7fSwgb3B0aW9uUHJvcHMgPSB7fSwgb3B0aW9uR3JvdXBQcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgIGNvbnN0IHsgJHRhYmxlLCByb3dpZCwgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICBjb25zdCB7IGZpbHRlcmFibGUsIG11bHRpcGxlIH0gPSBwcm9wcztcbiAgICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnO1xuICAgIGNvbnN0IHZhbHVlUHJvcCA9IG9wdGlvblByb3BzLnZhbHVlIHx8ICd2YWx1ZSc7XG4gICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJztcbiAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZCk7XG4gICAgY29uc3QgY29saWQgPSBjb2x1bW4uaWQ7XG4gICAgbGV0IGNlbGxEYXRhO1xuICAgIGlmIChmaWx0ZXJhYmxlKSB7XG4gICAgICAgIGNvbnN0IHsgaW50ZXJuYWxEYXRhIH0gPSAkdGFibGU7XG4gICAgICAgIGNvbnN0IHsgZnVsbEFsbERhdGFSb3dJZERhdGEgfSA9IGludGVybmFsRGF0YTtcbiAgICAgICAgY29uc3QgcmVzdCA9IGZ1bGxBbGxEYXRhUm93SWREYXRhW3Jvd2lkXTtcbiAgICAgICAgaWYgKHJlc3QpIHtcbiAgICAgICAgICAgIGNlbGxEYXRhID0gcmVzdC5jZWxsRGF0YTtcbiAgICAgICAgICAgIGlmICghY2VsbERhdGEpIHtcbiAgICAgICAgICAgICAgICBjZWxsRGF0YSA9IHJlc3QuY2VsbERhdGEgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdCAmJiBjZWxsRGF0YVtjb2xpZF0gJiYgY2VsbERhdGFbY29saWRdLnZhbHVlID09PSBjZWxsVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBjZWxsRGF0YVtjb2xpZF0ubGFiZWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFpc0VtcHR5VmFsdWUoY2VsbFZhbHVlKSkge1xuICAgICAgICBjb25zdCBzZWxlY3RsYWJlbCA9IFhFVXRpbHMubWFwKG11bHRpcGxlID8gY2VsbFZhbHVlIDogW2NlbGxWYWx1ZV0sIG9wdGlvbkdyb3Vwc1xuICAgICAgICAgICAgPyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0SXRlbTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb3B0aW9uR3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RJdGVtID0gWEVVdGlscy5maW5kKG9wdGlvbkdyb3Vwc1tpbmRleF1bZ3JvdXBPcHRpb25zXSwgKGl0ZW0pID0+IGl0ZW1bdmFsdWVQcm9wXSA9PT0gdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW0gPyBzZWxlY3RJdGVtW2xhYmVsUHJvcF0gOiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0SXRlbSA9IFhFVXRpbHMuZmluZChvcHRpb25zLCAoaXRlbSkgPT4gaXRlbVt2YWx1ZVByb3BdID09PSB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW0gPyBzZWxlY3RJdGVtW2xhYmVsUHJvcF0gOiB2YWx1ZTtcbiAgICAgICAgICAgIH0pLmpvaW4oJywgJyk7XG4gICAgICAgIGlmIChjZWxsRGF0YSAmJiBvcHRpb25zICYmIG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjZWxsRGF0YVtjb2xpZF0gPSB7IHZhbHVlOiBjZWxsVmFsdWUsIGxhYmVsOiBzZWxlY3RsYWJlbCB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxlY3RsYWJlbDtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xufVxuZnVuY3Rpb24gZ2V0Q2FzY2FkZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZCk7XG4gICAgY29uc3QgdmFsdWVzID0gY2VsbFZhbHVlIHx8IFtdO1xuICAgIGNvbnN0IGxhYmVscyA9IFtdO1xuICAgIG1hdGNoQ2FzY2FkZXJEYXRhKDAsIHByb3BzLm9wdGlvbnMsIHZhbHVlcywgbGFiZWxzKTtcbiAgICByZXR1cm4gKHByb3BzLnNob3dBbGxMZXZlbHMgPT09IGZhbHNlID8gbGFiZWxzLnNsaWNlKGxhYmVscy5sZW5ndGggLSAxLCBsYWJlbHMubGVuZ3RoKSA6IGxhYmVscykuam9pbihgICR7cHJvcHMuc2VwYXJhdG9yIHx8ICcvJ30gYCk7XG59XG5mdW5jdGlvbiBnZXREYXRlUGlja2VyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgeyByYW5nZVNlcGFyYXRvciA9ICctJyB9ID0gcHJvcHM7XG4gICAgbGV0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKTtcbiAgICBzd2l0Y2ggKHByb3BzLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsICdZWVlZd1dXJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAnWVlZWS1NTScpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAnWVlZWScpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RhdGVzJzpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsICcsICcsICdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZGF0ZXJhbmdlJzpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsIGAgJHtyYW5nZVNlcGFyYXRvcn0gYCwgJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkYXRldGltZXJhbmdlJzpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsIGAgJHtyYW5nZVNlcGFyYXRvcn0gYCwgJ1lZWVktTU0tREQgSEg6c3M6bW0nKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb250aHJhbmdlJzpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsIGAgJHtyYW5nZVNlcGFyYXRvcn0gYCwgJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAnWVlZWS1NTS1ERCcpO1xuICAgIH1cbiAgICByZXR1cm4gY2VsbFZhbHVlO1xufVxuZnVuY3Rpb24gZ2V0VGltZVBpY2tlckNlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHsgaXNSYW5nZSwgZm9ybWF0ID0gJ2hoOm1tOnNzJywgcmFuZ2VTZXBhcmF0b3IgPSAnLScgfSA9IHByb3BzO1xuICAgIGxldCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZCk7XG4gICAgaWYgKGNlbGxWYWx1ZSAmJiBpc1JhbmdlKSB7XG4gICAgICAgIGNlbGxWYWx1ZSA9IFhFVXRpbHMubWFwKGNlbGxWYWx1ZSwgKGRhdGUpID0+IHRvRGF5RGF0ZVN0cmluZyhwYXJzZURhdGUoZGF0ZSwgcHJvcHMpLCBmb3JtYXQpKS5qb2luKGAgJHtyYW5nZVNlcGFyYXRvcn0gYCk7XG4gICAgfVxuICAgIHJldHVybiB0b0RheURhdGVTdHJpbmcocGFyc2VEYXRlKGNlbGxWYWx1ZSwgcHJvcHMpLCBmb3JtYXQpO1xufVxuZnVuY3Rpb24gY3JlYXRlRWRpdFJlbmRlcihkZWZhdWx0UHJvcHMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xuICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUsIGRlZmF1bHRQcm9wcyksXG4gICAgICAgICAgICAgICAgLi4uZ2V0RWRpdE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXG4gICAgICAgICAgICB9KVxuICAgICAgICBdO1xuICAgIH07XG59XG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uRWRpdFJlbmRlcihyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgIHJldHVybiBbXG4gICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtYnV0dG9uJyksIHtcbiAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgLi4uZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG51bGwpLFxuICAgICAgICAgICAgLi4uZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcylcbiAgICAgICAgfSwgY2VsbFRleHQocmVuZGVyT3B0cy5jb250ZW50KSlcbiAgICBdO1xufVxuZnVuY3Rpb24gZGVmYXVsdEJ1dHRvbnNFZGl0UmVuZGVyKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHJlbmRlck9wdHM7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybiBjaGlsZHJlbi5tYXAoKGNoaWxkUmVuZGVyT3B0cykgPT4gZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIoY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xufVxuZnVuY3Rpb24gY3JlYXRlRmlsdGVyUmVuZGVyKGRlZmF1bHRQcm9wcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtdGFibGUtLWZpbHRlci1lbGVtZW50LXdyYXBwZXInXG4gICAgICAgICAgICB9LCBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAgICAgLi4uZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlLCBkZWZhdWx0UHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgISFvcHRpb24uZGF0YSwgb3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pKVxuICAgICAgICBdO1xuICAgIH07XG59XG5mdW5jdGlvbiBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgY2hlY2tlZCwgb3B0aW9uKSB7XG4gICAgY29uc3QgeyAkcGFuZWwgfSA9IHBhcmFtcztcbiAgICAkcGFuZWwuY2hhbmdlT3B0aW9uKG51bGwsIGNoZWNrZWQsIG9wdGlvbik7XG59XG4vKipcbiAqIOaooeeziuWMuemFjVxuICogQHBhcmFtIHBhcmFtc1xuICovXG5mdW5jdGlvbiBkZWZhdWx0RnV6enlGaWx0ZXJNZXRob2QocGFyYW1zKSB7XG4gICAgY29uc3QgeyBvcHRpb24sIHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBvcHRpb247XG4gICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpO1xuICAgIHJldHVybiBYRVV0aWxzLnRvVmFsdWVTdHJpbmcoY2VsbFZhbHVlKS5pbmRleE9mKGRhdGEpID4gLTE7XG59XG4vKipcbiAqIOeyvuehruWMuemFjVxuICogQHBhcmFtIHBhcmFtc1xuICovXG5mdW5jdGlvbiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QocGFyYW1zKSB7XG4gICAgY29uc3QgeyBvcHRpb24sIHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBvcHRpb247XG4gICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgIHJldHVybiBjZWxsVmFsdWUgPT09IGRhdGE7XG59XG5mdW5jdGlvbiByZW5kZXJPcHRpb25zKG9wdGlvbnMsIG9wdGlvblByb3BzKSB7XG4gICAgY29uc3QgbGFiZWxQcm9wID0gb3B0aW9uUHJvcHMubGFiZWwgfHwgJ2xhYmVsJztcbiAgICBjb25zdCB2YWx1ZVByb3AgPSBvcHRpb25Qcm9wcy52YWx1ZSB8fCAndmFsdWUnO1xuICAgIHJldHVybiBYRVV0aWxzLm1hcChvcHRpb25zLCAoaXRlbSwgb0luZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQoJ2VsLW9wdGlvbicpLCB7XG4gICAgICAgICAgICBrZXk6IG9JbmRleCxcbiAgICAgICAgICAgIHZhbHVlOiBpdGVtW3ZhbHVlUHJvcF0sXG4gICAgICAgICAgICBsYWJlbDogaXRlbVtsYWJlbFByb3BdLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGl0ZW0uZGlzYWJsZWRcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBjZWxsVGV4dChjZWxsVmFsdWUpIHtcbiAgICByZXR1cm4gW2Zvcm1hdFRleHQoY2VsbFZhbHVlKV07XG59XG5mdW5jdGlvbiBjcmVhdGVGb3JtSXRlbVJlbmRlcihkZWZhdWx0UHJvcHMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IGRhdGEsIGZpZWxkIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgbmFtZSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgY29uc3QgaXRlbVZhbHVlID0gWEVVdGlscy5nZXQoZGF0YSwgZmllbGQpO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XG4gICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlLCBkZWZhdWx0UHJvcHMpLFxuICAgICAgICAgICAgICAgIC4uLmdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXTtcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXIocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICBjb25zdCBwcm9wcyA9IGdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG51bGwpO1xuICAgIHJldHVybiBbXG4gICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtYnV0dG9uJyksIHtcbiAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICAuLi5nZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBjZWxsVGV4dChyZW5kZXJPcHRzLmNvbnRlbnQgfHwgcHJvcHMuY29udGVudClcbiAgICAgICAgfSlcbiAgICBdO1xufVxuZnVuY3Rpb24gZGVmYXVsdEJ1dHRvbnNJdGVtUmVuZGVyKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHJlbmRlck9wdHM7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybiBjaGlsZHJlbi5tYXAoKGNoaWxkUmVuZGVyT3B0cykgPT4gZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXIoY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xufVxuZnVuY3Rpb24gY3JlYXRlRXhwb3J0TWV0aG9kKGdldEV4cG9ydENlbGxWYWx1ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgcm93LCBjb2x1bW4sIG9wdGlvbnMgfSA9IHBhcmFtcztcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5vcmlnaW5hbCA/IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLmZpZWxkKSA6IGdldEV4cG9ydENlbGxWYWx1ZShjb2x1bW4uZWRpdFJlbmRlciB8fCBjb2x1bW4uY2VsbFJlbmRlciwgcGFyYW1zKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgb3B0aW9ucyA9IFtdLCBvcHRpb25Qcm9wcyA9IHt9LCBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgY29uc3QgeyBkYXRhLCBmaWVsZCB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnO1xuICAgICAgICBjb25zdCB2YWx1ZVByb3AgPSBvcHRpb25Qcm9wcy52YWx1ZSB8fCAndmFsdWUnO1xuICAgICAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBmaWVsZCk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoYCR7bmFtZX1Hcm91cGApLCB7XG4gICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlKSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJdGVtT25zKHJlbmRlck9wdHMsIHBhcmFtcylcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQobmFtZSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogb3B0aW9uW3ZhbHVlUHJvcF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IG9wdGlvbi5kaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGNlbGxUZXh0KG9wdGlvbltsYWJlbFByb3BdKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIF07XG4gICAgfTtcbn1cbi8qKlxuICog5qOA5p+l6Kem5Y+R5rqQ5piv5ZCm5bGe5LqO55uu5qCH6IqC54K5XG4gKi9cbmZ1bmN0aW9uIGdldEV2ZW50VGFyZ2V0Tm9kZShldm50LCBjb250YWluZXIsIGNsYXNzTmFtZSkge1xuICAgIGxldCB0YXJnZXRFbGVtO1xuICAgIGxldCB0YXJnZXQgPSBldm50LnRhcmdldDtcbiAgICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldC5ub2RlVHlwZSAmJiB0YXJnZXQgIT09IGRvY3VtZW50KSB7XG4gICAgICAgIGlmIChjbGFzc05hbWUgJiYgdGFyZ2V0LmNsYXNzTmFtZSAmJiB0YXJnZXQuY2xhc3NOYW1lLnNwbGl0ICYmIHRhcmdldC5jbGFzc05hbWUuc3BsaXQoJyAnKS5pbmRleE9mKGNsYXNzTmFtZSkgPiAtMSkge1xuICAgICAgICAgICAgdGFyZ2V0RWxlbSA9IHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YXJnZXQgPT09IGNvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgZmxhZzogY2xhc3NOYW1lID8gISF0YXJnZXRFbGVtIDogdHJ1ZSwgY29udGFpbmVyLCB0YXJnZXRFbGVtOiB0YXJnZXRFbGVtIH07XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiB7IGZsYWc6IGZhbHNlIH07XG59XG4vKipcbiAqIOS6i+S7tuWFvOWuueaAp+WkhOeQhlxuICovXG5mdW5jdGlvbiBoYW5kbGVDbGVhckV2ZW50KHBhcmFtcykge1xuICAgIGNvbnN0IHsgJGV2ZW50IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgYm9keUVsZW0gPSBkb2N1bWVudC5ib2R5O1xuICAgIGlmIChcbiAgICAvLyDov5znqIvmkJzntKJcbiAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2VsLWF1dG9jb21wbGV0ZS1zdWdnZXN0aW9uJykuZmxhZyB8fFxuICAgICAgICAvLyDkuIvmi4nmoYZcbiAgICAgICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdlbC1zZWxlY3QtZHJvcGRvd24nKS5mbGFnIHx8XG4gICAgICAgIC8vIOe6p+iBlFxuICAgICAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2VsLWNhc2NhZGVyX19kcm9wZG93bicpLmZsYWcgfHxcbiAgICAgICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdlbC1jYXNjYWRlci1tZW51cycpLmZsYWcgfHxcbiAgICAgICAgLy8g5pel5pyfXG4gICAgICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtdGltZS1wYW5lbCcpLmZsYWcgfHxcbiAgICAgICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdlbC1waWNrZXItcGFuZWwnKS5mbGFnIHx8XG4gICAgICAgIC8vIOminOiJslxuICAgICAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2VsLWNvbG9yLWRyb3Bkb3duJykuZmxhZykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOmAgumFjeaPkuS7tu+8jOeUqOS6juWFvOWuuSBlbGVtZW50LXVpIOe7hOS7tuW6k1xuICovXG5leHBvcnQgY29uc3QgVlhFVGFibGVQbHVnaW5FbGVtZW50ID0ge1xuICAgIGluc3RhbGwodnhldGFibGVjb3JlKSB7XG4gICAgICAgIGNvbnN0IHsgaW50ZXJjZXB0b3IsIHJlbmRlcmVyIH0gPSB2eGV0YWJsZWNvcmU7XG4gICAgICAgIHZ4ZXRhYmxlID0gdnhldGFibGVjb3JlO1xuICAgICAgICByZW5kZXJlci5taXhpbih7XG4gICAgICAgICAgICBFbEF1dG9jb21wbGV0ZToge1xuICAgICAgICAgICAgICAgIGF1dG9mb2N1czogJ2lucHV0LmVsLWlucHV0X19pbm5lcicsXG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRFeGFjdEZpbHRlck1ldGhvZCxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVsSW5wdXQ6IHtcbiAgICAgICAgICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5lbC1pbnB1dF9faW5uZXInLFxuICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RnV6enlGaWx0ZXJNZXRob2QsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbElucHV0TnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgYXV0b2ZvY3VzOiAnaW5wdXQuZWwtaW5wdXRfX2lubmVyJyxcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEZ1enp5RmlsdGVyTWV0aG9kLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRWxTZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0KHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbnMgPSBnZXRFZGl0T25zKHJlbmRlck9wdHMsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25Hcm91cHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cExhYmVsID0gb3B0aW9uR3JvdXBQcm9wcy5sYWJlbCB8fCAnbGFiZWwnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2VsLXNlbGVjdCcpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ub25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQoJ2VsLW9wdGlvbi1ncm91cCcpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZ0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZ3JvdXBbZ3JvdXBMYWJlbF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMoZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2VsLXNlbGVjdCcpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ub25zXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW5kZXJDZWxsKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2VsbExhYmVsVk5zKHJlbmRlck9wdHMsIHBhcmFtcywgZ2V0U2VsZWN0Q2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBvcHRpb25Hcm91cFByb3BzLmxhYmVsIHx8ICdsYWJlbCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtdGFibGUtLWZpbHRlci1lbGVtZW50LXdyYXBwZXInXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25Hcm91cHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcHMgPSBnZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdlbC1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgcHJvcHMubXVsdGlwbGUgPyAob3B0aW9uLmRhdGEgJiYgb3B0aW9uLmRhdGEubGVuZ3RoID4gMCkgOiAhWEVVdGlscy5lcU51bGwob3B0aW9uLmRhdGEpLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBYRVV0aWxzLm1hcChvcHRpb25Hcm91cHMsIChncm91cCwgZ0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQoJ2VsLW9wdGlvbi1ncm91cCcpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBncm91cFtncm91cExhYmVsXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiByZW5kZXJPcHRpb25zKGdyb3VwW2dyb3VwT3B0aW9uc10sIG9wdGlvblByb3BzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcHMgPSBnZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdlbC1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgcHJvcHMubXVsdGlwbGUgPyAob3B0aW9uLmRhdGEgJiYgb3B0aW9uLmRhdGEubGVuZ3RoID4gMCkgOiAhWEVVdGlscy5lcU51bGwob3B0aW9uLmRhdGEpLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9wdGlvbiwgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBvcHRpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZmllbGQsIGZpbHRlclJlbmRlcjogcmVuZGVyT3B0cyB9ID0gY29sdW1uO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcHMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYRVV0aWxzLmlzQXJyYXkoY2VsbFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBYRVV0aWxzLmluY2x1ZGVBcnJheXMoY2VsbFZhbHVlLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmluZGV4T2YoY2VsbFZhbHVlKSA+IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlID09IGRhdGE7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvcHRpb25zID0gW10sIG9wdGlvbkdyb3Vwcywgb3B0aW9uUHJvcHMgPSB7fSwgb3B0aW9uR3JvdXBQcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEsIGZpZWxkIH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1WYWx1ZSA9IFhFVXRpbHMuZ2V0KGRhdGEsIGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcHMgPSBnZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBpdGVtVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbnMgPSBnZXRJdGVtT25zKHJlbmRlck9wdHMsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25Hcm91cHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cExhYmVsID0gb3B0aW9uR3JvdXBQcm9wcy5sYWJlbCB8fCAnbGFiZWwnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2VsLXNlbGVjdCcpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ub25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQoJ2VsLW9wdGlvbi1ncm91cCcpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBncm91cFtncm91cExhYmVsXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBnSW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMoZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2VsLXNlbGVjdCcpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ub25zXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRTZWxlY3RDZWxsVmFsdWUpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRWxDYXNjYWRlcjoge1xuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJDZWxsKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2VsbExhYmVsVk5zKHJlbmRlck9wdHMsIHBhcmFtcywgZ2V0Q2FzY2FkZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRDYXNjYWRlckNlbGxWYWx1ZSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbERhdGVQaWNrZXI6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2VsbChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldERhdGVQaWNrZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXIocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICd2eGUtdGFibGUtLWZpbHRlci1lbGVtZW50LXdyYXBwZXInXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBvcHRpb24uZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsICEhb3B0aW9uLmRhdGEsIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2QocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBmaWx0ZXJSZW5kZXI6IHJlbmRlck9wdHMgfSA9IGNvbHVtbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3BzLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkYXRlcmFuZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXF1YWxEYXRlcmFuZ2UoY2VsbFZhbHVlLCBkYXRhLCBwcm9wcywgJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZXJhbmdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVxdWFsRGF0ZXJhbmdlKGNlbGxWYWx1ZSwgZGF0YSwgcHJvcHMsICdZWVlZLU1NLUREIEhIOnNzOm1tJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW9udGhyYW5nZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcXVhbERhdGVyYW5nZShjZWxsVmFsdWUsIGRhdGEsIHByb3BzLCAnWVlZWS1NTScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgPT09IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVFeHBvcnRNZXRob2QoZ2V0RGF0ZVBpY2tlckNlbGxWYWx1ZSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbFRpbWVQaWNrZXI6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2VsbChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldFRpbWVQaWNrZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRUaW1lUGlja2VyQ2VsbFZhbHVlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVsVGltZVNlbGVjdDoge1xuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVsUmF0ZToge1xuICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbFN3aXRjaDoge1xuICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItZWxlbWVudC13cmFwcGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb25WYWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCBYRVV0aWxzLmlzQm9vbGVhbihvcHRpb24uZGF0YSksIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRFeGFjdEZpbHRlck1ldGhvZCxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVsU2xpZGVyOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRFeGFjdEZpbHRlck1ldGhvZCxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVsUmFkaW86IHtcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbENoZWNrYm94OiB7XG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlcigpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRWxCdXR0b246IHtcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBkZWZhdWx0QnV0dG9uRWRpdFJlbmRlcixcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbEJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGRlZmF1bHRCdXR0b25zSXRlbVJlbmRlclxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckZpbHRlcicsIGhhbmRsZUNsZWFyRXZlbnQpO1xuICAgICAgICBpbnRlcmNlcHRvci5hZGQoJ2V2ZW50LmNsZWFyQWN0aXZlZCcsIGhhbmRsZUNsZWFyRXZlbnQpO1xuICAgICAgICBpbnRlcmNlcHRvci5hZGQoJ2V2ZW50LmNsZWFyQXJlYXMnLCBoYW5kbGVDbGVhckV2ZW50KTtcbiAgICB9XG59O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WWEVUYWJsZSAmJiB3aW5kb3cuVlhFVGFibGUudXNlKSB7XG4gICAgd2luZG93LlZYRVRhYmxlLnVzZShWWEVUYWJsZVBsdWdpbkVsZW1lbnQpO1xufVxuZXhwb3J0IGRlZmF1bHQgVlhFVGFibGVQbHVnaW5FbGVtZW50O1xuIl19
