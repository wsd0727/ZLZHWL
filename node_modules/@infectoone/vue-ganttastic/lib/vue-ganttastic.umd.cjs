(function(M,I){typeof exports=="object"&&typeof module<"u"?I(exports,require("dayjs"),require("vue")):typeof define=="function"&&define.amd?define(["exports","dayjs","vue"],I):(M=typeof globalThis<"u"?globalThis:M||self,I(M.VueGanttastic={},M.dayjs,M.Vue))})(this,function(M,I,t){"use strict";const j=(e=>e&&typeof e=="object"&&"default"in e?e:{default:e})(I);var F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ot={exports:{}};(function(e,i){(function(o,p){e.exports=p()})(F,function(){return function(o,p){p.prototype.isSameOrBefore=function(f,l){return this.isSame(f,l)||this.isBefore(f,l)}}})})(ot);const St=ot.exports;var at={exports:{}};(function(e,i){(function(o,p){e.exports=p()})(F,function(){return function(o,p){p.prototype.isSameOrAfter=function(f,l){return this.isSame(f,l)||this.isAfter(f,l)}}})})(at);const Dt=at.exports;var it={exports:{}};(function(e,i){(function(o,p){e.exports=p()})(F,function(){return function(o,p,f){p.prototype.isBetween=function(l,c,g,u){var n=f(l),a=f(c),s=(u=u||"()")[0]==="(",m=u[1]===")";return(s?this.isAfter(n,g):!this.isBefore(n,g))&&(m?this.isBefore(a,g):!this.isAfter(a,g))||(s?this.isBefore(n,g):!this.isAfter(n,g))&&(m?this.isAfter(a,g):!this.isBefore(a,g))}}})})(it);const Tt=it.exports;var st={exports:{}};(function(e,i){(function(o,p){e.exports=p()})(F,function(){var o={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},p=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,f=/\d\d/,l=/\d\d?/,c=/\d*[^-_:/,()\s\d]+/,g={},u=function(h){return(h=+h)+(h>68?1900:2e3)},n=function(h){return function(B){this[h]=+B}},a=[/[+-]\d\d:?(\d\d)?|Z/,function(h){(this.zone||(this.zone={})).offset=function(B){if(!B||B==="Z")return 0;var _=B.match(/([+-]|\d\d)/g),b=60*_[1]+(+_[2]||0);return b===0?0:_[0]==="+"?-b:b}(h)}],s=function(h){var B=g[h];return B&&(B.indexOf?B:B.s.concat(B.f))},m=function(h,B){var _,b=g.meridiem;if(b){for(var y=1;y<=24;y+=1)if(h.indexOf(b(y,0,B))>-1){_=y>12;break}}else _=h===(B?"pm":"PM");return _},v={A:[c,function(h){this.afternoon=m(h,!1)}],a:[c,function(h){this.afternoon=m(h,!0)}],S:[/\d/,function(h){this.milliseconds=100*+h}],SS:[f,function(h){this.milliseconds=10*+h}],SSS:[/\d{3}/,function(h){this.milliseconds=+h}],s:[l,n("seconds")],ss:[l,n("seconds")],m:[l,n("minutes")],mm:[l,n("minutes")],H:[l,n("hours")],h:[l,n("hours")],HH:[l,n("hours")],hh:[l,n("hours")],D:[l,n("day")],DD:[f,n("day")],Do:[c,function(h){var B=g.ordinal,_=h.match(/\d+/);if(this.day=_[0],B)for(var b=1;b<=31;b+=1)B(b).replace(/\[|\]/g,"")===h&&(this.day=b)}],M:[l,n("month")],MM:[f,n("month")],MMM:[c,function(h){var B=s("months"),_=(s("monthsShort")||B.map(function(b){return b.slice(0,3)})).indexOf(h)+1;if(_<1)throw new Error;this.month=_%12||_}],MMMM:[c,function(h){var B=s("months").indexOf(h)+1;if(B<1)throw new Error;this.month=B%12||B}],Y:[/[+-]?\d+/,n("year")],YY:[f,function(h){this.year=u(h)}],YYYY:[/\d{4}/,n("year")],Z:a,ZZ:a};function k(h){var B,_;B=h,_=g&&g.formats;for(var b=(h=B.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(O,C,D){var S=D&&D.toUpperCase();return C||_[D]||o[D]||_[S].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(T,L,$){return L||$.slice(1)})})).match(p),y=b.length,r=0;r<y;r+=1){var d=b[r],w=v[d],x=w&&w[0],E=w&&w[1];b[r]=E?{regex:x,parser:E}:d.replace(/^\[|\]$/g,"")}return function(O){for(var C={},D=0,S=0;D<y;D+=1){var T=b[D];if(typeof T=="string")S+=T.length;else{var L=T.regex,$=T.parser,U=O.slice(S),N=L.exec(U)[0];$.call(C,N),O=O.replace(N,"")}}return function(Y){var R=Y.afternoon;if(R!==void 0){var A=Y.hours;R?A<12&&(Y.hours+=12):A===12&&(Y.hours=0),delete Y.afternoon}}(C),C}}return function(h,B,_){_.p.customParseFormat=!0,h&&h.parseTwoDigitYear&&(u=h.parseTwoDigitYear);var b=B.prototype,y=b.parse;b.parse=function(r){var d=r.date,w=r.utc,x=r.args;this.$u=w;var E=x[1];if(typeof E=="string"){var O=x[2]===!0,C=x[3]===!0,D=O||C,S=x[2];C&&(S=x[2]),g=this.$locale(),!O&&S&&(g=_.Ls[S]),this.$d=function(U,N,Y){try{if(["x","X"].indexOf(N)>-1)return new Date((N==="X"?1e3:1)*U);var R=k(N)(U),A=R.year,z=R.month,le=R.day,ce=R.hours,de=R.minutes,fe=R.seconds,ue=R.milliseconds,Ot=R.zone,X=new Date,Z=le||(A||z?1:X.getDate()),J=A||X.getFullYear(),q=0;A&&!z||(q=z>0?z-1:X.getMonth());var tt=ce||0,et=de||0,nt=fe||0,rt=ue||0;return Ot?new Date(Date.UTC(J,q,Z,tt,et,nt,rt+60*Ot.offset*1e3)):Y?new Date(Date.UTC(J,q,Z,tt,et,nt,rt)):new Date(J,q,Z,tt,et,nt,rt)}catch{return new Date("")}}(d,E,w),this.init(),S&&S!==!0&&(this.$L=this.locale(S).$L),D&&d!=this.format(E)&&(this.$d=new Date("")),g={}}else if(E instanceof Array)for(var T=E.length,L=1;L<=T;L+=1){x[1]=E[L-1];var $=_.apply(this,x);if($.isValid()){this.$d=$.$d,this.$L=$.$L,this.init();break}L===T&&(this.$d=new Date(""))}else y.call(this,r)}}})})(st);const Mt=st.exports,lt=Symbol("CHART_ROWS_KEY"),ct=Symbol("CONFIG_KEY"),dt=Symbol("EMIT_BAR_EVENT_KEY"),ft=Symbol("BAR_CONTAINER_KEY");function G(){const e=t.inject(ct);if(!e)throw Error("Failed to inject config!");return e}function H(e=G()){const{chartStart:i,chartEnd:o,barStart:p,barEnd:f,dateFormat:l}=e,c=t.computed(()=>u(i.value)),g=t.computed(()=>u(o.value)),u=(n,a)=>{if(typeof n=="string")return j.default(n,l.value,!0);if(a==null)throw Error("VueGanttastic - toDayjs: passed a GanttBarObject as value, but did not provide start|end parameter.");const s=a==="start"?n[p.value]:n[f.value];return j.default(s,l.value,!0)};return{chartStartDayjs:c,chartEndDayjs:g,toDayjs:u}}function ut(){const{precision:e}=G(),{chartStartDayjs:i,chartEndDayjs:o}=H(),p=t.computed(()=>{switch(e==null?void 0:e.value){case"hour":return"day";case"day":return"month";case"month":return"year";default:throw new Error("Precision prop incorrect. Must be one of the following: 'hour', 'day', 'month'")}}),f={hour:"HH",date:"DD.MMM ",day:"DD.MMM ",month:"MMMM YYYY",year:"YYYY"};return{timeaxisUnits:t.computed(()=>{const c=[],g=[],u=p.value==="day"?"date":p.value,n=e.value;let a=i.value.startOf(n);const s=o.value.diff(i.value,"minutes",!0);let m=0,v=a[u]();for(;a.isBefore(o.value)||a.isSame(o.value);){if(a[u]()!==v){let b=0;if(c.length===0)b=a.startOf(u).diff(i.value,"minutes",!0)/s*100;else if(a.isSameOrAfter(o.value))b=o.value.diff(a.subtract(1,u).startOf(u),"minutes",!0)/s*100;else{const r=a.startOf(u),d=a.subtract(1,u).startOf(u);b=r.diff(d,"minutes",!0)/s*100}const y=a.subtract(1,u);c.push({label:y.format(f[u]),value:String(v),date:y.toDate(),width:String(b)+"%"}),m=0,v=a[u]()}let B=0;g.length===0?B=a.endOf(n).diff(i.value,"minutes",!0)/s*100:a.add(1,n).isSameOrAfter(o.value)?B=o.value.diff(a.startOf(n),"minutes",!0)/s*100:B=a.endOf(n).diff(a.startOf(n),"minutes",!0)/s*100,g.push({label:a.format(f[n]),value:String(a[n==="day"?"date":n]()),date:a.toDate(),width:String(B)+"%"});const _=a;a=a.add(1,n),(a.isBefore(o.value)||a.isSame(o.value))&&(m+=a.diff(_,"minutes",!0))}const k=o.value.isSame(o.value.startOf(u))?o.value[u]()-1:o.value[u]();return c.some(B=>B.value===String(k))||(m+=o.value.diff(a.subtract(1,n),"minutes",!0),c.push({label:o.value.format(f[u]),value:String(v),date:o.value.toDate(),width:`${m/s*100}%`})),{upperUnits:c,lowerUnits:g}})}}const Lt={class:"g-timeaxis"},Gt={class:"g-timeunits-container"},$t={class:"g-timeunits-container"},Rt=t.defineComponent({__name:"GGanttTimeaxis",setup(e){const{precision:i,colors:o}=G(),{timeaxisUnits:p}=ut();return(f,l)=>(t.openBlock(),t.createElementBlock("div",Lt,[t.createElementVNode("div",Gt,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(p).upperUnits,({label:c,value:g,date:u,width:n},a)=>(t.openBlock(),t.createElementBlock("div",{key:c,class:"g-upper-timeunit",style:t.normalizeStyle({background:a%2===0?t.unref(o).primary:t.unref(o).secondary,color:t.unref(o).text,width:n})},[t.renderSlot(f.$slots,"upper-timeunit",{label:c,value:g,date:u},()=>[t.createTextVNode(t.toDisplayString(c),1)])],4))),128))]),t.createElementVNode("div",$t,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(p).lowerUnits,({label:c,value:g,date:u,width:n},a)=>(t.openBlock(),t.createElementBlock("div",{key:c,class:"g-timeunit",style:t.normalizeStyle({background:a%2===0?t.unref(o).ternary:t.unref(o).quartenary,color:t.unref(o).text,flexDirection:t.unref(i)==="hour"?"column":"row",alignItems:t.unref(i)==="hour"?"":"center",width:n})},[t.renderSlot(f.$slots,"timeunit",{label:c,value:g,date:u},()=>[t.createTextVNode(t.toDisplayString(c),1)]),t.unref(i)==="hour"?(t.openBlock(),t.createElementBlock("div",{key:0,class:"g-timeaxis-hour-pin",style:t.normalizeStyle({background:t.unref(o).text})},null,4)):t.createCommentVNode("",!0)],4))),128))])]))}}),ge="",It={class:"g-grid-container"},Yt=t.defineComponent({__name:"GGanttGrid",props:{highlightedUnits:null},setup(e){const{colors:i}=G(),{timeaxisUnits:o}=ut();return(p,f)=>(t.openBlock(),t.createElementBlock("div",It,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(o).lowerUnits,({label:l,value:c,width:g})=>{var u;return t.openBlock(),t.createElementBlock("div",{key:l,class:"g-grid-line",style:t.normalizeStyle({width:g,background:(u=e.highlightedUnits)!=null&&u.includes(Number(c))?t.unref(i).hoverHighlight:void 0})},null,4)}),128))]))}}),pe="",jt=t.defineComponent({__name:"GGanttBarTooltip",props:{bar:null,modelValue:{type:Boolean}},setup(e){const i=e,o={hour:"HH:mm",day:"DD. MMM HH:mm",month:"DD. MMMM YYYY"},p="cadetblue",{bar:f}=t.toRefs(i),l=G(),c=t.ref("0px"),g=t.ref("0px");t.watch(()=>i.bar,async()=>{var y;await t.nextTick();const v=((y=f==null?void 0:f.value)==null?void 0:y.ganttBarConfig.id)||"";if(!v)return;const k=document.getElementById(v),{top:h,left:B}=(k==null?void 0:k.getBoundingClientRect())||{top:0,left:0},{rowHeight:_}=l,b=Math.max(B,10);c.value=`${h+_.value-10}px`,g.value=`${b}px`},{deep:!0,immediate:!0});const u=t.computed(()=>{var v,k;return((k=(v=f==null?void 0:f.value)==null?void 0:v.ganttBarConfig.style)==null?void 0:k.background)||p}),{toDayjs:n}=H(),{precision:a,font:s}=l,m=t.computed(()=>{const v=o[a.value];if(!(f!=null&&f.value))return"";const k=n(f.value,"start").format(v),h=n(f.value,"end").format(v);return`${k} \u2013 ${h}`});return(v,k)=>(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.createVNode(t.Transition,{name:"g-fade",mode:"out-in"},{default:t.withCtx(()=>[e.modelValue?(t.openBlock(),t.createElementBlock("div",{key:0,class:"g-gantt-tooltip",style:t.normalizeStyle({top:c.value,left:g.value,fontFamily:t.unref(s)})},[t.createElementVNode("div",{class:"g-gantt-tooltip-color-dot",style:t.normalizeStyle({background:t.unref(u)})},null,4),t.renderSlot(v.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(t.unref(m)),1)])],4)):t.createCommentVNode("",!0)]),_:3})]))}}),me="",gt={default:{primary:"#eeeeee",secondary:"#E0E0E0",ternary:"#F5F5F5",quartenary:"#ededed",hoverHighlight:"rgba(204, 216, 219, 0.5)",text:"#404040",background:"white"},creamy:{primary:"#ffe8d9",secondary:"#fcdcc5",ternary:"#fff6f0",quartenary:"#f7ece6",hoverHighlight:"rgba(230, 221, 202, 0.5)",text:"#542d05",background:"white"},crimson:{primary:"#a82039",secondary:"#c41238",ternary:"#db4f56",quartenary:"#ce5f64",hoverHighlight:"rgba(196, 141, 141, 0.5)",text:"white",background:"white"},dark:{primary:"#404040",secondary:"#303030",ternary:"#353535",quartenary:"#383838",hoverHighlight:"rgba(159, 160, 161, 0.5)",text:"white",background:"#525252",toast:"#1f1f1f"},flare:{primary:"#e08a38",secondary:"#e67912",ternary:"#5e5145",quartenary:"#665648",hoverHighlight:"rgba(196, 141, 141, 0.5)",text:"white",background:"white"},fuchsia:{primary:"#de1d5a",secondary:"#b50b41",ternary:"#ff7da6",quartenary:"#f2799f",hoverHighlight:"rgba(196, 141, 141, 0.5)",text:"white",background:"white"},grove:{primary:"#3d9960",secondary:"#288542",ternary:"#72b585",quartenary:"#65a577",hoverHighlight:"rgba(160, 219, 171, 0.5)",text:"white",background:"white"},"material-blue":{primary:"#0D47A1",secondary:"#1565C0",ternary:"#42a5f5",quartenary:"#409fed",hoverHighlight:"rgba(110, 165, 196, 0.5)",text:"white",background:"white"},sky:{primary:"#b5e3ff",secondary:"#a1d6f7",ternary:"#d6f7ff",quartenary:"#d0edf4",hoverHighlight:"rgba(193, 202, 214, 0.5)",text:"#022c47",background:"white"},slumber:{primary:"#2a2f42",secondary:"#2f3447",ternary:"#35394d",quartenary:"#2c3044",hoverHighlight:"rgba(179, 162, 127, 0.5)",text:"#ffe0b3",background:"#38383b",toast:"#1f1f1f"},vue:{primary:"#258a5d",secondary:"#41B883",ternary:"#35495E",quartenary:"#2a3d51",hoverHighlight:"rgba(160, 219, 171, 0.5)",text:"white",background:"white"}};var pt;const P=typeof window<"u";P&&((pt=window==null?void 0:window.navigator)==null?void 0:pt.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Nt(e){return typeof e=="function"?e():t.unref(e)}function At(e){return e}function Ht(e){return t.getCurrentScope()?(t.onScopeDispose(e),!0):!1}function Pt(e,i=!0){t.getCurrentInstance()?t.onMounted(e):i?e():t.nextTick(e)}function mt(e){var i;const o=Nt(e);return(i=o==null?void 0:o.$el)!=null?i:o}const Vt=P?window:void 0;P&&window.document,P&&window.navigator,P&&window.location;function Ft(e,i=!1){const o=t.ref(),p=()=>o.value=Boolean(e());return p(),Pt(p,i),o}const W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K="__vueuse_ssr_handlers__";W[K]=W[K]||{},W[K];var ht=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,zt=Object.prototype.propertyIsEnumerable,qt=(e,i)=>{var o={};for(var p in e)Ut.call(e,p)&&i.indexOf(p)<0&&(o[p]=e[p]);if(e!=null&&ht)for(var p of ht(e))i.indexOf(p)<0&&zt.call(e,p)&&(o[p]=e[p]);return o};function Wt(e,i,o={}){const p=o,{window:f=Vt}=p,l=qt(p,["window"]);let c;const g=Ft(()=>f&&"ResizeObserver"in f),u=()=>{c&&(c.disconnect(),c=void 0)},n=t.watch(()=>mt(e),s=>{u(),g.value&&f&&s&&(c=new ResizeObserver(i),c.observe(s,l))},{immediate:!0,flush:"post"}),a=()=>{u(),n()};return Ht(a),{isSupported:g,stop:a}}function Kt(e,i={width:0,height:0},o={}){const p=t.ref(i.width),f=t.ref(i.height);return Wt(e,([l])=>{p.value=l.contentRect.width,f.value=l.contentRect.height},o),t.watch(()=>mt(e),l=>{p.value=l?i.width:0,f.value=l?i.height:0}),{width:p,height:f}}var yt;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(yt||(yt={}));var Qt=Object.defineProperty,bt=Object.getOwnPropertySymbols,Xt=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable,wt=(e,i,o)=>i in e?Qt(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o,Jt=(e,i)=>{for(var o in i||(i={}))Xt.call(i,o)&&wt(e,o,i[o]);if(bt)for(var o of bt(i))Zt.call(i,o)&&wt(e,o,i[o]);return e};Jt({linear:At},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const te={class:"g-gantt-rows-container"},Bt=t.defineComponent({__name:"GGanttChart",props:{chartStart:null,chartEnd:null,precision:{default:"day"},barStart:null,barEnd:null,dateFormat:{default:"YYYY-MM-DD HH:mm"},width:{default:"100%"},hideTimeaxis:{type:Boolean,default:!1},colorScheme:{default:"default"},grid:{type:Boolean,default:!1},pushOnOverlap:{type:Boolean,default:!1},noOverlap:{type:Boolean,default:!1},rowHeight:{default:40},highlightedUnits:{default:()=>[]},font:{default:"inherit"}},emits:["click-bar","mousedown-bar","mouseup-bar","dblclick-bar","mouseenter-bar","mouseleave-bar","dragstart-bar","drag-bar","dragend-bar","contextmenu-bar"],setup(e,{emit:i}){const o=e,{width:p,font:f,colorScheme:l}=t.toRefs(o),c=t.useSlots(),g=t.computed(()=>typeof l.value!="string"?l.value:gt[l.value]||gt.default),u=()=>{var r;const b=(r=c.default)==null?void 0:r.call(c),y=[];return b&&b.forEach(d=>{var w;if((w=d.props)!=null&&w.bars){const x=d.props.bars;y.push(x)}else Array.isArray(d.children)&&d.children.forEach(x=>{var O;const E=x;if((O=E==null?void 0:E.props)!=null&&O.bars){const C=E.props.bars;y.push(C)}})}),y},n=t.ref(!1),a=t.ref(!1),s=t.ref(void 0);let m;const v=b=>{m&&clearTimeout(m),m=setTimeout(()=>{n.value=!0},800),s.value=b},k=()=>{clearTimeout(m),n.value=!1},h=(b,y,r,d)=>{switch(b.type){case"click":i("click-bar",{bar:y,e:b,datetime:r});break;case"mousedown":i("mousedown-bar",{bar:y,e:b,datetime:r});break;case"mouseup":i("mouseup-bar",{bar:y,e:b,datetime:r});break;case"dblclick":i("dblclick-bar",{bar:y,e:b,datetime:r});break;case"mouseenter":v(y),i("mouseenter-bar",{bar:y,e:b});break;case"mouseleave":k(),i("mouseleave-bar",{bar:y,e:b});break;case"dragstart":a.value=!0,i("dragstart-bar",{bar:y,e:b});break;case"drag":i("drag-bar",{bar:y,e:b});break;case"dragend":a.value=!1,i("dragend-bar",{bar:y,e:b,movedBars:d});break;case"contextmenu":i("contextmenu-bar",{bar:y,e:b,datetime:r});break}},B=t.ref(null),_=Kt(B);return t.provide(lt,u),t.provide(ct,{...t.toRefs(o),colors:g,chartSize:_}),t.provide(dt,h),(b,y)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"ganttChart",ref:B,class:"g-gantt-chart",style:t.normalizeStyle({width:t.unref(p),background:t.unref(g).background,fontFamily:t.unref(f)})},[e.hideTimeaxis?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(Rt,{key:0},{"upper-timeunit":t.withCtx(({label:r,value:d,date:w})=>[t.renderSlot(b.$slots,"upper-timeunit",{label:r,value:d,date:w})]),timeunit:t.withCtx(({label:r,value:d,date:w})=>[t.renderSlot(b.$slots,"timeunit",{label:r,value:d,date:w})]),_:3})),e.grid?(t.openBlock(),t.createBlock(Yt,{key:1,"highlighted-units":e.highlightedUnits},null,8,["highlighted-units"])):t.createCommentVNode("",!0),t.createElementVNode("div",te,[t.renderSlot(b.$slots,"default")]),t.createVNode(jt,{"model-value":n.value||a.value,bar:s.value},{default:t.withCtx(()=>[t.renderSlot(b.$slots,"bar-tooltip",{bar:s.value})]),_:3},8,["model-value","bar"])],4))}}),ye="";function Q(e=G()){const{dateFormat:i,chartSize:o}=e,{chartStartDayjs:p,chartEndDayjs:f,toDayjs:l}=H(e),c=t.computed(()=>f.value.diff(p.value,"minutes"));return{mapTimeToPosition:n=>{const a=o.width.value||0,s=l(n).diff(p.value,"minutes",!0);return Math.ceil(s/c.value*a)},mapPositionToTime:n=>{const a=o.width.value||0,s=n/a*c.value;return p.value.add(s,"minutes").format(i.value)}}}function vt(e,i=()=>null,o=()=>null,p=G()){const{barStart:f,barEnd:l,pushOnOverlap:c}=p,g=t.ref(!1);let u=0,n;const{mapPositionToTime:a}=Q(p),{toDayjs:s}=H(p),m=y=>{const r=document.getElementById(e.ganttBarConfig.id);if(!r)return;switch(u=y.clientX-(r.getBoundingClientRect().left||0),y.target.className){case"g-gantt-bar-handle-left":document.body.style.cursor="ew-resize",n=h;break;case"g-gantt-bar-handle-right":document.body.style.cursor="ew-resize",n=B;break;default:n=k}g.value=!0,window.addEventListener("mousemove",n),window.addEventListener("mouseup",b)},v=()=>{var d;const y=document.getElementById(e.ganttBarConfig.id),r=(d=y==null?void 0:y.closest(".g-gantt-row-bars-container"))==null?void 0:d.getBoundingClientRect();return{barElement:y,barContainer:r}},k=y=>{const{barElement:r,barContainer:d}=v();if(!r||!d)return;const w=r.getBoundingClientRect().width,x=y.clientX-d.left-u,E=x+w;_(x,E)||(e[f.value]=a(x),e[l.value]=a(E),i(y,e))},h=y=>{const{barElement:r,barContainer:d}=v();if(!r||!d)return;const w=y.clientX-d.left,x=a(w);s(x).isSameOrAfter(s(e,"end"))||(e[f.value]=x,i(y,e))},B=y=>{const{barElement:r,barContainer:d}=v();if(!r||!d)return;const w=y.clientX-d.left,x=a(w);s(x).isSameOrBefore(s(e,"start"))||(e[l.value]=x,i(y,e))},_=(y,r)=>{if(!c.value)return!1;const d=e.ganttBarConfig.dragLimitLeft,w=e.ganttBarConfig.dragLimitRight;return y&&d!=null&&y<d||r&&w!=null&&r>w},b=y=>{g.value=!1,document.body.style.cursor="",window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",b),o(y,e)};return{isDragging:g,initDrag:m}}function xt(){const e=t.inject(lt);if(!e)throw Error("Failed to inject getChartRows!");return e}function Et(){const e=t.inject(dt);if(!e)throw Error("Failed to inject emitBarEvent!");return e}function ee(){const e=G(),i=xt(),o=Et(),{pushOnOverlap:p,barStart:f,barEnd:l,noOverlap:c,dateFormat:g}=e,u=new Map,{toDayjs:n}=H(),a=(r,d)=>{const{initDrag:w}=vt(r,m,_,e);o({...d,type:"dragstart"},r),w(d),b(r)},s=(r,d)=>{const w=r.ganttBarConfig.bundle;w!=null&&(i().forEach(x=>{x.forEach(E=>{if(E.ganttBarConfig.bundle===w){const O=E===r?_:()=>null,{initDrag:C}=vt(E,m,O,e);C(d),b(E)}})}),o({...d,type:"dragstart"},r))},m=(r,d)=>{o({...r,type:"drag"},d),v(d)},v=r=>{if(!(p!=null&&p.value))return;let d=r,{overlapBar:w,overlapType:x}=k(d);for(;w;){b(w);const E=n(d[f.value]),O=n(d[l.value]),C=n(w[f.value]),D=n(w[l.value]);let S;switch(x){case"left":S=D.diff(E,"minutes",!0),w[l.value]=E.format(g.value),w[f.value]=C.subtract(S,"minutes").format(g.value);break;case"right":S=O.diff(C,"minutes",!0),w[f.value]=O.format(g.value),w[l.value]=D.add(S,"minutes").format(g.value);break;default:console.warn("Vue-Ganttastic: One bar is inside of the other one! This should never occur while push-on-overlap is active!");return}w&&(x==="left"||x==="right")&&h(w,S,x),d=w,{overlapBar:w,overlapType:x}=k(w)}},k=r=>{let d,w,x;const E=i().find(T=>T.includes(r))||[],O=n(r[f.value]),C=n(r[l.value]);return{overlapBar:E.find(T=>{if(T===r)return!1;const L=n(T[f.value]),$=n(T[l.value]);return d=O.isBetween(L,$),w=C.isBetween(L,$),x=L.isBetween(O,C)||$.isBetween(O,C),d||w||x}),overlapType:d?"left":w?"right":x?"between":null}},h=(r,d,w)=>{b(r),r.ganttBarConfig.bundle&&i().forEach(x=>{x.forEach(E=>{E.ganttBarConfig.bundle===r.ganttBarConfig.bundle&&E!==r&&(b(E),B(E,d,w))})})},B=(r,d,w)=>{switch(w){case"left":r[f.value]=n(r,"start").subtract(d,"minutes").format(g.value),r[l.value]=n(r,"end").subtract(d,"minutes").format(g.value);break;case"right":r[f.value]=n(r,"start").add(d,"minutes").format(g.value),r[l.value]=n(r,"end").add(d,"minutes").format(g.value)}v(r)},_=(r,d)=>{y();const w={...r,type:"dragend"};o(w,d,void 0,new Map(u)),u.clear()},b=r=>{if(!u.has(r)){const d=r[f.value],w=r[l.value];u.set(r,{oldStart:d,oldEnd:w})}},y=()=>{if(p.value||!c.value)return;let r=!1;u.forEach((d,w)=>{const{overlapBar:x}=k(w);x!=null&&(r=!0)}),r&&u.forEach(({oldStart:d,oldEnd:w},x)=>{x[f.value]=d,x[l.value]=w})};return{initDragOfBar:a,initDragOfBundle:s}}function ne(){const{pushOnOverlap:e}=G(),i=xt(),o=c=>{const g=[];return c!=null&&i().forEach(u=>{u.forEach(n=>{n.ganttBarConfig.bundle===c&&g.push(n)})}),g},p=c=>{if(!e.value||c.ganttBarConfig.pushOnOverlap===!1)return;for(const u of["left","right"]){const n=u,{gapDistanceSoFar:a,bundleBarsAndGapDist:s}=f(c,0,n);let m=a;const v=s;if(!v)continue;for(let h=0;h<v.length;h++){const B=v[h].bar,_=v[h].gapDistance;o(B.ganttBarConfig.bundle).filter(y=>y!==B).forEach(y=>{const r=f(y,_,n),d=r.gapDistanceSoFar,w=r.bundleBarsAndGapDist;d!=null&&(!m||d<m)&&(m=d),w.forEach(x=>{v.find(E=>E.bar===x.bar)||v.push(x)})})}const k=document.getElementById(c.ganttBarConfig.id);m!=null&&n==="left"?c.ganttBarConfig.dragLimitLeft=k.offsetLeft-m:m!=null&&n==="right"&&(c.ganttBarConfig.dragLimitRight=k.offsetLeft+k.offsetWidth+m)}o(c.ganttBarConfig.bundle).forEach(u=>{u.ganttBarConfig.dragLimitLeft=c.ganttBarConfig.dragLimitLeft,u.ganttBarConfig.dragLimitRight=c.ganttBarConfig.dragLimitRight})},f=(c,g=0,u)=>{const n=c.ganttBarConfig.bundle?[{bar:c,gapDistance:g}]:[];let a=c,s=l(a,u);if(u==="left")for(;s;){const m=document.getElementById(a.ganttBarConfig.id),v=document.getElementById(s.ganttBarConfig.id),k=v.offsetLeft+v.offsetWidth;if(g+=m.offsetLeft-k,s.ganttBarConfig.immobile)return{gapDistanceSoFar:g,bundleBarsAndGapDist:n};s.ganttBarConfig.bundle&&n.push({bar:s,gapDistance:g}),a=s,s=l(s,"left")}if(u==="right")for(;s;){const m=document.getElementById(a.ganttBarConfig.id),v=document.getElementById(s.ganttBarConfig.id),k=m.offsetLeft+m.offsetWidth;if(g+=v.offsetLeft-k,s.ganttBarConfig.immobile)return{gapDistanceSoFar:g,bundleBarsAndGapDist:n};s.ganttBarConfig.bundle&&n.push({bar:s,gapDistance:g}),a=s,s=l(s,"right")}return{gapDistanceSoFar:null,bundleBarsAndGapDist:n}},l=(c,g)=>{const u=document.getElementById(c.ganttBarConfig.id),n=i().find(s=>s.includes(c))||[];let a=[];return g==="left"?a=n.filter(s=>{const m=document.getElementById(s.ganttBarConfig.id);return m&&m.offsetLeft<u.offsetLeft&&s.ganttBarConfig.pushOnOverlap!==!1}):a=n.filter(s=>{const m=document.getElementById(s.ganttBarConfig.id);return m&&m.offsetLeft>u.offsetLeft&&s.ganttBarConfig.pushOnOverlap!==!1}),a.length>0?a.reduce((s,m)=>{const v=document.getElementById(s.ganttBarConfig.id),k=document.getElementById(m.ganttBarConfig.id),h=Math.abs(v.offsetLeft-u.offsetLeft),B=Math.abs(k.offsetLeft-u.offsetLeft);return h<B?s:m},a[0]):null};return{setDragLimitsOfGanttBar:p}}const re=["id"],oe={class:"g-gantt-bar-label"},ae=t.createElementVNode("div",{class:"g-gantt-bar-handle-left"},null,-1),ie=t.createElementVNode("div",{class:"g-gantt-bar-handle-right"},null,-1),se=t.defineComponent({__name:"GGanttBar",props:{bar:null},setup(e){const i=e,o=Et(),p=G(),{rowHeight:f}=p,{bar:l}=t.toRefs(i),{mapTimeToPosition:c,mapPositionToTime:g}=Q(),{initDragOfBar:u,initDragOfBundle:n}=ee(),{setDragLimitsOfGanttBar:a}=ne(),s=t.ref(!1),m=t.computed(()=>l.value.ganttBarConfig);function v(C){m.value.bundle!=null?n(l.value,C):u(l.value,C),s.value=!0}const k=()=>{a(l.value),!m.value.immobile&&(window.addEventListener("mousemove",v,{once:!0}),window.addEventListener("mouseup",()=>{window.removeEventListener("mousemove",v),s.value=!1},{once:!0}))},h=t.inject(ft),B=C=>{var T;C.preventDefault(),C.type==="mousedown"&&k();const D=(T=h==null?void 0:h.value)==null?void 0:T.getBoundingClientRect();let S;D&&(S=g(C.clientX-D.left)),o(C,l.value,S)},{barStart:_,barEnd:b,width:y,chartStart:r,chartEnd:d,chartSize:w}=p,x=t.ref(0),E=t.ref(0);t.onMounted(()=>{t.watch([l,y,r,d,w.width],()=>{x.value=c(l.value[_.value]),E.value=c(l.value[b.value])},{deep:!0,immediate:!0})});const O=t.computed(()=>({...m.value.style,position:"absolute",top:`${f.value*.1}px`,left:`${x.value}px`,width:`${E.value-x.value}px`,height:`${f.value*.8}px`,zIndex:s.value?3:2}));return(C,D)=>(t.openBlock(),t.createElementBlock("div",{id:t.unref(m).id,class:"g-gantt-bar",style:t.normalizeStyle(t.unref(O)),onMousedown:B,onClick:B,onDblclick:B,onMouseenter:B,onMouseleave:B,onContextmenu:B},[t.createElementVNode("div",oe,[t.renderSlot(C.$slots,"default",{bar:t.unref(l)},()=>[t.createElementVNode("div",null,t.toDisplayString(t.unref(m).label||""),1)])]),t.unref(m).hasHandles?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[ae,ie],64)):t.createCommentVNode("",!0)],44,re))}}),be="",_t=t.defineComponent({__name:"GGanttRow",props:{label:null,bars:null,highlightOnHover:{type:Boolean}},emits:["drop"],setup(e,{emit:i}){const o=e,{rowHeight:p,colors:f}=G(),{highlightOnHover:l}=t.toRefs(o),c=t.ref(!1),g=t.computed(()=>({height:`${p.value}px`,background:(l==null?void 0:l.value)&&c.value?f.value.hoverHighlight:null})),{mapPositionToTime:u}=Q(),n=t.ref(null);t.provide(ft,n);const a=s=>{var h;const m=(h=n.value)==null?void 0:h.getBoundingClientRect();if(!m){console.error("Vue-Ganttastic: failed to find bar container element for row.");return}const v=s.clientX-m.left,k=u(v);i("drop",{e:s,datetime:k})};return(s,m)=>(t.openBlock(),t.createElementBlock("div",{class:"g-gantt-row",style:t.normalizeStyle(t.unref(g)),onDragover:m[0]||(m[0]=t.withModifiers(v=>c.value=!0,["prevent"])),onDragleave:m[1]||(m[1]=v=>c.value=!1),onDrop:m[2]||(m[2]=v=>a(v)),onMouseover:m[3]||(m[3]=v=>c.value=!0),onMouseleave:m[4]||(m[4]=v=>c.value=!1)},[t.createElementVNode("div",{class:"g-gantt-row-label",style:t.normalizeStyle({background:t.unref(f).primary,color:t.unref(f).text})},[t.renderSlot(s.$slots,"label",{},()=>[t.createTextVNode(t.toDisplayString(e.label),1)])],4),t.createElementVNode("div",t.mergeProps({ref_key:"barContainer",ref:n,class:"g-gantt-row-bars-container"},s.$attrs),[t.createVNode(t.TransitionGroup,{name:"bar-transition",tag:"div"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.bars,v=>(t.openBlock(),t.createBlock(se,{key:v.ganttBarConfig.id,bar:v},{default:t.withCtx(()=>[t.renderSlot(s.$slots,"bar-label",{bar:v})]),_:2},1032,["bar"]))),128))]),_:3})],16)],36))}}),we="";function kt(){j.default.extend(St),j.default.extend(Dt),j.default.extend(Tt),j.default.extend(Mt)}const Ct={install(e,i){kt(),e.component("GGanttChart",Bt),e.component("GGanttRow",_t)}};M.GGanttChart=Bt,M.GGanttRow=_t,M.default=Ct,M.extendDayjs=kt,M.ganttastic=Ct,Object.defineProperties(M,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});function injectStyle(M,I="top"){if(!M||typeof document>"u")return;const t=document.head,V=document.createElement("style");I==="top"&&t.firstChild?t.insertBefore(V,t.firstChild):t.appendChild(V),V.appendChild(document.createTextNode(M))}injectStyle(`
.g-gantt-chart {
  position: relative;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
  border-radius: 5px;
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
}
.g-gantt-rows-container {
  position: relative;
}
`,"top");injectStyle(`
.g-gantt-row {
  width: 100%;
  transition: background 0.4s;
  position: relative;
}
.g-gantt-row > .g-gantt-row-bars-container {
  position: relative;
  border-top: 1px solid #eaeaea;
  width: 100%;
  border-bottom: 1px solid #eaeaea;
}
.g-gantt-row-label {
  position: absolute;
  top: 0;
  left: 0px;
  padding: 0px 8px;
  display: flex;
  align-items: center;
  height: 60%;
  min-height: 20px;
  font-size: 0.8em;
  font-weight: bold;
  border-bottom-right-radius: 6px;
  background: #f2f2f2;
  z-index: 3;
  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.6);
}
.bar-transition-leave-active,
.bar-transition-enter-active {
  transition: all 0.2s;
}
.bar-transition-enter-from,
.bar-transition-leave-to {
  transform: scale(0.8);
  opacity: 0;
}
`,"top");injectStyle(`
.g-grid-container {
  position: absolute;
  top: 0;
  left: 0%;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: space-between;
}
.g-grid-line {
  width: 1px;
  height: 100%;
  border-left: 1px solid #eaeaea;
}
`,"top");injectStyle(`
.g-timeaxis {
  position: sticky;
  top: 0;
  width: 100%;
  height: 8vh;
  min-height: 75px;
  background: white;
  z-index: 4;
  box-shadow: 0px 1px 3px 2px rgba(50, 50, 50, 0.5);
  display: flex;
  flex-direction: column;
}
.g-timeunits-container {
  display: flex;
  width: 100%;
  height: 50%;
}
.g-timeunit {
  height: 100%;
  font-size: 65%;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.g-upper-timeunit {
  display: flex;
  height: 100%;
  justify-content: center;
  align-items: center;
}
.g-timeaxis-hour-pin {
  width: 1px;
  height: 10px;
}
`,"top");injectStyle(`
.g-gantt-tooltip {
  position: fixed;
  background: black;
  color: white;
  z-index: 4;
  font-size: 0.85em;
  padding: 5px;
  border-radius: 3px;
  transition: opacity 0.2s;
  display: flex;
  align-items: center;
  font-feature-settings: "tnum";
  font-variant-numeric: tabular-nums;
}
.g-gantt-tooltip:before {
  content: "";
  position: absolute;
  top: 0;
  left: 10%;
  width: 0;
  height: 0;
  border: 10px solid transparent;
  border-bottom-color: black;
  border-top: 0;
  margin-left: -5px;
  margin-top: -5px;
}
.g-gantt-tooltip-color-dot {
  width: 8px;
  height: 8px;
  border-radius: 100%;
  margin-right: 4px;
}
.g-fade-enter-active,
.g-fade-leave-active {
  transition: opacity 0.3s ease;
}
.g-fade-enter-from,
.g-fade-leave-to {
  opacity: 0;
}
`,"top");injectStyle(`
.g-gantt-bar {
  display: flex;
  justify-content: center;
  align-items: center;
  background: cadetblue;
  overflow: hidden;
}
.g-gantt-bar-label {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  padding: 0 14px 0 14px; /* 14px is the width of the handle */
  display: flex;
  justify-content: center;
  align-items: center;
}
.g-gantt-bar-label > * {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.g-gantt-bar-handle-left,
.g-gantt-bar-handle-right {
  position: absolute;
  width: 10px;
  height: 100%;
  background: white;
  opacity: 0.7;
  border-radius: 0px;
  cursor: ew-resize;
  top: 0;
}
.g-gantt-bar-handle-left {
  left: 0;
}
.g-gantt-bar-handle-right {
  right: 0;
}
.g-gantt-bar-label img {
  pointer-events: none;
}
`,"top");
