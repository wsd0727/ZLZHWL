"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_dom=require("../../tools/dom"),_utils=require("../../tools/utils"),_log=require("../../tools/log"),_resize=require("../../tools/resize"),_event=require("../../tools/event"),_size=require("../../hooks/size"),_vXETable=require("../../v-x-e-table"),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_cell=_interopRequireDefault(require("./cell")),_body=_interopRequireDefault(require("./body")),_header=_interopRequireDefault(require("../../header")),_footer=_interopRequireDefault(require("../../footer")),_props=_interopRequireDefault(require("./props")),_emits=_interopRequireDefault(require("./emits")),_index=_interopRequireDefault(require("../../loading/index")),_util=require("./util"),_vn=require("../../tools/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},__spreadArray=function(e,t,n){if(n||2===arguments.length)for(var r,l=0,o=t.length;l<o;l++)!r&&l in t||((r=r||Array.prototype.slice.call(t,0,l))[l]=t[l]);return e.concat(r||Array.prototype.slice.call(t))},isWebkit=_dom.browse["-webkit"]&&!_dom.browse.edge,resizableStorageKey="VXE_TABLE_CUSTOM_COLUMN_WIDTH",visibleStorageKey="VXE_TABLE_CUSTOM_COLUMN_VISIBLE",_default=(0,_vue.defineComponent)({name:"VxeTable",props:_props.default,emits:_emits.default,setup:function(H,e){function h(e,t,n){return e=_xeUtils.default.get(e,n),t=_xeUtils.default.get(t,n),!(!(0,_utils.eqEmptyValue)(e)||!(0,_utils.eqEmptyValue)(t))||(_xeUtils.default.isString(e)||_xeUtils.default.isNumber(e)?""+e==""+t:_xeUtils.default.isEqual(e,t))}function m(e){var t=R.value.orders,e=e.order||null,e=t.indexOf(e)+1;return t[e<t.length?e:0]}function t(e,a,i){var t,u;e&&(t=H.treeConfig,u=P.visibleColumn,_xeUtils.default.isArray(e)||(e=[e]),t&&e.length&&(0,_log.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),e.forEach(function(e){var t,n,r=e.row,l=e.col,o=e.rowspan,e=e.colspan;i&&_xeUtils.default.isNumber(r)&&(r=i[r]),_xeUtils.default.isNumber(l)&&(l=u[l]),(i?r:_xeUtils.default.isNumber(r))&&l&&(o||e)&&(o=_xeUtils.default.toNumber(o)||1,e=_xeUtils.default.toNumber(e)||1,1<o||1<e)&&(t=_xeUtils.default.findIndexOf(a,function(e){return!(e._row!==r&&(0,_util.getRowid)(te,e._row)!==(0,_util.getRowid)(te,r)||e._col.id!==l&&e._col.id!==l.id)}),(t=a[t])?(t.rowspan=o,t.colspan=e,t._rowspan=o,t._colspan=e):(t=i?te.findRowIndexOf(i,r):r,n=W.getVTColumnIndex(l),a.push({row:t,col:n,rowspan:o,colspan:e,_row:r,_col:l,_rowspan:o,_colspan:e})))}))}function n(e,r,l){var t,o,a=[];return e&&(t=H.treeConfig,o=P.visibleColumn,_xeUtils.default.isArray(e)||(e=[e]),t&&e.length&&(0,_log.errLog)("vxe.error.noTree",["merge-cells | merge-footer-items"]),e.forEach(function(e){var t=e.row,n=e.col,e=(l&&_xeUtils.default.isNumber(t)&&(t=l[t]),_xeUtils.default.isNumber(n)&&(n=o[n]),_xeUtils.default.findIndexOf(r,function(e){return!(e._row!==t&&(0,_util.getRowid)(te,e._row)!==(0,_util.getRowid)(te,t)||e._col.id!==n&&e._col.id!==n.id)}));-1<e&&(e=r.splice(e,1),a.push(e[0]))})),a}function i(){P.tableFullColumn.forEach(function(e){e.order=null})}function u(){function a(e,t,n,r,l){var o=e.id,a=e.field,i=e.fixed,u=e.type,c=e.treeNode,t={column:e,colid:o,index:t,items:n,parent:l};a&&("development"===process.env.NODE_ENV&&m[a]&&(0,_log.warnLog)("vxe.error.colRepet",["field",a]),m[a]=t),!g&&i&&(g=i),c?("development"===process.env.NODE_ENV&&s&&(0,_log.warnLog)("vxe.error.colRepet",["tree-node",c]),s=s||e):"expand"===u&&("development"===process.env.NODE_ENV&&d&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),d=d||e),"development"===process.env.NODE_ENV&&("checkbox"===u?(f&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),f=f||e):"radio"===u&&(v&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),v=v||e)),x&&!1===e.showOverflow&&(x=!1),h[o]&&(0,_log.errLog)("vxe.error.colRepet",["colId",o]),h[o]=t}var d,s,f,v,g,e=P.tableFullColumn,t=P.collectColumn,h=P.fullColumnIdData={},m=P.fullColumnFieldData={},n=J.value,r=t.some(_utils.hasChildrenList),x=!!H.showOverflow;r?_xeUtils.default.eachTree(t,function(e,t,n,r,l,o){e.level=o.length,a(e,t,n,0,l)}):e.forEach(a),"development"===process.env.NODE_ENV&&d&&n.area&&(0,_log.errLog)("vxe.error.errConflicts",["mouse-config.area","column.type=expand"]),$.isGroup=r,$.treeNodeColumn=s,$.expandColumn=d,$.isAllOverflow=x}function S(){P.customHeight=xt("height"),P.customMaxHeight=xt("maxHeight")}function r(){var e=z.value,t=j.value,n=K.value,r=t?t.$el:null,l=e?e.$el:null,t=n?n.$el:null;if(r){var o=0,e=r.clientWidth-1,n=e,a=n/100,i=H.fit,u=$.columnStore,c=u.resizeList,d=u.pxMinList,s=u.pxList,f=u.scaleList,v=u.scaleMinList,u=u.autoList;if(d.forEach(function(e){var t=_xeUtils.default.toInteger(e.minWidth);o+=t,e.renderWidth=t}),v.forEach(function(e){var t=Math.floor(_xeUtils.default.toInteger(e.minWidth)*a);o+=t,e.renderWidth=t}),f.forEach(function(e){var t=Math.floor(_xeUtils.default.toInteger(e.width)*a);o+=t,e.renderWidth=t}),s.forEach(function(e){var t=_xeUtils.default.toInteger(e.width);o+=t,e.renderWidth=t}),c.forEach(function(e){var t=_xeUtils.default.toInteger(e.resizeWidth);o+=t,e.renderWidth=t}),a=0<(n-=o)?Math.floor(n/(v.length+d.length+u.length)):0,i?0<n&&v.concat(d).forEach(function(e){o+=a,e.renderWidth+=a}):a=40,u.forEach(function(e){var t=Math.max(a,40);e.renderWidth=t,o+=t}),i){var g=f.concat(v).concat(d).concat(u),h=g.length-1;if(0<h){var m=e-o;if(0<m){for(;0<m&&0<=h;)m--,g[h--].renderWidth++;o=e}}}s=r.offsetHeight,c=r.scrollHeight>r.clientHeight,n=0,i=(c&&(n=Math.max(r.offsetWidth-r.clientWidth,0)),$.scrollbarWidth=n,$.overflowY=c,P.tableWidth=o,P.tableHeight=s,0),f=(l&&(i=l.clientHeight,(0,_vue.nextTick)(function(){l&&r&&l.scrollLeft!==r.scrollLeft&&(l.scrollLeft=r.scrollLeft)})),P.headerHeight=i,!1),v=0,d=0;t?(v=t.offsetHeight,(f=o>t.clientWidth)&&(d=Math.max(v-t.clientHeight,0))):(f=e<o)&&(d=Math.max(s-r.clientHeight,0)),P.footerHeight=v,$.overflowX=f,$.scrollbarHeight=d,S(),$.parentHeight=Math.max(P.headerHeight+v+20,X.getParentHeight()),f&&X.checkScrolling()}}function I(t){var n=t.sortBy,r=t.sortType;return function(e){e=n?_xeUtils.default.isFunction(n)?n({row:e,column:t}):_xeUtils.default.get(e,n):X.getCellLabel(e,t);return r&&"auto"!==r?"number"===r?_xeUtils.default.toNumber(e):"string"===r?_xeUtils.default.toValueString(e):e:isNaN(e)?e:_xeUtils.default.toNumber(e)}}function D(){var e=H.treeConfig,t=P.afterFullData,a=P.fullDataRowIdData,i=P.fullAllDataRowIdData,n=P.afterTreeFullData,r=ee.value;e?_xeUtils.default.eachTree(n,function(e,t,n,r){var l=(0,_util.getRowid)(te,e),o=i[l],r=r.map(function(e,t){return t%2==0?Number(e)+1:"."}).join("");o?(o.seq=r,o._index=t):(i[l]=o={row:e,rowid:l,seq:r,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[l]=o)},{children:r.transform?r.mapChildren:r.children}):t.forEach(function(e,t){var n=(0,_util.getRowid)(te,e),r=i[n],l=t+1;r?(r.seq=l,r._index=t):(i[n]=r={row:e,rowid:n,seq:l,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[n]=r)})}function b(){var o,a,e=H.treeConfig,i=$.treeExpandeds,t=ee.value;return e&&t.transform?(o=[],a=new Map,_xeUtils.default.eachTree(P.afterTreeFullData,function(e,t,n,r,l){(!l||a.has(l)&&-1<te.findRowIndexOf(i,l))&&(a.set(e,1),o.push(e))},{children:t.mapChildren}),P.afterFullData=o,ne(o),o):P.afterFullData}function a(e){return te.triggerValidate?te.triggerValidate(e):(0,_vue.nextTick)()}function k(e,t){a("blur").catch(function(e){return e}).then(function(){te.handleActived(t,e).then(function(){return a("change")}).catch(function(e){return e})})}function x(e,t){var n,r=P.checkboxReserveRowMap;E.value.reserve&&(n=(0,_util.getRowid)(te,e),t?r[n]=e:r[n]&&delete r[n])}function p(r){var l=P.fullAllDataRowIdData;return new Promise(function(e){var t,n=T.value.loadMethod;n?(t=l[(0,_util.getRowid)(te,r)],$.expandLazyLoadeds.push(r),n({$table:te,row:r,rowIndex:W.getRowIndex(r),$rowIndex:W.getVMRowIndex(r)}).then(function(){t.expandLoaded=!0,$.rowExpandeds.push(r)}).catch(function(){t.expandLoaded=!1}).finally(function(){_xeUtils.default.remove($.expandLazyLoadeds,function(e){return te.eqRow(e,r)}),e((0,_vue.nextTick)().then(function(){return W.recalculate()}))})):e()})}function L(e,t){var n,r=P.rowExpandedReserveRowMap;T.value.reserve&&(n=(0,_util.getRowid)(te,e),t?r[n]=e:r[n]&&delete r[n])}function c(){return(0,_vue.nextTick)().then(function(){var e=$.scrollXLoad,t=$.scrollYLoad,n=P.scrollXStore,r=P.scrollYStore,l=_.value,o=qe.value,e=(e?(e=gt().visibleSize,o=o.oSize?_xeUtils.default.toNumber(o.oSize):_dom.browse.edge?5:0,n.offsetSize=o,n.visibleSize=e,n.endIndex=Math.max(n.startIndex+n.visibleSize+o,n.endIndex),X.updateScrollXData()):X.updateScrollXSpace(),ht()),o=e.rowHeight,n=e.visibleSize;r.rowHeight=o,t?(e=l.oSize?_xeUtils.default.toNumber(l.oSize):_dom.browse.edge?10:0,r.offsetSize=e,r.visibleSize=n,r.endIndex=Math.max(r.startIndex+n+e,r.endIndex),X.updateScrollYData()):X.updateScrollYSpace(),$.rowHeight=o,(0,_vue.nextTick)(w)})}function U(e){var t=H.keepSource,n=H.treeConfig,r=$.editStore,g=$.scrollYLoad,h=P.scrollYStore,l=P.scrollXStore,m=P.lastScrollLeft,x=P.lastScrollTop,o=ee.value,a=o.transform,i=[],u=e?e.slice(0):[],p=(n&&(a?("development"===process.env.NODE_ENV&&(o.rowField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.rowField"]),o.parentField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.parentField"]),o.children||(0,_log.errLog)("vxe.error.reqProp",["tree-config.children"]),o.mapChildren||(0,_log.errLog)("vxe.error.reqProp",["tree-config.mapChildren"]),o.children===o.mapChildren&&(0,_log.errLog)("vxe.error.errConflicts",["tree-config.children","tree-config.mapChildren"]),u.forEach(function(e){e[o.children]&&e[o.children].length&&(0,_log.warnLog)("vxe.error.errConflicts",["tree-config.transform","row.".concat(o.children)])})),u=(i=_xeUtils.default.toArrayTree(u,{key:o.rowField,parentKey:o.parentField,children:o.children,mapChildren:o.mapChildren})).slice(0)):i=u.slice(0)),h.startIndex=0,h.endIndex=1,l.startIndex=0,l.endIndex=1,r.insertList=[],r.removeList=[],ne(u));return $.scrollYLoad=p,P.tableFullData=u,P.tableFullTreeData=i,X.cacheRowMap(!0),P.tableSynchData=e,t&&(P.tableSourceData=_xeUtils.default.clone(u,!0)),"development"===process.env.NODE_ENV&&p&&(H.height||H.maxHeight||(0,_log.errLog)("vxe.error.reqProp",["table.height | table.max-height | table.scroll-y={enabled: false}"]),H.showOverflow||(0,_log.warnLog)("vxe.error.reqProp",["table.show-overflow"]),H.spanMethod)&&(0,_log.warnLog)("vxe.error.scrollErrProp",["table.span-method"]),te.clearCellAreas&&H.mouseConfig&&(te.clearCellAreas(),te.clearCopyCellArea()),W.clearMergeCells(),W.clearMergeFooterItems(),X.handleTableData(!0),W.updateFooter(),(0,_vue.nextTick)().then(function(){S(),w()}).then(function(){c()}).then(function(){var e,t,n,r,l,o,a,i,u,c,d,s,f,v;return p&&(h.endIndex=h.visibleSize),e=H.treeConfig,t=$.expandColumn,n=$.currentRow,r=$.selectRow,l=$.selection,o=$.rowExpandeds,a=$.treeExpandeds,i=P.fullDataRowIdData,u=P.fullAllDataRowIdData,c=P.radioReserveRow,d=T.value,s=ee.value,f=C.value,v=E.value,r&&!u[(0,_util.getRowid)(te,r)]&&($.selectRow=null),f.reserve&&c&&i[r=(0,_util.getRowid)(te,c)]&&pt(i[r].row,!0),$.selection=ft(l),v.reserve&&y(vt(P.checkboxReserveRowMap),!0,!0),n&&!u[(0,_util.getRowid)(te,n)]&&($.currentRow=null),$.rowExpandeds=t?ft(o):[],t&&d.reserve&&W.setRowExpand(vt(P.rowExpandedReserveRowMap),!0),$.treeExpandeds=e?ft(a):[],e&&s.reserve&&W.setTreeExpand(vt(P.treeExpandedReserveRowMap),!0),X.checkSelectionStatus(),new Promise(function(l){(0,_vue.nextTick)().then(function(){return W.recalculate()}).then(function(){var e=m,t=x,n=qe.value,r=_.value;n.scrollToLeftOnChange&&(e=0),r.scrollToTopOnChange&&(t=0),g===p?(0,_util.restoreScrollLocation)(te,e,t).then(l):setTimeout(function(){return(0,_util.restoreScrollLocation)(te,e,t).then(l)})})})})}function O(){var t,n,e,r,l,o,a,i,u,c,d,s,f,v;H.checkboxConfig&&(t=P.fullDataRowIdData,r=(e=E.value).checkAll,e=e.checkRowKeys,r?_t(!0,!0):e&&(n=[],e.forEach(function(e){t[e]&&n.push(t[e].row)}),y(n,!0,!0))),H.radioConfig&&(r=P.fullDataRowIdData,o=(e=C.value).checkRowKey,e=e.reserve,o)&&(r[o]&&pt(r[o].row,!0),e)&&(r=(0,_util.getRowkey)(te),P.radioReserveRow=((e={})[r]=o,e)),H.expandConfig&&(l=P.fullDataRowIdData,c=(o=T.value).expandAll,o=o.expandRowKeys,c?W.setAllRowExpand(!0):o&&(a=[],o.forEach(function(e){l[e]&&a.push(l[e].row)}),W.setRowExpand(a,!0))),H.treeConfig&&(i=P.tableFullData,c=(u=ee.value).expandAll,f=u.expandRowKeys,c?W.setAllTreeExpand(!0):f&&(d=[],s=(0,_util.getRowkey)(te),f.forEach(function(t){var e=_xeUtils.default.findTree(i,function(e){return t===_xeUtils.default.get(e,s)},u);e&&d.push(e.item)}),W.setTreeExpand(d,!0))),(f=H.mergeCells)&&W.setMergeCells(f),(v=H.mergeFooterItems)&&W.setMergeFooterItems(v),(0,_vue.nextTick)(function(){return setTimeout(function(){return W.recalculate()})})}function F(){var e,t,n;(n=H.sortConfig)&&(t=(e=R.value).defaultSort)&&(t=_xeUtils.default.isArray(t)?t:[t]).length&&((n.multiple?t:t.slice(0,1)).forEach(function(e,t){var n=e.field,e=e.order;n&&e&&(n=W.getColumnByField(n))&&n.sortable&&(n.order=e,n.sortTime=Date.now()+t)}),e.remote||X.handleTableData(!0).then(w))}function M(){var e=$.mergeList,t=$.mergeFooterList,n=P.scrollXStore,r=n.startIndex,l=n.endIndex,o=n.offsetSize,a=(i=gt()).toVisibleIndex,i=i.visibleSize,o={startIndex:Math.max(0,a-1-o),endIndex:a+i+o},e=(mt(e.concat(t),o,"col"),o.startIndex),t=o.endIndex;!(a<=r||l-i-1<=a)||r===e&&l===t||(n.startIndex=e,n.endIndex=t,X.updateScrollXData()),W.closeTooltip()}function A(){var t,n,r,a=[],i=[],u=[],e=$.isGroup,l=$.columnStore,o=qe.value,c=P.collectColumn,d=P.tableFullColumn,s=P.scrollXStore,f=P.fullColumnIdData,v=(e?(t=[],n=[],r=[],_xeUtils.default.eachTree(c,function(e,t,n,r,l){var o=(0,_utils.hasChildrenList)(e);l&&l.fixed&&(e.fixed=l.fixed),l&&e.fixed!==l.fixed&&(0,_log.errLog)("vxe.error.groupFixed"),o?e.visible=!!_xeUtils.default.findTree(e.children,function(e){return!(0,_utils.hasChildrenList)(e)&&e.visible}):e.visible&&("left"===e.fixed?a:"right"===e.fixed?u:i).push(e)}),c.forEach(function(e){e.visible&&("left"===e.fixed?t:"right"===e.fixed?r:n).push(e)}),$.tableGroupColumn=t.concat(n).concat(r)):d.forEach(function(e){e.visible&&("left"===e.fixed?a:"right"===e.fixed?u:i).push(e)}),a.concat(i).concat(u)),e=!!o.enabled&&-1<o.gt&&(0===o.gt||o.gt<d.length);return $.hasFixedColumn=0<a.length||0<u.length,Object.assign(l,{leftList:a,centerList:i,rightList:u}),e&&("development"===process.env.NODE_ENV&&(H.showHeader&&!H.showHeaderOverflow&&(0,_log.warnLog)("vxe.error.reqProp",["show-header-overflow"]),H.showFooter&&!H.showFooterOverflow&&(0,_log.warnLog)("vxe.error.reqProp",["show-footer-overflow"]),H.spanMethod&&(0,_log.warnLog)("vxe.error.scrollErrProp",["span-method"]),H.footerSpanMethod)&&(0,_log.warnLog)("vxe.error.scrollErrProp",["footer-span-method"]),c=gt().visibleSize,s.startIndex=0,s.endIndex=c,s.visibleSize=c),v.length===P.visibleColumn.length&&P.visibleColumn.every(function(e,t){return e===v[t]})||(W.clearMergeCells(),W.clearMergeFooterItems()),$.scrollXLoad=e,v.forEach(function(e,t){e=e.id,e=f[e];e&&(e._index=t)}),P.visibleColumn=v,Ct(),W.updateFooter().then(function(){return W.recalculate()}).then(function(){return W.updateCellAreas(),W.recalculate()})}function o(e){P.collectColumn=e;var n,r,t,l,o,a,i=Et(e);return P.tableFullColumn=i,u(),i=H.id,t=H.customConfig,l=P.collectColumn,o=v.value.storage,a=!0===o||o&&o.resizable,o=!0===o||o&&o.visible,t&&(a||o)&&(n={},i?(a&&(t=st(resizableStorageKey)[i])&&_xeUtils.default.each(t,function(e,t){n[t]={field:t,resizeWidth:e}}),o&&(a=st(visibleStorageKey)[i])&&(o=(t=a.split("|"))[0]?t[0].split(","):[],i=t[1]?t[1].split(","):[],o.forEach(function(e){n[e]?n[e].visible=!1:n[e]={field:e,visible:!1}}),i.forEach(function(e){n[e]?n[e].visible=!0:n[e]={field:e,visible:!0}})),r={},_xeUtils.default.eachTree(l,function(e){var t=e.getKey();t&&(r[t]=e)}),_xeUtils.default.each(n,function(e,t){var n=e.visible,e=e.resizeWidth,t=r[t];t&&(_xeUtils.default.isNumber(e)&&(t.resizeWidth=e),_xeUtils.default.isBoolean(n))&&(t.visible=n)})):(0,_log.errLog)("vxe.error.reqProp",["id"])),A().then(function(){$.scrollXLoad&&M()}),W.clearMergeCells(),W.clearMergeFooterItems(),X.handleTableData(!0),"development"===process.env.NODE_ENV&&($.scrollXLoad||$.scrollYLoad)&&$.expandColumn&&(0,_log.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),(0,_vue.nextTick)().then(function(){return d&&d.syncUpdate({collectColumn:e,$table:te}),W.recalculate()})}function ne(e){var t=H.treeConfig,n=_.value,t=(ee.value.transform||!t)&&!!n.enabled&&-1<n.gt&&(0===n.gt||n.gt<e.length);return $.scrollYLoad=t}function re(e,t){var n,r=$.treeExpandeds,l=$.treeLazyLoadeds,o=$.treeNodeColumn,a=P.fullAllDataRowIdData,i=P.tableFullData,u=ee.value,c=u.reserve,d=u.lazy,s=u.hasChild,f=u.children,v=u.accordion,g=u.toggleMethod,h=[],m=W.getColumnIndex(o),x=W.getVMColumnIndex(o),p=g?e.filter(function(e){return g({$table:te,expanded:t,column:o,columnIndex:m,$columnIndex:x,row:e})}):e;return v&&(p=p.length?[p[p.length-1]]:[],n=_xeUtils.default.findTree(i,function(e){return e===p[0]},u))&&_xeUtils.default.remove(r,function(e){return-1<n.items.indexOf(e)}),t?p.forEach(function(e){var t;-1===te.findRowIndexOf(r,e)&&(t=a[(0,_util.getRowid)(te,e)],d&&e[s]&&!t.treeLoaded&&-1===te.findRowIndexOf(l,e)?h.push(wt(e)):e[f]&&e[f].length&&r.push(e))}):_xeUtils.default.remove(r,function(e){return-1<te.findRowIndexOf(p,e)}),c&&p.forEach(function(e){return bt(e,t)}),Promise.all(h).then(function(){return W.recalculate()})}function le(e){var t=$.mergeList,n=P.scrollYStore,r=n.startIndex,l=n.endIndex,o=n.visibleSize,a=n.offsetSize,i=n.rowHeight,e=(e.currentTarget||e.target).scrollTop,e=Math.floor(e/i),i={startIndex:Math.max(0,e-1-a),endIndex:e+o+a},a=(mt(t,i,"row"),i.startIndex),t=i.endIndex;!(e<=r||l-o-1<=e)||r===a&&l===t||(n.startIndex=a,n.endIndex=t,X.updateScrollYData())}function oe(n){return function(e){var t=P.fullAllDataRowIdData;if(e){t=t[(0,_util.getRowid)(te,e)];if(t)return t[n]}return-1}}function ae(n){return function(e){var t=P.fullColumnIdData;if(e){t=t[e.id];if(t)return t[n]}return-1}}function ie(n){var e=$.editStore,t=$.ctxMenuStore,r=$.filterStore,l=H.mouseConfig,o=V.value,a=Z.value,i=e.actived,e=ye.value,u=Se.value,c=Ie.value;!u||(0,_dom.getEventTargetNode)(n,o,"vxe-cell--filter").flag||(0,_dom.getEventTargetNode)(n,u.$el).flag||(0,_dom.getEventTargetNode)(n,document.body,"vxe-table--ignore-clear").flag||X.preventEvent(n,"event.clearFilter",r.args,W.closeFilter),i.row?!1===a.autoClear||(u=i.args.cell)&&(0,_dom.getEventTargetNode)(n,u).flag||e&&(0,_dom.getEventTargetNode)(n,e.$el).flag||P._lastCallTime&&!(P._lastCallTime+50<Date.now())||(0,_dom.getEventTargetNode)(n,document.body,"vxe-table--ignore-clear").flag||X.preventEvent(n,"event.clearActived",i.args,function(){var e,t;(e=(e=(e="row"===a.mode?!!(e=(e=(0,_dom.getEventTargetNode)(n,o,"vxe-body--row")).flag?W.getRowNode(e.targetElem):null)&&!te.eqRow(e.item,i.args.row):!(0,_dom.getEventTargetNode)(n,o,"col--edit").flag)||(0,_dom.getEventTargetNode)(n,o,"vxe-header--row").flag)||(0,_dom.getEventTargetNode)(n,o,"vxe-footer--row").flag)||!H.height||$.overflowY||(t=n.target,(0,_dom.hasClass)(t,"vxe-table--body-wrapper")&&(e=n.offsetY<t.clientHeight)),!e&&(0,_dom.getEventTargetNode)(n,o).flag||setTimeout(function(){return te.clearEdit(n)})}):!l||(0,_dom.getEventTargetNode)(n,o).flag||Y&&(0,_dom.getEventTargetNode)(n,Y.getRefMaps().refElem.value).flag||c&&(0,_dom.getEventTargetNode)(n,c.getRefMaps().refElem.value).flag||d&&(0,_dom.getEventTargetNode)(n,d.getRefMaps().refElem.value).flag||(te.clearSelected(),!te.clearCellAreas)||(0,_dom.getEventTargetNode)(n,document.body,"vxe-table--ignore-areas-clear").flag||X.preventEvent(n,"event.clearAreas",{},function(){te.clearCellAreas(),te.clearCopyCellArea()}),te.closeMenu&&t.visible&&c&&!(0,_dom.getEventTargetNode)(n,c.getRefMaps().refElem.value).flag&&te.closeMenu(),P.isActivated=(0,_dom.getEventTargetNode)(n,Y?Y.getRefMaps().refElem.value:o).flag}function ue(){W.closeFilter(),te.closeMenu&&te.closeMenu()}function ce(){W.closeTooltip(),te.closeMenu&&te.closeMenu()}function de(t){var n=H.mouseConfig,r=H.keyboardConfig,l=$.filterStore,o=$.ctxMenuStore,e=$.editStore,a=J.value,i=Q.value,u=e.actived;(0,_event.hasEventKey)(t,_event.EVENT_KEYS.ESCAPE)&&X.preventEvent(t,"event.keydown",null,function(){var e;W.dispatchEvent("keydown-start",{},t),r&&n&&a.area&&te.handleKeyboardEvent?te.handleKeyboardEvent(t):(u.row||l.visible||o.visible)&&(t.stopPropagation(),te.closeMenu&&te.closeMenu(),W.closeFilter(),r)&&i.isEsc&&u.row&&(e=u.args,te.clearEdit(t),a.selected)&&(0,_vue.nextTick)(function(){return te.handleSelected(e,t)}),W.dispatchEvent("keydown",{},t),W.dispatchEvent("keydown-end",{},t)})}function se(z){P.isActivated&&X.preventEvent(z,"event.keydown",null,function(){var e,t,n,r,l=H.mouseConfig,o=H.keyboardConfig,a=H.treeConfig,i=H.editConfig,u=H.highlightCurrentRow,c=$.ctxMenuStore,d=$.editStore,s=$.currentRow,f=Qe.value,v=Ze.value,g=Q.value,h=J.value,m=Z.value,x=ee.value,p=et.value,_=G.value,w=d.selected,d=d.actived,b=z.keyCode,C=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.ESCAPE),E=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.BACKSPACE),A=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.TAB),R=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.ENTER),T=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.SPACEBAR),y=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.ARROW_LEFT),S=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.ARROW_UP),I=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.ARROW_RIGHT),D=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.ARROW_DOWN),k=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.DELETE),L=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.F2),N=(0,_event.hasEventKey)(z,_event.EVENT_KEYS.CONTEXT_MENU),V=z.metaKey,U=z.ctrlKey,O=z.shiftKey,q=z.altKey,F=y||S||I||D,f=f&&c.visible&&(R||T||F),M=(0,_utils.isEnableConf)(i)&&d.column&&d.row;f?(z.preventDefault(),c.showChild&&(0,_utils.hasChildrenList)(c.selected)?te.moveCtxMenu(z,c,"selectChild",y,!1,c.selected.children):te.moveCtxMenu(z,c,"selected",I,!0,p)):o&&l&&h.area&&te.handleKeyboardEvent?te.handleKeyboardEvent(z):C?(te.closeMenu&&te.closeMenu(),W.closeFilter(),o&&g.isEsc&&d.row&&(e=d.args,te.clearEdit(z),h.selected)&&(0,_vue.nextTick)(function(){return te.handleSelected(e,z)})):T&&o&&g.isChecked&&w.row&&w.column&&("checkbox"===w.column.type||"radio"===w.column.type)?(z.preventDefault(),"checkbox"===w.column.type?X.handleToggleCheckRowEvent(z,w.args):X.triggerRadioRowEvent(z,w.args)):L&&(0,_utils.isEnableConf)(i)?M||w.row&&w.column&&(z.preventDefault(),te.handleActived(w.args,z)):N?(P._keyCtx=w.row&&w.column&&v.length,clearTimeout(_e),_e=setTimeout(function(){P._keyCtx=!1},1e3)):R&&!q&&o&&g.isEnter&&(w.row||d.row||a&&(_.isCurrent||u)&&s)?U?d.row&&(n=d.args,te.clearEdit(z),h.selected)&&(0,_vue.nextTick)(function(){return te.handleSelected(n,z)}):w.row||d.row?(f=(w.row?w:d).args,O?g.enterToTab?te.moveTabSelected(f,O,z):te.moveSelected(f,y,!0,I,!1,z):g.enterToTab?te.moveTabSelected(f,O,z):te.moveSelected(f,y,!1,I,!0,z)):a&&(_.isCurrent||u)&&s&&(c=s[x.children])&&c.length&&(z.preventDefault(),t=c[0],n={$table:te,row:t,rowIndex:W.getRowIndex(t),$rowIndex:W.getVMRowIndex(t)},W.setTreeExpand(s,!0).then(function(){return W.scrollToRow(t)}).then(function(){return X.triggerCurrentRowEvent(z,n)})):F&&o&&g.isArrow?M||(w.row&&w.column?te.moveSelected(w.args,y,S,I,D,z):(S||D)&&(_.isCurrent||u)&&te.moveCurrentRow(S,D,z)):A&&o&&g.isTab?w.row||w.column?te.moveTabSelected(w.args,O,z):(d.row||d.column)&&te.moveTabSelected(d.args,O,z):o&&(0,_utils.isEnableConf)(i)&&(k||(a&&(_.isCurrent||u)&&s?E&&g.isArrow:E))?M||(p=g.delMethod,l=g.backMethod,g.isDel&&(w.row||w.column)?(p?p({row:w.row,rowIndex:W.getRowIndex(w.row),column:w.column,columnIndex:W.getColumnIndex(w.column),$table:te}):(0,_util.setCellValue)(w.row,w.column,null),E?l?l({row:w.row,rowIndex:W.getRowIndex(w.row),column:w.column,columnIndex:W.getColumnIndex(w.column),$table:te}):te.handleActived(w.args,z):k&&W.updateFooter()):E&&g.isArrow&&a&&(_.isCurrent||u)&&s&&(r=_xeUtils.default.findTree(P.afterFullData,function(e){return e===s},x).parent)&&(z.preventDefault(),n={$table:te,row:r,rowIndex:W.getRowIndex(r),$rowIndex:W.getVMRowIndex(r)},W.setTreeExpand(r,!1).then(function(){return W.scrollToRow(r)}).then(function(){return X.triggerCurrentRowEvent(z,n)}))):o&&(0,_utils.isEnableConf)(i)&&g.isEdit&&!U&&!V&&(T||48<=b&&b<=57||65<=b&&b<=90||96<=b&&b<=111||186<=b&&b<=192||219<=b&&b<=222)&&(C=g.editMethod,w.column)&&w.row&&(0,_utils.isEnableConf)(w.column.editRender)&&((L=m.beforeEditMethod||m.activeMethod)&&!L(__assign(__assign({},w.args),{$table:te}))||(C?C({row:w.row,rowIndex:W.getRowIndex(w.row),column:w.column,columnIndex:W.getColumnIndex(w.column),$table:te,$grid:Y}):((0,_util.setCellValue)(w.row,w.column,null),te.handleActived(w.args,z)))),W.dispatchEvent("keydown",{},z)})}function fe(e){var t=H.keyboardConfig,n=H.mouseConfig,r=$.editStore,l=$.filterStore,o=P.isActivated,a=J.value,i=Q.value,r=r.actived;o&&!l.visible&&(r.row||r.column||t&&i.isClip&&n&&a.area&&te.handlePasteCellAreaEvent&&te.handlePasteCellAreaEvent(e),W.dispatchEvent("paste",{},e))}function ve(e){var t=H.keyboardConfig,n=H.mouseConfig,r=$.editStore,l=$.filterStore,o=P.isActivated,a=J.value,i=Q.value,r=r.actived;o&&!l.visible&&(r.row||r.column||t&&i.isClip&&n&&a.area&&te.handleCopyCellAreaEvent&&te.handleCopyCellAreaEvent(e),W.dispatchEvent("copy",{},e))}function ge(e){var t=H.keyboardConfig,n=H.mouseConfig,r=$.editStore,l=$.filterStore,o=P.isActivated,a=J.value,i=Q.value,r=r.actived;o&&!l.visible&&(r.row||r.column||t&&i.isClip&&n&&a.area&&te.handleCutCellAreaEvent&&te.handleCutCellAreaEvent(e),W.dispatchEvent("cut",{},e))}function he(){te.closeMenu&&te.closeMenu(),W.updateCellAreas(),W.recalculate(!0)}function me(e){var t=q.value;clearTimeout(P.tooltipTimeout),e?W.closeTooltip():t&&t.setActived(!0)}function xe(e,t,n,r,l){l.cell=t;var t=$.tooltipStore,o=f.value,a=l.column,i=l.row,u=o.showAll,l=(o=o.contentMethod)?o(l):null,c=(o=o&&!_xeUtils.default.eqNull(l))?l:_xeUtils.default.toString("html"===a.type?n.innerText:n.textContent).trim(),d=n.scrollWidth>n.clientWidth;c&&(u||o||d)&&(Object.assign(t,{row:i,column:a,visible:!0,currOpts:null}),(0,_vue.nextTick)(function(){var e=q.value;e&&e.open(!d&&r||n,(0,_utils.formatText)(c))})),(0,_vue.nextTick)()}function pe(e){var t=H.showHeader,n=H.showFooter,r=$.tableData,l=$.tableColumn,o=$.tableGroupColumn,a=$.columnStore,i=$.footerTableData,u="left"===e,a=u?a.leftList:a.rightList;return(0,_vue.h)("div",{ref:u?Fe:Me,class:"vxe-table--fixed-".concat(e,"-wrapper")},[t?(0,_vue.h)(_header.default,{ref:u?De:Ue,fixedType:e,tableData:r,tableColumn:l,tableGroupColumn:o,fixedColumn:a}):(0,_vue.createCommentVNode)(),(0,_vue.h)(_body.default,{ref:u?ke:s,fixedType:e,tableData:r,tableColumn:l,fixedColumn:a}),n?(0,_vue.h)(_footer.default,{ref:u?Le:Oe,footerTableData:i,tableColumn:l,fixedColumn:a,fixedType:e}):(0,_vue.createCommentVNode)()])}var d,_e,N=e.slots,we=e.emit,be=_vXETable.VXETable.tooltip,Ce=_xeUtils.default.uniqueId(),Ee=(0,_size.useSize)(H),Re=(0,_vue.getCurrentInstance)(),$=(0,_vue.reactive)({staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,selection:[],currentRow:null,currentColumn:null,selectRow:null,footerTableData:[],expandColumn:null,treeNodeColumn:null,hasFixedColumn:!1,rowExpandeds:[],expandLazyLoadeds:[],treeExpandeds:[],treeLazyLoadeds:[],treeIndeterminates:[],mergeList:[],mergeFooterList:[],initStore:{filter:!1,import:!1,export:!1},filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],scaleList:[],scaleMinList:[],autoList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},insertList:[],removeList:[]},tooltipStore:{row:null,column:null,content:null,visible:!1,currOpts:null},validStore:{visible:!1,row:null,column:null,content:"",rule:null,isArrow:!1},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasMerge:!1,hasTree:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isFooter:!1}}),P={tZindex:0,elemStore:{},scrollXStore:{offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},scrollYStore:{rowHeight:0,offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,customHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,lastScrollTime:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},tableFullData:[],afterFullData:[],tableFullTreeData:[],afterTreeFullData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},fullDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1},W={},X={},V=(0,_vue.ref)(),q=(0,_vue.ref)(),Te=(0,_vue.ref)(),ye=(0,_vue.ref)(),Se=(0,_vue.ref)(),Ie=(0,_vue.ref)(),z=(0,_vue.ref)(),j=(0,_vue.ref)(),K=(0,_vue.ref)(),De=(0,_vue.ref)(),ke=(0,_vue.ref)(),Le=(0,_vue.ref)(),Ue=(0,_vue.ref)(),s=(0,_vue.ref)(),Oe=(0,_vue.ref)(),Fe=(0,_vue.ref)(),Me=(0,_vue.ref)(),Ae=(0,_vue.ref)(),Ne=(0,_vue.ref)(),Y=(0,_vue.inject)("$xegrid",null),Ve=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.validConfig,H.validConfig)}),qe=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.scrollX,H.scrollX)}),_=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.scrollY,H.scrollY)}),ze=(0,_vue.computed)(function(){return{default:48,medium:44,small:40,mini:36}}),B=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.columnConfig,H.columnConfig)}),G=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.rowConfig,H.rowConfig)}),He=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.resizeConfig,H.resizeConfig)}),$e=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.resizableConfig,H.resizableConfig)}),Pe=(0,_vue.computed)(function(){return Object.assign({startIndex:0},_conf.default.table.seqConfig,H.seqConfig)}),C=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.radioConfig,H.radioConfig)}),E=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.checkboxConfig,H.checkboxConfig)}),f=((0,_vue.ref)(),(0,_vue.computed)(function(){return Object.assign({},_conf.default.tooltip,_conf.default.table.tooltipConfig,H.tooltipConfig)})),We=(0,_vue.computed)(function(){var e=$.tooltipStore,t=f.value;return __assign(__assign({},t),e.currOpts)}),Xe=(0,_vue.computed)(function(){var e=f.value;return Object.assign({isArrow:!1},e)}),Z=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.editConfig,H.editConfig)}),R=(0,_vue.computed)(function(){return Object.assign({orders:["asc","desc",null]},_conf.default.table.sortConfig,H.sortConfig)}),je=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.filterConfig,H.filterConfig)}),J=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.mouseConfig,H.mouseConfig)}),Ke=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.areaConfig,H.areaConfig)}),Q=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.keyboardConfig,H.keyboardConfig)}),Ye=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.clipConfig,H.clipConfig)}),Be=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.fnrConfig,H.fnrConfig)}),l=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.menuConfig,H.menuConfig)}),Ge=(0,_vue.computed)(function(){var e=l.value.header;return e&&e.options?e.options:[]}),Ze=(0,_vue.computed)(function(){var e=l.value.body;return e&&e.options?e.options:[]}),Je=(0,_vue.computed)(function(){var e=l.value.footer;return e&&e.options?e.options:[]}),Qe=(0,_vue.computed)(function(){var e=l.value,t=Ge.value,n=Ze.value,r=Je.value;return!!(H.menuConfig&&(0,_utils.isEnableConf)(e)&&(t.length||n.length||r.length))}),et=(0,_vue.computed)(function(){var e=$.ctxMenuStore,t=[];return e.list.forEach(function(e){e.forEach(function(e){t.push(e)})}),t}),tt=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.exportConfig,H.exportConfig)}),nt=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.importConfig,H.importConfig)}),rt=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.printConfig,H.printConfig)}),T=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.expandConfig,H.expandConfig)}),ee=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.treeConfig,H.treeConfig)}),lt=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.emptyRender,H.emptyRender)}),ot=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.loadingConfig,H.loadingConfig)}),at=(0,_vue.computed)(function(){return H.border?Math.max(2,Math.ceil($.scrollbarWidth/$.tableColumn.length)):1}),v=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.customConfig,H.customConfig)}),it=(0,_vue.computed)(function(){var e=H.border;return!0===e?"full":e||"default"}),ut=(0,_vue.computed)(function(){H.treeConfig;var e=$.tableData,t=P.tableFullData,n=E.value,r=n.strict,l=n.checkMethod;return!!r&&(!e.length&&!t.length||!!l&&t.every(function(e){return!l({row:e})}))}),ct={refElem:V,refTooltip:q,refValidTooltip:ye,refTableFilter:Se,refTableMenu:Ie,refTableHeader:z,refTableBody:j,refTableFooter:K,refTableLeftHeader:De,refTableLeftBody:ke,refTableLeftFooter:Le,refTableRightHeader:Ue,refTableRightBody:s,refTableRightFooter:Oe,refLeftContainer:Fe,refRightContainer:Me,refCellResizeBar:Ae},dt={computeSize:Ee,computeValidOpts:Ve,computeSXOpts:qe,computeSYOpts:_,computeColumnOpts:B,computeRowOpts:G,computeResizeleOpts:He,computeResizableOpts:$e,computeSeqOpts:Pe,computeRadioOpts:C,computeCheckboxOpts:E,computeTooltipOpts:f,computeEditOpts:Z,computeSortOpts:R,computeFilterOpts:je,computeMouseOpts:J,computeAreaOpts:Ke,computeKeyboardOpts:Q,computeClipOpts:Ye,computeFNROpts:Be,computeHeaderMenu:Ge,computeBodyMenu:Ze,computeFooterMenu:Je,computeIsMenu:Qe,computeMenuOpts:l,computeExportOpts:tt,computeImportOpts:nt,computePrintOpts:rt,computeExpandOpts:T,computeTreeOpts:ee,computeEmptyOpts:lt,computeLoadingOpts:ot,computeCustomOpts:v,computeIsAllCheckboxDisabled:ut},te={xID:Ce,props:H,context:e,instance:Re,reactData:$,internalData:P,getRefMaps:function(){return ct},getComputeMaps:function(){return dt},xegrid:Y},st=function(e){var t=_conf.default.version,e=_xeUtils.default.toStringJSON(localStorage.getItem(e)||"");return e&&e._v===t?e:{_v:t}},ft=function(e){var t=P.fullAllDataRowIdData;return e.filter(function(e){e=(0,_util.getRowid)(te,e);return!!t[e]})},vt=function(e){var n=P.fullDataRowIdData,r=[];return _xeUtils.default.each(e,function(e,t){n[t]&&-1===te.findRowIndexOf(r,n[t].row)&&r.push(n[t].row)}),r},gt=function(){var e=P.visibleColumn,t=j.value,t=t?t.$el:null;if(t){for(var n=t.scrollLeft,r=n+t.clientWidth,l=-1,o=0,a=0,i=0,u=e.length;i<u&&(o+=e[i].renderWidth,!(0<=(l=-1===l&&n<o?i:l)&&(a++,r<o)));i++);return{toVisibleIndex:Math.max(0,l),visibleSize:Math.max(8,a)}}return{toVisibleIndex:0,visibleSize:8}},ht=function(){var e,t,n=z.value,r=j.value,r=r?r.$el:null,l=Ee.value,o=ze.value;return r?(n=n?n.$el:null,e=void(t=0),{rowHeight:t=(t=(e=!(e=r.querySelector("tr"))&&n?n.querySelector("tr"):e)?e.clientHeight:t)||o[l||"default"],visibleSize:Math.max(8,Math.ceil(r.clientHeight/t)+2)}):{rowHeight:0,visibleSize:8}},mt=function(e,t,n){for(var r=0,l=e.length;r<l;r++){var o=e[r],a=t.startIndex,i=t.endIndex,u=o[n],o=u+o[n+"span"];u<a&&a<o&&(t.startIndex=u),u<i&&i<o&&(t.endIndex=o),t.startIndex===a&&t.endIndex===i||(r=-1)}},xt=function(e){var t,n=$.parentHeight,e=H[e],r=0;return r=e?"auto"===e?n:(t=te.getExcludeHeight(),r=(0,_dom.isScale)(e)?Math.floor((_xeUtils.default.toInteger(e)||1)/100*n):_xeUtils.default.toNumber(e),Math.max(40,r-t)):r},w=function(){var s=H.border,f=H.showFooter,v=H.showOverflow,g=H.showHeaderOverflow,h=H.showFooterOverflow,e=H.mouseConfig,m=H.spanMethod,x=H.footerSpanMethod,p=H.keyboardConfig,_=$.isGroup,t=$.currentRow,w=$.tableColumn,b=$.scrollXLoad,C=$.scrollYLoad,E=$.scrollbarWidth,R=$.scrollbarHeight,n=$.columnStore,r=$.editStore,T=$.mergeList,y=$.mergeFooterList,S=$.isAllOverflow,I=P.visibleColumn,D=P.fullColumnIdData,k=P.tableHeight,L=P.tableWidth,U=P.headerHeight,O=P.footerHeight,F=P.elemStore,M=P.customHeight,A=P.customMaxHeight,l=Ne.value,N=at.value,o=J.value,V=Q.value,a=F["main-body-wrapper"],a=a?a.value:null;return l&&(l.style.top="".concat(U,"px"),l.style.height=a?"".concat(a.offsetHeight-R,"px"):""),0<M&&f&&(M+=R),["main","left","right"].forEach(function(u,e){var a,i=0<e?u:"",c="left"===i,d=[];i&&(d=c?n.leftList:n.rightList,a=(c?Fe:Me).value),["header","body","footer"].forEach(function(o){var e,t=F["".concat(u,"-").concat(o,"-wrapper")],t=t?t.value:null,n=F["".concat(u,"-").concat(o,"-table")],n=n?n.value:null,r=("header"===o?(e=L,l=w,_?l=I:i&&(b||g)&&(l=d),e=l.reduce(function(e,t){return e+t.renderWidth},0),n&&(n.style.width=e?"".concat(e+E,"px"):""),(r=(r=F["".concat(u,"-").concat(o,"-repair")])?r.value:null)&&(r.style.width="".concat(L,"px")),r=(r=F["".concat(u,"-").concat(o,"-list")])?r.value:null,_&&r&&_xeUtils.default.arrayEach(r.querySelectorAll(".col--group"),function(e){var t,n,r,l=W.getColumnNode(e);l&&(l=(t=l.item).showHeaderOverflow,l=_xeUtils.default.isBoolean(l)?l:g,r=n=0,(l="title"===l||(!0===l||"tooltip"===l)||"ellipsis"===l)&&_xeUtils.default.eachTree(t.children,function(e){e.children&&t.children.length||r++,n+=e.renderWidth},{children:"children"}),e.style.width=l?"".concat(n-r-(s?2:0),"px"):"")})):"body"===o?(r=(r=F["".concat(u,"-").concat(o,"-emptyBlock")])?r.value:null,(0,_dom.isNodeElement)(t)&&(A?t.style.maxHeight="".concat(i?A-U-(f?0:R):A-U,"px"):t.style.height=0<M?"".concat(i?(0<M?M-U-O:k)-(f?0:R):M-U-O,"px"):""),a&&((0,_dom.isNodeElement)(t)&&(t.style.top="".concat(U,"px")),a.style.height="".concat((0<M?M-U-O:k)+U+O-R*(f?2:1),"px"),a.style.width="".concat(d.reduce(function(e,t){return e+t.renderWidth},c?0:E),"px")),e=L,l=w,e=(l=i?!(C||v&&S)||T.length||m||p&&V.isMerge?I:d:l).reduce(function(e,t){return e+t.renderWidth},0),n&&(n.style.width=e?"".concat(e,"px"):"",n.style.paddingRight=E&&i&&(_dom.browse["-moz"]||_dom.browse.safari)?"".concat(E,"px"):""),r&&(r.style.width=e?"".concat(e,"px"):"")):"footer"===o&&(e=L,l=w,e=(l=i?!b&&!h||y.length&&x?I:d:l).reduce(function(e,t){return e+t.renderWidth},0),(0,_dom.isNodeElement)(t)&&(a&&(t.style.top="".concat(0<M?M-O:k+U,"px")),t.style.marginTop="".concat(-Math.max(1,R),"px")),n)&&(n.style.width=e?"".concat(e+E,"px"):""),F["".concat(u,"-").concat(o,"-colgroup")]),l=r?r.value:null;l&&_xeUtils.default.arrayEach(l.children,function(e){var a,t,n,i,r,l=e.getAttribute("name");"col_gutter"===l&&(e.style.width="".concat(E,"px")),D[l]&&(l=(a=D[l].column).showHeaderOverflow,r=a.showFooterOverflow,t=a.showOverflow,n=void 0,e.style.width="".concat(a.renderWidth,"px"),e="ellipsis"===(n="header"===o?_xeUtils.default.isUndefined(l)||_xeUtils.default.isNull(l)?g:l:"footer"===o?_xeUtils.default.isUndefined(r)||_xeUtils.default.isNull(r)?h:r:_xeUtils.default.isUndefined(t)||_xeUtils.default.isNull(t)?v:t),i="title"===n||(!0===n||"tooltip"===n)||e,r=(l=F["".concat(u,"-").concat(o,"-list")])?l.value:null,C&&!i&&(i=!0),r)&&_xeUtils.default.arrayEach(r.querySelectorAll(".".concat(a.id)),function(e){var t=parseInt(e.getAttribute("colspan")||1),e=e.querySelector(".vxe-cell"),n=a.renderWidth;if(e){if(1<t)for(var r=W.getColumnIndex(a),l=1;l<t;l++){var o=W.getColumns(r+l);o&&(n+=o.renderWidth)}e.style.width=i?"".concat(n-N*t,"px"):""}})})})}),t&&W.setCurrentRow(t),e&&o.selected&&r.selected.row&&r.selected.column&&te.addCellSelectedClass(),(0,_vue.nextTick)()},pt=function(e,t){var n=C.value.checkMethod;return e&&(t||!n||n({row:e}))&&($.selectRow=e,t=e,C.value.reserve)&&(P.radioReserveRow=t),(0,_vue.nextTick)()},y=function(e,t,n){return(e=e&&!_xeUtils.default.isArray(e)?[e]:e).forEach(function(e){return X.handleSelectRow({row:e},!!t,n)}),(0,_vue.nextTick)()},_t=function(t,n){var e=H.treeConfig,r=$.selection,l=P.afterFullData,o=P.checkboxReserveRowMap,a=ee.value,i=E.value,u=i.checkField,c=i.reserve,d=i.checkStrictly,s=i.checkMethod,f=[],i=e?[]:r.filter(function(e){return-1===te.findRowIndexOf(l,e)});return d?$.isAllSelected=t:(u?(d=function(e){!n&&s&&!s({row:e})||(t&&f.push(e),_xeUtils.default.set(e,u,t))},e?_xeUtils.default.eachTree(l,d,a):l.forEach(d)):e?t?_xeUtils.default.eachTree(l,function(e){!n&&s&&!s({row:e})||f.push(e)},a):!n&&s&&_xeUtils.default.eachTree(l,function(e){!s({row:e})&&-1<te.findRowIndexOf(r,e)&&f.push(e)},a):t?f=!n&&s?l.filter(function(e){return-1<te.findRowIndexOf(r,e)||s({row:e})}):l.slice(0):!n&&s&&(f=l.filter(function(e){return s({row:e})?0:-1<te.findRowIndexOf(r,e)})),c&&(t?f.forEach(function(e){o[(0,_util.getRowid)(te,e)]=e}):l.forEach(function(e){return x(e,!1)})),$.selection=u?[]:i.concat(f)),$.treeIndeterminates=[],X.checkSelectionStatus(),(0,_vue.nextTick)()},wt=function(t){var n=$.treeExpandeds,r=$.treeLazyLoadeds,e=P.fullAllDataRowIdData,l=ee.value,o=E.value,a=l.transform,i=l.loadMethod,u=o.checkStrictly,c=e[(0,_util.getRowid)(te,t)];return new Promise(function(e){i?(r.push(t),i({$table:te,row:t}).then(function(e){if(c.treeLoaded=!0,_xeUtils.default.remove(r,function(e){return te.eqRow(e,t)}),e=_xeUtils.default.isArray(e)?e:[])return W.loadTreeChildren(t,e).then(function(e){return e.length&&-1===te.findRowIndexOf(n,t)&&n.push(t),!u&&W.isCheckedByCheckboxRow(t)&&y(e,!0),(0,_vue.nextTick)().then(function(){if(a)return X.handleTableData()})})}).catch(function(){c.treeLoaded=!1,_xeUtils.default.remove(r,function(e){return te.eqRow(e,t)})}).finally(function(){(0,_vue.nextTick)().then(function(){return W.recalculate()}).then(function(){return e()})})):e()})},bt=function(e,t){var n,r=P.treeExpandedReserveRowMap;ee.value.reserve&&(n=(0,_util.getRowid)(te,e),t?r[n]=e:r[n]&&delete r[n])},Ct=function(){var e=$.scrollXLoad,t=P.visibleColumn,n=P.scrollXStore,r=P.fullColumnIdData,e=e?t.slice(n.startIndex,n.endIndex):t.slice(0);e.forEach(function(e,t){e=e.id,e=r[e];e&&(e.$index=t)}),$.tableColumn=e},Et=function(e){var t=[];return e.forEach(function(e){t.push.apply(t,e.children&&e.children.length?Et(e.children):[e])}),t},Rt=_xeUtils.default.debounce(function(e){le(e)},20,{leading:!1,trailing:!0}),W={dispatchEvent:function(e,t,n){we(e,Object.assign({$table:te,$grid:Y,$event:n},t))},clearAll:function(){return(0,_util.clearTableAllStatus)(te)},syncData:function(){return(0,_vue.nextTick)().then(function(){return $.tableData=[],we("update:data",P.tableFullData),(0,_vue.nextTick)()})},updateData:function(){var e=$.scrollXLoad,t=$.scrollYLoad;return X.handleTableData(!0).then(function(){if(W.updateFooter(),e||t)return e&&X.updateScrollXSpace(),t&&X.updateScrollYSpace(),W.refreshScroll()}).then(function(){return W.updateCellAreas(),W.recalculate(!0)}).then(function(){setTimeout(function(){return te.recalculate()},50)})},loadData:function(e){var t=P.inited,n=P.initStatus;return U(e).then(function(){return P.inited=!0,P.initStatus=!0,n||O(),t||F(),W.recalculate()})},reloadData:function(e){var t=P.inited;return W.clearAll().then(function(){return P.inited=!0,P.initStatus=!0,U(e)}).then(function(){return O(),t||F(),W.recalculate()})},reloadRow:function(e,t,n){var r=H.keepSource,l=$.tableData,o=P.tableSourceData;return r?((r=o[W.getRowIndex(e)])&&e&&(n?(o=_xeUtils.default.get(t||e,n),_xeUtils.default.set(e,n,o),_xeUtils.default.set(r,n,o)):(n=_xeUtils.default.clone(__assign({},t),!0),_xeUtils.default.destructuring(r,Object.assign(e,n)))),$.tableData=l.slice(0)):"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),(0,_vue.nextTick)()},loadTreeChildren:function(r,e){var l=H.keepSource,o=P.tableSourceData,i=P.fullDataRowIdData,u=P.fullAllDataRowIdData,a=ee.value,c=a.transform,d=a.children,s=a.mapChildren,t=u[(0,_util.getRowid)(te,r)],f=t?t.level:0;return W.createData(e).then(function(e){var t,n;return l&&(t=(0,_util.getRowid)(te,r),n=_xeUtils.default.findTree(o,function(e){return t===(0,_util.getRowid)(te,e)},a))&&(n.item[d]=_xeUtils.default.clone(e,!0)),_xeUtils.default.eachTree(e,function(e,t,n,r,l,o){var a=(0,_util.getRowid)(te,e),e={row:e,rowid:a,seq:-1,index:t,_index:-1,$index:-1,items:n,parent:l,level:f+o.length};i[a]=e,u[a]=e},a),r[d]=e,c&&(r[s]=e),D(),e})},loadColumn:function(e){e=_xeUtils.default.mapTree(e,function(e){return(0,_vue.reactive)(_cell.default.createColumn(te,e))});return o(e)},reloadColumn:function(e){return W.clearAll().then(function(){return W.loadColumn(e)})},getRowNode:function(e){if(e){var t=P.fullAllDataRowIdData,e=e.getAttribute("rowid");if(e){t=t[e];if(t)return{rowid:t.rowid,item:t.row,index:t.index,items:t.items,parent:t.parent}}}return null},getColumnNode:function(e){if(e){var t=P.fullColumnIdData,e=e.getAttribute("colid");if(e){t=t[e];if(t)return{colid:t.colid,item:t.column,index:t.index,items:t.items,parent:t.parent}}}return null},getRowSeq:oe("seq"),getRowIndex:oe("index"),getVTRowIndex:oe("_index"),getVMRowIndex:oe("$index"),getColumnIndex:ae("index"),getVTColumnIndex:ae("_index"),getVMColumnIndex:ae("$index"),createData:function(e){function t(e){return(0,_vue.reactive)(X.defineField(e||{}))}var n=H.treeConfig,r=ee.value,l=n?_xeUtils.default.mapTree(e,t,r):e.map(t);return(0,_vue.nextTick)().then(function(){return l})},createRow:function(e){var t=_xeUtils.default.isArray(e);return t||(e=[e]),(0,_vue.nextTick)().then(function(){return W.createData(e).then(function(e){return t?e:e[0]})})},revertData:function(e,n){var t=H.keepSource,r=P.tableSourceData,l=P.tableFullData;return t?((t=e)?_xeUtils.default.isArray(e)||(t=[e]):t=_xeUtils.default.toArray(te.getUpdateRecords()),t.length&&t.forEach(function(e){var t;W.isInsertByRow(e)||(t=te.findRowIndexOf(l,e),(t=r[t])&&e&&(n?_xeUtils.default.set(e,n,_xeUtils.default.clone(_xeUtils.default.get(t,n),!0)):_xeUtils.default.destructuring(e,_xeUtils.default.clone(t,!0))))}),e?(0,_vue.nextTick)():W.reloadData(r)):("development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),(0,_vue.nextTick)())},clearData:function(e,t){var n=P.tableFullData,r=P.visibleColumn;return arguments.length?e&&!_xeUtils.default.isArray(e)&&(e=[e]):e=n,t?e.forEach(function(e){return _xeUtils.default.set(e,t,null)}):e.forEach(function(t){r.forEach(function(e){e.field&&(0,_util.setCellValue)(t,e,null)})}),(0,_vue.nextTick)()},isInsertByRow:function(e){var t=$.editStore;return-1<te.findRowIndexOf(t.insertList,e)},removeInsertRow:function(){var e=$.editStore;return te.remove(e.insertList)},isUpdateByRow:function(e,t){var n=H.keepSource,r=H.treeConfig,l=P.visibleColumn,o=P.tableSourceData,a=P.fullDataRowIdData,i=ee.value;if(n){var u,c=void 0,d=(0,_util.getRowid)(te,e);if(!a[d])return!1;if(r?(n=i.children,r=_xeUtils.default.findTree(o,function(e){return d===(0,_util.getRowid)(te,e)},i),e=Object.assign({},e,((i={})[n]=null,i)),r&&(c=Object.assign({},r.item,((i={})[n]=null,i)))):c=o[a[d].index],c){if(1<arguments.length)return!h(c,e,t);for(var s=0,f=l.length;s<f;s++)if((u=l[s].field)&&!h(c,e,u))return!0}}return!1},getColumns:function(e){var t=P.visibleColumn;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getColumnById:function(e){var t=P.fullColumnIdData;return t[e]?t[e].column:null},getColumnByField:function(e){var t=P.fullColumnFieldData;return t[e]?t[e].column:null},getTableColumn:function(){return{collectColumn:P.collectColumn.slice(0),fullColumn:P.tableFullColumn.slice(0),visibleColumn:P.visibleColumn.slice(0),tableColumn:$.tableColumn.slice(0)}},getData:function(e){var t=H.data||P.tableSynchData;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getCheckboxRecords:function(e){var t,n=H.treeConfig,r=P.tableFullData,l=P.afterFullData,o=P.afterTreeFullData,a=P.tableFullTreeData,i=ee.value,u=E.value,c=i.transform,d=i.children,i=i.mapChildren,s=u.checkField,u=e?c?a:r:c?o:l;return s?n?_xeUtils.default.filterTree(u,function(e){return _xeUtils.default.get(e,s)},{children:c?i:d}):u.filter(function(e){return _xeUtils.default.get(e,s)}):(t=$.selection,n?_xeUtils.default.filterTree(u,function(e){return-1<te.findRowIndexOf(t,e)},{children:c?i:d}):u.filter(function(e){return-1<te.findRowIndexOf(t,e)}))},getParentRow:function(e){var t=H.treeConfig,n=P.fullDataRowIdData;if(e&&t){t=void 0;if(t=_xeUtils.default.isString(e)?e:(0,_util.getRowid)(te,e))return n[t]?n[t].parent:null}return null},getRowById:function(e){var t=P.fullDataRowIdData,e=_xeUtils.default.eqNull(e)?"":encodeURIComponent(e);return t[e]?t[e].row:null},getRowid:function(e){return(0,_util.getRowid)(te,e)},getTableData:function(){var e=$.tableData,t=$.footerTableData,n=P.tableFullData,r=P.afterFullData;return{fullData:n.slice(0),visibleData:r.slice(0),tableData:e.slice(0),footerData:t.slice(0)}},hideColumn:function(e){e=(0,_util.handleFieldOrColumn)(te,e);return e&&(e.visible=!1),X.handleCustom()},showColumn:function(e){e=(0,_util.handleFieldOrColumn)(te,e);return e&&(e.visible=!0),X.handleCustom()},setColumnWidth:function(e,t){var n,r,e=(0,_util.handleFieldOrColumn)(te,e);return e&&(r=n=_xeUtils.default.toInteger(t),(0,_dom.isScale)(t)&&(t=(t=(t=j.value)?t.$el:null)?t.clientWidth-1:0,r=Math.floor(n*t)),e.renderWidth=r),(0,_vue.nextTick)()},getColumnWidth:function(e){e=(0,_util.handleFieldOrColumn)(te,e);return e?e.renderWidth:0},resetColumn:function(e){var t=P.tableFullColumn,n=v.value.checkMethod,r=Object.assign({visible:!0,resizable:!0===e},e);return t.forEach(function(e){r.resizable&&(e.resizeWidth=0),n&&!n({column:e})||(e.visible=e.defaultVisible)}),r.resizable&&X.saveCustomResizable(!0),X.handleCustom()},refreshColumn:function(){return A().then(function(){return W.refreshScroll()}).then(function(){return W.recalculate()})},refreshScroll:function(){var t=P.lastScrollLeft,n=P.lastScrollTop,e=j.value,r=K.value,l=ke.value,o=s.value,a=e?e.$el:null,i=l?l.$el:null,u=o?o.$el:null,c=r?r.$el:null;return new Promise(function(e){if(t||n)return(0,_util.restoreScrollLocation)(te,t,n).then(e).then(function(){setTimeout(e,30)});(0,_dom.setScrollTop)(a,n),(0,_dom.setScrollTop)(i,n),(0,_dom.setScrollTop)(u,n),(0,_dom.setScrollLeft)(c,t),setTimeout(e,30)})},recalculate:function(e){return r(),!0===e?c().then(function(){return r(),c()}):c()},openTooltip:function(e,t){var n=Te.value;return n?n.open(e,t):(0,_vue.nextTick)()},closeTooltip:function(){var e=$.tooltipStore,t=q.value,n=Te.value;return e.visible&&(Object.assign(e,{row:null,column:null,content:null,visible:!1}),t)&&t.close(),n&&n.close(),(0,_vue.nextTick)()},isAllCheckboxChecked:function(){return $.isAllSelected},isAllCheckboxIndeterminate:function(){return!$.isAllSelected&&$.isIndeterminate},getCheckboxIndeterminateRecords:function(e){var t=H.treeConfig,n=P.fullDataRowIdData,r=$.treeIndeterminates;return t?e?r.slice(0):r.filter(function(e){e=(0,_util.getRowid)(te,e);return n[e]}):[]},setCheckboxRow:function(e,t){return y(e,t,!0)},isCheckedByCheckboxRow:function(e){var t=$.selection,n=E.value.checkField;return n?_xeUtils.default.get(e,n):-1<te.findRowIndexOf(t,e)},isIndeterminateByCheckboxRow:function(e){var t=$.treeIndeterminates;return-1<te.findRowIndexOf(t,e)&&!W.isCheckedByCheckboxRow(e)},toggleCheckboxRow:function(e){var t=$.selection,n=E.value.checkField,n=n?!_xeUtils.default.get(e,n):-1===te.findRowIndexOf(t,e);return X.handleSelectRow({row:e},n,!0),(0,_vue.nextTick)()},setAllCheckboxRow:function(e){return _t(e,!0)},getRadioReserveRecord:function(e){var t=H.treeConfig,n=P.fullDataRowIdData,r=P.radioReserveRow,l=P.afterFullData,o=C.value,a=ee.value;if(o.reserve&&r){var i=(0,_util.getRowid)(te,r);if(e){if(!n[i])return r}else{var u=(0,_util.getRowkey)(te);if(t){if(_xeUtils.default.findTree(l,function(e){return i===_xeUtils.default.get(e,u)},a))return r}else if(!l.some(function(e){return i===_xeUtils.default.get(e,u)}))return r}}return null},clearRadioReserve:function(){return(P.radioReserveRow=null,_vue.nextTick)()},getCheckboxReserveRecords:function(n){var r,e=H.treeConfig,t=P.afterFullData,l=P.fullDataRowIdData,o=P.checkboxReserveRowMap,a=E.value,i=ee.value,u=[];return a.reserve&&(r={},e?_xeUtils.default.eachTree(t,function(e){r[(0,_util.getRowid)(te,e)]=1},i):t.forEach(function(e){r[(0,_util.getRowid)(te,e)]=1}),_xeUtils.default.each(o,function(e,t){e&&(n?l[t]||u.push(e):r[t]||u.push(e))})),u},clearCheckboxReserve:function(){return P.checkboxReserveRowMap={},(0,_vue.nextTick)()},toggleAllCheckboxRow:function(){return X.triggerCheckAllEvent(null,!$.isAllSelected),(0,_vue.nextTick)()},clearCheckboxRow:function(){var e=H.treeConfig,t=P.tableFullData,n=ee.value,r=E.value,l=r.checkField,r=r.reserve;return l&&(e?_xeUtils.default.eachTree(t,function(e){return _xeUtils.default.set(e,l,!1)},n):t.forEach(function(e){return _xeUtils.default.set(e,l,!1)})),r&&t.forEach(function(e){return x(e,!1)}),$.isAllSelected=!1,$.isIndeterminate=!1,$.selection=[],$.treeIndeterminates=[],(0,_vue.nextTick)()},setCurrentRow:function(e){var t=G.value,n=V.value;return W.clearCurrentRow(),$.currentRow=e,(t.isCurrent||H.highlightCurrentRow)&&n&&_xeUtils.default.arrayEach(n.querySelectorAll('[rowid="'.concat((0,_util.getRowid)(te,e),'"]')),function(e){return(0,_dom.addClass)(e,"row--current")}),(0,_vue.nextTick)()},isCheckedByRadioRow:function(e){return te.eqRow($.selectRow,e)},setRadioRow:function(e){return pt(e,!0)},clearCurrentRow:function(){var e=V.value;return $.currentRow=null,P.hoverRow=null,e&&_xeUtils.default.arrayEach(e.querySelectorAll(".row--current"),function(e){return(0,_dom.removeClass)(e,"row--current")}),(0,_vue.nextTick)()},clearRadioRow:function(){return($.selectRow=null,_vue.nextTick)()},getCurrentRecord:function(){return G.value.isCurrent||H.highlightCurrentRow?$.currentRow:null},getRadioRecord:function(e){var t=H.treeConfig,n=P.fullDataRowIdData,r=P.afterFullData,l=$.selectRow,o=ee.value;if(l){var a=(0,_util.getRowid)(te,l);if(e){if(!n[a])return l}else if(t){var i=(0,_util.getRowkey)(te);if(_xeUtils.default.findTree(r,function(e){return a===_xeUtils.default.get(e,i)},o))return l}else if(-1<te.findRowIndexOf(r,l))return l}return null},getCurrentColumn:function(){return B.value.isCurrent||H.highlightCurrentColumn?$.currentColumn:null},setCurrentColumn:function(e){e=(0,_util.handleFieldOrColumn)(te,e);return e&&(W.clearCurrentColumn(),$.currentColumn=e),(0,_vue.nextTick)()},clearCurrentColumn:function(){return($.currentColumn=null,_vue.nextTick)()},sort:function(e,t){var n=R.value,r=n.multiple,l=n.remote,o=n.orders;return e&&_xeUtils.default.isString(e)&&(e=[{field:e,order:t}]),(e=_xeUtils.default.isArray(e)?e:[e]).length?(r||i(),(r?e:[e[0]]).forEach(function(e,t){var n=e.field,e=e.order,r=n;(r=_xeUtils.default.isString(n)?W.getColumnByField(n):r)&&r.sortable&&(-1===o.indexOf(e)&&(e=m(r)),r.order!==e&&(r.order=e),r.sortTime=Date.now()+t)}),l||X.handleTableData(!0),(0,_vue.nextTick)().then(w)):(0,_vue.nextTick)()},clearSort:function(e){var t=R.value;return e?(e=(0,_util.handleFieldOrColumn)(te,e))&&(e.order=null):i(),t.remote||X.handleTableData(!0),(0,_vue.nextTick)().then(w)},isSort:function(e){return e?!!(e=(0,_util.handleFieldOrColumn)(te,e))&&e.sortable&&!!e.order:0<W.getSortColumns().length},getSortColumns:function(){var e=R.value,t=e.multiple,e=e.chronological,r=[];return P.tableFullColumn.forEach(function(e){var t=e.field,n=e.order;e.sortable&&n&&r.push({column:e,field:t,property:t,order:n,sortTime:e.sortTime})}),t&&e&&1<r.length?_xeUtils.default.orderBy(r,"sortTime"):r},closeFilter:function(){var e=$.filterStore,t=e.column,n=e.visible;return Object.assign(e,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),n&&te.dispatchEvent("filter-visible",{column:t,property:t.field,field:t.field,filterList:te.getCheckedFilters(),visible:!1},null),(0,_vue.nextTick)()},isFilter:function(e){e=(0,_util.handleFieldOrColumn)(te,e);return e?e.filters&&e.filters.some(function(e){return e.checked}):0<te.getCheckedFilters().length},isRowExpandLoaded:function(e){e=P.fullAllDataRowIdData[(0,_util.getRowid)(te,e)];return e&&!!e.expandLoaded},clearRowExpandLoaded:function(t){var e=$.expandLazyLoadeds,n=P.fullAllDataRowIdData,r=T.value.lazy,n=n[(0,_util.getRowid)(te,t)];return r&&n&&(n.expandLoaded=!1,_xeUtils.default.remove(e,function(e){return te.eqRow(e,t)})),(0,_vue.nextTick)()},reloadRowExpand:function(e){var t=$.expandLazyLoadeds;return T.value.lazy&&-1===te.findRowIndexOf(t,e)&&W.clearRowExpandLoaded(e).then(function(){return p(e)}),(0,_vue.nextTick)()},reloadExpandContent:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadExpandContent","reloadRowExpand"]),W.reloadRowExpand(e)},toggleRowExpand:function(e){return W.setRowExpand(e,!W.isExpandByRow(e))},setAllRowExpand:function(e){var t=T.value;return W.setRowExpand(t.lazy?$.tableData:P.tableFullData,e)},setRowExpand:function(e,t){var n,r=$.rowExpandeds,l=$.expandLazyLoadeds,o=$.expandColumn,a=P.fullAllDataRowIdData,i=T.value,u=i.reserve,c=i.lazy,d=i.accordion,s=i.toggleMethod,f=[],v=W.getColumnIndex(o),g=W.getVMColumnIndex(o);return e&&(_xeUtils.default.isArray(e)||(e=[e]),d&&(r=[],e=e.slice(e.length-1,e.length)),n=s?e.filter(function(e){return s({$table:te,expanded:t,column:o,columnIndex:v,$columnIndex:g,row:e,rowIndex:W.getRowIndex(e),$rowIndex:W.getVMRowIndex(e)})}):e,t?n.forEach(function(e){var t;-1===te.findRowIndexOf(r,e)&&(t=a[(0,_util.getRowid)(te,e)],c&&!t.expandLoaded&&-1===te.findRowIndexOf(l,e)?f.push(p(e)):r.push(e))}):_xeUtils.default.remove(r,function(e){return-1<te.findRowIndexOf(n,e)}),u)&&n.forEach(function(e){return L(e,t)}),$.rowExpandeds=r,Promise.all(f).then(function(){return W.recalculate()})},isExpandByRow:function(e){var t=$.rowExpandeds;return-1<te.findRowIndexOf(t,e)},clearRowExpand:function(){var e=$.rowExpandeds,t=P.tableFullData,n=T.value.reserve,r=e.length;return $.rowExpandeds=[],n&&t.forEach(function(e){return L(e,!1)}),(0,_vue.nextTick)().then(function(){r&&W.recalculate()})},clearRowExpandReserve:function(){return P.rowExpandedReserveRowMap={},(0,_vue.nextTick)()},getRowExpandRecords:function(){return $.rowExpandeds.slice(0)},getTreeExpandRecords:function(){return $.treeExpandeds.slice(0)},isTreeExpandLoaded:function(e){e=P.fullAllDataRowIdData[(0,_util.getRowid)(te,e)];return e&&!!e.treeLoaded},clearTreeExpandLoaded:function(t){var e=$.treeExpandeds,n=P.fullAllDataRowIdData,r=ee.value,l=r.transform,r=r.lazy,n=n[(0,_util.getRowid)(te,t)];return r&&n&&(n.treeLoaded=!1,_xeUtils.default.remove(e,function(e){return te.eqRow(e,t)})),l?(b(),X.handleTableData()):(0,_vue.nextTick)()},reloadTreeExpand:function(e){var t=$.treeLazyLoadeds,n=ee.value,r=n.transform,l=n.lazy,n=n.hasChild;return l&&e[n]&&-1===te.findRowIndexOf(t,e)&&W.clearTreeExpandLoaded(e).then(function(){return wt(e)}).then(function(){if(r)return b(),X.handleTableData()}).then(function(){return W.recalculate()}),(0,_vue.nextTick)()},reloadTreeChilds:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadTreeChilds","reloadTreeExpand"]),W.reloadTreeExpand(e)},toggleTreeExpand:function(e){return W.setTreeExpand(e,!W.isTreeExpandByRow(e))},setAllTreeExpand:function(e){var t=P.tableFullData,n=ee.value,r=n.transform,l=n.lazy,o=n.children,a=[];return _xeUtils.default.eachTree(t,function(e){var t=e[o];(l||t&&t.length)&&a.push(e)},n),W.setTreeExpand(a,e).then(function(){if(r)return b(),W.recalculate()})},setTreeExpand:function(e,t){var n=ee.value.transform;return e&&(e=_xeUtils.default.isArray(e)?e:[e]).length?n?re(e,t).then(function(){return b(),X.handleTableData()}).then(function(){return W.recalculate()}):re(e,t):(0,_vue.nextTick)()},isTreeExpandByRow:function(e){var t=$.treeExpandeds;return-1<te.findRowIndexOf(t,e)},clearTreeExpand:function(){var e=$.treeExpandeds,t=P.tableFullTreeData,n=ee.value,r=n.transform,l=n.reserve,o=e.length;return $.treeExpandeds=[],l&&_xeUtils.default.eachTree(t,function(e){return bt(e,!1)},n),X.handleTableData().then(function(){if(r)return b(),X.handleTableData()}).then(function(){if(o)return W.recalculate()})},clearTreeExpandReserve:function(){return P.treeExpandedReserveRowMap={},(0,_vue.nextTick)()},getScroll:function(){var e=$.scrollXLoad,t=$.scrollYLoad,n=j.value.$el;return{virtualX:e,virtualY:t,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}},scrollTo:function(e,t){var n=j.value,r=K.value,l=s.value,n=n?n.$el:null,l=l?l.$el:null,r=r?r.$el:null;return _xeUtils.default.isNumber(e)&&(0,_dom.setScrollLeft)(r||n,e),_xeUtils.default.isNumber(t)&&(0,_dom.setScrollTop)(l||n,t),$.scrollXLoad||$.scrollYLoad?new Promise(function(e){setTimeout(function(){(0,_vue.nextTick)(function(){e()})},50)}):(0,_vue.nextTick)()},scrollToRow:function(e,t){var n=[];return e&&(H.treeConfig?n.push(X.scrollToTreeRow(e)):n.push((0,_util.rowToVisible)(te,e))),t&&n.push(W.scrollToColumn(t)),Promise.all(n)},scrollToColumn:function(e){var t=P.fullColumnIdData,e=(0,_util.handleFieldOrColumn)(te,e);return e&&t[e.id]?(0,_util.colToVisible)(te,e):(0,_vue.nextTick)()},clearScroll:function(){var e=P.scrollXStore,t=P.scrollYStore,n=j.value,r=K.value,l=s.value,n=n?n.$el:null,l=l?l.$el:null,r=r?r.$el:null;return l&&((0,_util.restoreScrollListener)(l),l.scrollTop=0),r&&(r.scrollLeft=0),n&&((0,_util.restoreScrollListener)(n),n.scrollTop=0,n.scrollLeft=0),e.startIndex=0,(t.startIndex=0,_vue.nextTick)()},updateFooter:function(){var e=H.showFooter,t=H.footerMethod,n=P.visibleColumn,r=P.afterFullData;return e&&t&&($.footerTableData=n.length?t({columns:n,data:r,$table:te,$grid:Y}):[]),(0,_vue.nextTick)()},updateStatus:function(a,i){var u=!_xeUtils.default.isUndefined(i);return(0,_vue.nextTick)().then(function(){var e=H.editRules,t=$.validStore,n=j.value;if(a&&n&&e){var r=a.row,l=a.column;if(te.hasCellRules&&te.hasCellRules("change",r,l)){var o=X.getCell(r,l);if(o)return te.validCellRules("change",r,l,i).then(function(){u&&t.visible&&(0,_util.setCellValue)(r,l,i),te.clearValidate()}).catch(function(e){e=e.rule;u&&(0,_util.setCellValue)(r,l,i),te.showValidTooltip({rule:e,row:r,column:l,cell:o})})}}})},setMergeCells:function(e){return H.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]),t(e,$.mergeList,P.afterFullData),(0,_vue.nextTick)().then(function(){return W.updateCellAreas()})},removeMergeCells:function(e){H.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]);var t=n(e,$.mergeList,P.afterFullData);return(0,_vue.nextTick)().then(function(){return W.updateCellAreas(),t})},getMergeCells:function(){return $.mergeList.slice(0)},clearMergeCells:function(){return $.mergeList=[],(0,_vue.nextTick)()},setMergeFooterItems:function(e){return H.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),t(e,$.mergeFooterList),(0,_vue.nextTick)().then(function(){return W.updateCellAreas()})},removeMergeFooterItems:function(e){H.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);var t=n(e,$.mergeFooterList);return(0,_vue.nextTick)().then(function(){return W.updateCellAreas(),t})},getMergeFooterItems:function(){return $.mergeFooterList.slice(0)},clearMergeFooterItems:function(){return $.mergeFooterList=[],(0,_vue.nextTick)()},updateCellAreas:function(){var e=H.mouseConfig,t=J.value;return e&&t.area&&te.handleUpdateCellAreas?te.handleUpdateCellAreas():(0,_vue.nextTick)()},focus:function(){return P.isActivated=!0,(0,_vue.nextTick)()},blur:function(){return(P.isActivated=!1,_vue.nextTick)()},connect:function(e){return e?(d=e).syncUpdate({collectColumn:P.collectColumn,$table:te}):(0,_log.errLog)("vxe.error.barUnableLink"),(0,_vue.nextTick)()}},X={getSetupOptions:function(){return _conf.default},updateAfterDataIndex:D,callSlot:function(e,t){if(e){if(Y)return Y.callSlot(e,t);if(_xeUtils.default.isFunction(e))return(0,_vn.getSlotVNs)(e(t))}return[]},getParentElem:function(){var e,t=V.value;return Y?(e=Y.getRefMaps().refElem.value)?e.parentNode:null:t?t.parentNode:null},getParentHeight:function(){var e=H.height,t=V.value;return t?(t=t.parentNode,e="auto"===e?(0,_dom.getPaddingTopBottomSize)(t):0,Math.floor(Y?Y.getParentHeight():_xeUtils.default.toNumber(getComputedStyle(t).height)-e)):0},getExcludeHeight:function(){return Y?Y.getExcludeHeight():0},defineField:function(l){var e=H.treeConfig,t=T.value,n=ee.value,r=C.value,o=E.value,a=(0,_util.getRowkey)(te);return P.tableFullColumn.forEach(function(e){var t,n=e.field,r=e.editRender;!n||_xeUtils.default.has(l,n)||l[n]||(t=null,r&&(r=r.defaultValue,_xeUtils.default.isFunction(r)?t=r({column:e}):_xeUtils.default.isUndefined(r)||(t=r)),_xeUtils.default.set(l,n,t))}),[r.labelField,o.checkField,o.labelField,t.labelField].forEach(function(e){e&&(0,_utils.eqEmptyValue)(_xeUtils.default.get(l,e))&&_xeUtils.default.set(l,e,null)}),e&&n.lazy&&_xeUtils.default.isUndefined(l[n.children])&&(l[n.children]=null),(0,_utils.eqEmptyValue)(_xeUtils.default.get(l,a))&&_xeUtils.default.set(l,a,(0,_util.getRowUniqueId)()),l},handleTableData:function(e){var i,u,t,n,r,l,o,a,c,d,s,f,v,g,h,m=$.scrollYLoad,x=P.scrollYStore,p=P.fullDataRowIdData,_=P.afterFullData,w=(e&&(e=H.treeConfig,n=P.tableFullColumn,r=P.tableFullData,l=P.tableFullTreeData,o=je.value,a=R.value,c=ee.value,d=c.transform,s=o.remote,f=o.filterMethod,v=a.remote,o=a.sortMethod,w=a.multiple,a=a.chronological,g=[],h=[],s&&v?e&&d?g=h=_xeUtils.default.searchTree(l,function(){return!0},__assign(__assign({},c),{original:!0})):h=g=(e?l:r).slice(0):(i=[],u=[],n.forEach(function(e){var t,n,r=e.field,l=e.sortable,o=e.order,a=e.filters;!s&&a&&a.length&&(t=[],n=[],a.forEach(function(e){e.checked&&(n.push(e),t.push(e.value))}),n.length)&&i.push({column:e,valueList:t,itemList:n}),!v&&l&&o&&u.push({column:e,field:r,property:r,order:o,sortTime:e.sortTime})}),w&&a&&1<u.length&&(u=_xeUtils.default.orderBy(u,"sortTime")),!s&&i.length?(n=function(u){return i.every(function(e){var t=e.column,n=e.valueList,e=e.itemList,r=t.filterMethod,l=t.filterRender,l=l?_vXETable.VXETable.renderer.get(l.name):null,o=l?l.filterMethod:null,a=l?l.defaultFilterMethod:null,i=(0,_util.getCellValue)(u,t);return r?e.some(function(e){return r({value:e.value,option:e,cellValue:i,row:u,column:t,$table:te})}):o?e.some(function(e){return o({value:e.value,option:e,cellValue:i,row:u,column:t,$table:te})}):f?f({options:e,values:n,cellValue:i,row:u,column:t}):a?e.some(function(e){return a({value:e.value,option:e,cellValue:i,row:u,column:t,$table:te})}):-1<n.indexOf(_xeUtils.default.get(u,t.field))})},e&&d?g=h=_xeUtils.default.searchTree(l,n,__assign(__assign({},c),{original:!0})):h=g=(e?l:r).filter(n)):e&&d?g=h=_xeUtils.default.searchTree(l,function(){return!0},__assign(__assign({},c),{original:!0})):h=g=(e?l:r).slice(0),!v&&u.length&&(e&&d?g=h=o?(t=o({data:h,sortList:u,$table:te}),_xeUtils.default.isArray(t)?t:h):_xeUtils.default.orderBy(h,u.map(function(e){var t=e.column,e=e.order;return[I(t),e]})):h=g=o?(t=o({data:g,sortList:u,$table:te}),_xeUtils.default.isArray(t)?t:g):_xeUtils.default.orderBy(g,u.map(function(e){var t=e.column,e=e.order;return[I(t),e]})))),P.afterFullData=g,P.afterTreeFullData=h,D(),_=b()),m?_.slice(x.startIndex,x.endIndex):_.slice(0));return w.forEach(function(e,t){e=(0,_util.getRowid)(te,e),e=p[e];e&&(e.$index=t)}),$.tableData=w,(0,_vue.nextTick)()},cacheRowMap:function(i){function e(e,t,n,r,l,o){var a=(0,_util.getRowid)(te,e),r=u&&r?(0,_util.toTreePathSeq)(r):t+1,o=o?o.length-1:0,e=((0,_utils.eqEmptyValue)(a)&&(a=(0,_util.getRowUniqueId)(),_xeUtils.default.set(e,f,a)),v&&e[c.hasChild]&&_xeUtils.default.isUndefined(e[c.children])&&(e[c.children]=null),{row:e,rowid:a,seq:r,index:u&&l?-1:t,_index:-1,$index:-1,items:n,parent:l,level:o});i&&(d[a]=e),s[a]=e}var u=H.treeConfig,c=ee.value,d=P.fullDataRowIdData,s=P.fullAllDataRowIdData,t=P.tableFullData,n=P.tableFullTreeData,f=(0,_util.getRowkey)(te),v=u&&c.lazy;i&&(d=P.fullDataRowIdData={}),s=P.fullAllDataRowIdData={},u?_xeUtils.default.eachTree(n,e,c):t.forEach(e)},analyColumnWidth:function(){var e=P.tableFullColumn,t=B.value,n=t.width,r=t.minWidth,l=[],o=[],a=[],i=[],u=[],c=[];e.forEach(function(e){n&&!e.width&&(e.width=n),r&&!e.minWidth&&(e.minWidth=r),e.visible&&(e.resizeWidth?l:(0,_dom.isPx)(e.width)?o:(0,_dom.isScale)(e.width)?i:(0,_dom.isPx)(e.minWidth)?a:(0,_dom.isScale)(e.minWidth)?u:c).push(e)}),Object.assign($.columnStore,{resizeList:l,pxList:o,pxMinList:a,scaleList:i,scaleMinList:u,autoList:c})},saveCustomResizable:function(e){var n,t=H.id,r=H.customConfig,l=v.value,o=P.collectColumn,l=l.storage,l=!0===l||l&&l.resizable;r&&l&&(r=st(resizableStorageKey),t?(e||(n=_xeUtils.default.isPlainObject(r[t])?r[t]:{},_xeUtils.default.eachTree(o,function(e){var t;e.resizeWidth&&(t=e.getKey())&&(n[t]=e.renderWidth)})),r[t]=_xeUtils.default.isEmpty(n)?void 0:n,localStorage.setItem(resizableStorageKey,_xeUtils.default.toJSONString(r))):(0,_log.errLog)("vxe.error.reqProp",["id"]))},saveCustomVisible:function(){var n,r,e=H.id,t=H.customConfig,l=P.collectColumn,o=v.value,a=o.checkMethod,o=o.storage,o=!0===o||o&&o.visible;t&&o&&(t=st(visibleStorageKey),n=[],r=[],e?(_xeUtils.default.eachTree(l,function(e){var t;a&&!a({column:e})||(!e.visible&&e.defaultVisible?(t=e.getKey())&&n.push(t):e.visible&&!e.defaultVisible&&(t=e.getKey())&&r.push(t))}),t[e]=[n.join(",")].concat(r.length?[r.join(",")]:[]).join("|")||void 0,localStorage.setItem(visibleStorageKey,_xeUtils.default.toJSONString(t))):(0,_log.errLog)("vxe.error.reqProp",["id"]))},handleCustom:function(){return X.saveCustomVisible(),X.analyColumnWidth(),W.refreshColumn()},preventEvent:function(t,e,n,r,l){var o;return _vXETable.VXETable.interceptor.get(e).some(function(e){return!1===e(Object.assign({$grid:Y,$table:te,$event:t},n))})||r&&(o=r()),l&&l(),o},checkSelectionStatus:function(){var t,n,e=H.treeConfig,r=$.selection,l=$.treeIndeterminates,o=P.afterFullData,a=E.value,i=a.checkField,u=a.halfField,c=a.checkStrictly,d=a.checkMethod;c||(t=[],c=a=!(n=[]),c=i?(a=o.every(d?function(e){return d({row:e})?!!_xeUtils.default.get(e,i)&&(n.push(e),!0):(t.push(e),!0)}:function(e){return _xeUtils.default.get(e,i)})&&o.length!==t.length,e?u?!a&&o.some(function(e){return _xeUtils.default.get(e,i)||_xeUtils.default.get(e,u)||-1<te.findRowIndexOf(l,e)}):!a&&o.some(function(e){return _xeUtils.default.get(e,i)||-1<te.findRowIndexOf(l,e)}):u?!a&&o.some(function(e){return _xeUtils.default.get(e,i)||_xeUtils.default.get(e,u)}):!a&&o.some(function(e){return _xeUtils.default.get(e,i)})):(a=o.every(d?function(e){return d({row:e})?-1<te.findRowIndexOf(r,e)&&(n.push(e),!0):(t.push(e),!0)}:function(e){return-1<te.findRowIndexOf(r,e)})&&o.length!==t.length,e?!a&&o.some(function(e){return-1<te.findRowIndexOf(l,e)||-1<te.findRowIndexOf(r,e)}):!a&&o.some(function(e){return-1<te.findRowIndexOf(r,e)})),$.isAllSelected=a,$.isIndeterminate=c)},handleSelectRow:function(e,n,r){var t,l,o,a,i,u=e.row,e=H.treeConfig,c=$.selection,d=$.treeIndeterminates,s=P.afterFullData,f=ee.value,v=E.value,g=v.checkField,h=v.checkStrictly,m=v.checkMethod;if(g)if(e&&!h){if(-1===n?(-1===te.findRowIndexOf(d,u)&&d.push(u),_xeUtils.default.set(u,g,!1)):_xeUtils.default.eachTree([u],function(t){(te.eqRow(t,u)||r||!m||m({row:t}))&&(_xeUtils.default.set(t,g,n),_xeUtils.default.remove(d,function(e){return te.eqRow(e,t)}),x(u,n))},f),(l=_xeUtils.default.findTree(s,function(e){return te.eqRow(e,u)},f))&&l.parent)return o=void 0,t=!r&&m?l.items.filter(function(e){return m({row:e})}):l.items,o=_xeUtils.default.find(l.items,function(e){return-1<te.findRowIndexOf(d,e)})?-1:(i=l.items.filter(function(e){return _xeUtils.default.get(e,g)})).filter(function(e){return-1<te.findRowIndexOf(t,e)}).length===t.length||!(!i.length&&-1!==n)&&-1,X.handleSelectRow({row:l.parent},o,r)}else!r&&m&&!m({row:u})||(_xeUtils.default.set(u,g,n),x(u,n));else if(e&&!h){if(-1===n?(-1===te.findRowIndexOf(d,u)&&d.push(u),_xeUtils.default.remove(c,function(e){return te.eqRow(e,u)})):_xeUtils.default.eachTree([u],function(t){(te.eqRow(t,u)||r||!m||m({row:t}))&&(n?c.push(t):_xeUtils.default.remove(c,function(e){return te.eqRow(e,t)}),_xeUtils.default.remove(d,function(e){return te.eqRow(e,t)}),x(u,n))},f),(l=_xeUtils.default.findTree(s,function(e){return te.eqRow(e,u)},f))&&l.parent)return o=void 0,a=!r&&m?l.items.filter(function(e){return m({row:e})}):l.items,o=_xeUtils.default.find(l.items,function(e){return-1<te.findRowIndexOf(d,e)})?-1:(i=l.items.filter(function(e){return-1<te.findRowIndexOf(c,e)})).filter(function(e){return-1<te.findRowIndexOf(a,e)}).length===a.length||!(!i.length&&-1!==n)&&-1,X.handleSelectRow({row:l.parent},o,r)}else!r&&m&&!m({row:u})||(n?-1===te.findRowIndexOf(c,u)&&c.push(u):_xeUtils.default.remove(c,function(e){return te.eqRow(e,u)}),x(u,n));X.checkSelectionStatus()},triggerHeaderHelpEvent:function(t,e){var n,r,e=e.column,e=e.titlePrefix||e.titleHelp;(e.content||e.message)&&(n=$.tooltipStore,r=(0,_utils.getFuncText)(e.content||e.message),me(!0),n.visible=!0,n.currOpts=__assign(__assign({},e),{content:null}),(0,_vue.nextTick)(function(){var e=q.value;e&&e.open(t.currentTarget,r)}))},triggerHeaderTooltipEvent:function(e,t){var n=$.tooltipStore,r=t.column,e=e.currentTarget;me(!0),n.column===r&&n.visible||xe(0,e,e,null,t)},triggerBodyTooltipEvent:function(e,t){var n=H.editConfig,r=$.editStore,l=$.tooltipStore,o=Z.value,r=r.actived,a=t.row,i=t.column,e=e.currentTarget;if(me(l.column!==i||l.row!==a),i.editRender&&(0,_utils.isEnableConf)(n)){if("row"===o.mode&&r.row===a)return;if(r.row===a&&r.column===i)return}l.column===i&&l.row===a&&l.visible||(o=n=void 0,i.treeNode?(n=e.querySelector(".vxe-tree-cell"),"html"===i.type&&(o=e.querySelector(".vxe-cell--html"))):o=e.querySelector("html"===i.type?".vxe-cell--html":".vxe-cell--label"),xe(0,e,n||e.children[0],o,t))},triggerFooterTooltipEvent:function(e,t){var n=t.column,r=$.tooltipStore,e=e.currentTarget;me(r.column!==n||r.row),r.column===n&&r.visible||xe(0,e,e.querySelector(".vxe-cell--item")||e.children[0],null,t)},handleTargetLeaveEvent:function(){var e=f.value,t=q.value;t&&t.setActived(!1),e.enterable?P.tooltipTimeout=setTimeout(function(){(t=q.value)&&!t.isActived()&&W.closeTooltip()},e.leaveDelay):W.closeTooltip()},triggerHeaderCellClickEvent:function(e,t){var n=P._lastResizeTime,r=R.value,l=B.value,o=t.column,a=e.currentTarget,n=n&&n>Date.now()-300,i=(0,_dom.getEventTargetNode)(e,a,"vxe-cell--sort").flag,u=(0,_dom.getEventTargetNode)(e,a,"vxe-cell--filter").flag;"cell"!==r.trigger||n||i||u||X.triggerSortEvent(e,o,m(o)),W.dispatchEvent("header-cell-click",Object.assign({triggerResizable:n,triggerSort:i,triggerFilter:u,cell:a},t),e),(l.isCurrent||H.highlightCurrentColumn)&&W.setCurrentColumn(o)},triggerHeaderCellDblclickEvent:function(e,t){W.dispatchEvent("header-cell-dblclick",Object.assign({cell:e.currentTarget},t),e)},triggerCellClickEvent:function(e,t){var n=H.highlightCurrentRow,r=H.editConfig,l=$.editStore,o=T.value,a=Z.value,i=ee.value,u=C.value,c=E.value,d=G.value,l=l.actived,s=t.row,f=t.column,v=f.type,g=f.treeNode,h="radio"===v,m="checkbox"===v,v="expand"===v,x=e.currentTarget,p=h&&(0,_dom.getEventTargetNode)(e,x,"vxe-cell--radio").flag,_=m&&(0,_dom.getEventTargetNode)(e,x,"vxe-cell--checkbox").flag,w=g&&(0,_dom.getEventTargetNode)(e,x,"vxe-tree--btn-wrapper").flag,b=v&&(0,_dom.getEventTargetNode)(e,x,"vxe-table--expanded").flag;t=Object.assign({cell:x,triggerRadio:p,triggerCheckbox:_,triggerTreeNode:w,triggerExpandNode:b},t),!_&&!p&&(!b&&("row"===o.trigger||v&&"cell"===o.trigger)&&X.triggerRowExpandEvent(e,t),"row"===i.trigger||g&&"cell"===i.trigger)&&X.triggerTreeExpandEvent(e,t),w||(b||(!d.isCurrent&&!n||_||p||X.triggerCurrentRowEvent(e,t),!p&&("row"===u.trigger||h&&"cell"===u.trigger)&&X.triggerRadioRowEvent(e,t),!_&&("row"===c.trigger||m&&"cell"===c.trigger)&&X.handleToggleCheckRowEvent(e,t)),(0,_utils.isEnableConf)(r)&&("manual"===a.trigger?l.args&&l.row===s&&f!==l.column&&k(e,t):l.args&&s===l.row&&f===l.column||("click"===a.trigger||"dblclick"===a.trigger&&"row"===a.mode&&l.row===s)&&k(e,t))),W.dispatchEvent("cell-click",t,e)},triggerCellDblclickEvent:function(e,t){var n=H.editConfig,r=$.editStore,l=Z.value,r=r.actived,o=e.currentTarget;t=Object.assign({cell:o},t),!(0,_utils.isEnableConf)(n)||"dblclick"!==l.trigger||r.args&&e.currentTarget===r.args.cell||("row"===l.mode?a("blur").catch(function(e){return e}).then(function(){te.handleActived(t,e).then(function(){return a("change")}).catch(function(e){return e})}):"cell"===l.mode&&te.handleActived(t,e).then(function(){return a("change")}).catch(function(e){return e})),W.dispatchEvent("cell-dblclick",t,e)},handleToggleCheckRowEvent:function(e,t){var n=$.selection,r=E.value.checkField,l=t.row,r=r?!_xeUtils.default.get(l,r):-1===te.findRowIndexOf(n,l);e?X.triggerCheckRowEvent(e,t,r):X.handleSelectRow(t,r)},triggerCheckRowEvent:function(e,t,n){var r=E.value.checkMethod;r&&!r({row:t.row})||(X.handleSelectRow(t,n),W.dispatchEvent("checkbox-change",Object.assign({records:W.getCheckboxRecords(),reserves:W.getCheckboxReserveRecords(),indeterminates:W.getCheckboxIndeterminateRecords(),checked:n},t),e))},triggerCheckAllEvent:function(e,t){_t(t),e&&W.dispatchEvent("checkbox-all",{records:W.getCheckboxRecords(),reserves:W.getCheckboxReserveRecords(),indeterminates:W.getCheckboxIndeterminateRecords(),checked:t},e)},triggerRadioRowEvent:function(e,t){var n=$.selectRow,r=t.row,l=C.value,o=n!==r;o?pt(r):l.strict||(o=n===r)&&(r=null,W.clearRadioRow()),o&&W.dispatchEvent("radio-change",__assign({oldValue:n,newValue:r},t),e)},triggerCurrentRowEvent:function(e,t){var n=$.currentRow,r=t.row,l=n!==r;W.setCurrentRow(r),l&&W.dispatchEvent("current-change",__assign({oldValue:n,newValue:r},t),e)},triggerRowExpandEvent:function(e,t){var n,r=$.expandLazyLoadeds,l=$.expandColumn,o=T.value,t=t.row;o.lazy&&-1!==te.findRowIndexOf(r,t)||(o=!W.isExpandByRow(t),r=W.getColumnIndex(l),n=W.getVMColumnIndex(l),W.setRowExpand(t,o),W.dispatchEvent("toggle-row-expand",{expanded:o,column:l,columnIndex:r,$columnIndex:n,row:t,rowIndex:W.getRowIndex(t),$rowIndex:W.getVMRowIndex(t)},e))},triggerTreeExpandEvent:function(e,t){var n,r=$.treeLazyLoadeds,l=ee.value,o=t.row,t=t.column;l.lazy&&-1!==te.findRowIndexOf(r,o)||(l=!W.isTreeExpandByRow(o),r=W.getColumnIndex(t),n=W.getVMColumnIndex(t),W.setTreeExpand(o,l),W.dispatchEvent("toggle-tree-expand",{expanded:l,column:t,columnIndex:r,$columnIndex:n,row:o},e))},triggerSortEvent:function(e,t,n){var r=R.value,l=t.field;t.sortable&&(n&&t.order!==n?W.sort({field:l,order:n}):W.clearSort(r.multiple?t:null),n={column:t,field:l,property:l,order:t.order,sortList:W.getSortColumns()},W.dispatchEvent("sort-change",n,e))},triggerScrollXEvent:function(){M()},triggerScrollYEvent:function(e){var t=P.scrollYStore,n=t.adaptive,r=t.offsetSize,t=t.visibleSize;(isWebkit&&n&&2*r+t<=40?le:Rt)(e)},scrollToTreeRow:function(t){var n,e=H.treeConfig,r=P.tableFullData,l=[];return e&&(e=ee.value,r=_xeUtils.default.findTree(r,function(e){return te.eqRow(e,t)},e))&&(n=r.nodes).forEach(function(e,t){t<n.length-1&&!W.isTreeExpandByRow(e)&&l.push(W.setTreeExpand(e,!0))}),Promise.all(l).then(function(){return(0,_util.rowToVisible)(te,t)})},updateScrollXSpace:function(){var e=$.isGroup,r=$.scrollXLoad,l=$.scrollbarWidth,t=P.visibleColumn,n=P.scrollXStore,o=P.elemStore,a=P.tableWidth,i=z.value,u=j.value,c=K.value,u=u?u.$el:null;u&&(i=i?i.$el:null,c=c?c.$el:null,i=i?i.querySelector(".vxe-table--header"):null,u=u.querySelector(".vxe-table--body"),c=c?c.querySelector(".vxe-table--footer"):null,t=t.slice(0,n.startIndex).reduce(function(e,t){return e+t.renderWidth},0),n="",r&&(n="".concat(t,"px")),i&&(i.style.marginLeft=e?"":n),u.style.marginLeft=n,c&&(c.style.marginLeft=n),["main"].forEach(function(n){["header","body","footer"].forEach(function(e){var t=o["".concat(n,"-").concat(e,"-xSpace")],t=t?t.value:null;t&&(t.style.width=r?"".concat(a+("header"===e?l:0),"px"):"")})}),(0,_vue.nextTick)(w))},updateScrollYSpace:function(){var e=$.scrollYLoad,t=P.scrollYStore,n=P.elemStore,r=P.afterFullData,l=t.startIndex,t=t.rowHeight,r=r.length*t,l=Math.max(0,l*t),o="",a="";e&&(o="".concat(l,"px"),a="".concat(r,"px")),["main","left","right"].forEach(function(t){var e=n["".concat(t,"-body-table")],e=e?e.value:null;e&&(e.style.marginTop=o),["header","body","footer"].forEach(function(e){e=n["".concat(t,"-").concat(e,"-ySpace")],e=e?e.value:null;e&&(e.style.height=a)})}),(0,_vue.nextTick)(w)},updateScrollXData:function(){(0,_vue.nextTick)(function(){Ct(),X.updateScrollXSpace()})},updateScrollYData:function(){(0,_vue.nextTick)(function(){X.handleTableData(),X.updateScrollYSpace()})},checkScrolling:function(){var e=Fe.value,t=Me.value,n=j.value,n=n?n.$el:null;n&&(e&&(0<n.scrollLeft?(0,_dom.addClass):(0,_dom.removeClass))(e,"scrolling--middle"),t)&&(n.clientWidth<n.scrollWidth-Math.ceil(n.scrollLeft)?(0,_dom.addClass):(0,_dom.removeClass))(t,"scrolling--middle")},updateZindex:function(){H.zIndex?P.tZindex=H.zIndex:P.tZindex<(0,_utils.getLastZIndex)()&&(P.tZindex=(0,_utils.nextZIndex)())},handleCheckedCheckboxRow:y,triggerHoverEvent:function(e,t){t=t.row;X.setHoverRow(t)},setHoverRow:function(e){var t=(0,_util.getRowid)(te,e),n=V.value;X.clearHoverRow(),n&&_xeUtils.default.arrayEach(n.querySelectorAll('[rowid="'.concat(t,'"]')),function(e){return(0,_dom.addClass)(e,"row--hover")}),P.hoverRow=e},clearHoverRow:function(){var e=V.value;e&&_xeUtils.default.arrayEach(e.querySelectorAll(".vxe-body--row.row--hover"),function(e){return(0,_dom.removeClass)(e,"row--hover")}),P.hoverRow=null},getCell:function(e,t){var n,e=(0,_util.getRowid)(te,e),r=j.value,l=ke.value,o=s.value;return t.fixed&&("left"===t.fixed?l&&(n=l.$el):o&&(n=o.$el)),(n=n||r.$el)?n.querySelector('.vxe-body--row[rowid="'.concat(e,'"] .').concat(t.id)):null},getCellLabel:function(e,t){var n=t.formatter,r=(0,_util.getCellValue)(e,t),l=r;if(n){var o=void 0,a=P.fullAllDataRowIdData,i=(0,_util.getRowid)(te,e),u=t.id,c=a[i];if(c&&(o=(o=c.formatData)||(a[i].formatData={}),c)&&o[u]&&o[u].value===r)return o[u].label;var d,a={cellValue:r,row:e,rowIndex:W.getRowIndex(e),column:t,columnIndex:W.getColumnIndex(t)};l=_xeUtils.default.isString(n)?(d=_vXETable.VXETable.formats.get(n))?d(a):"":_xeUtils.default.isArray(n)?(d=_vXETable.VXETable.formats.get(n[0]))?d.apply(void 0,__spreadArray([a],n.slice(1),!1)):"":n(a),o&&(o[u]={value:r,label:l})}return l},findRowIndexOf:function(e,t){return t?_xeUtils.default.findIndexOf(e,function(e){return te.eqRow(e,t)}):-1},eqRow:function(e,t){return!(!e||!t||e!==t&&(0,_util.getRowid)(te,e)!==(0,_util.getRowid)(te,t))}};"development"===process.env.NODE_ENV&&("openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").forEach(function(e){te[e]=function(){(0,_log.errLog)("vxe.error.reqModule",["Export"])}}),"clearValidate,fullValidate,validate".split(",").forEach(function(e){te[e]=function(){(0,_log.errLog)("vxe.error.reqModule",["Validator"])}})),Object.assign(te,W,X);function Tt(){var e=V.value;e&&e.clientWidth&&e.clientHeight&&W.recalculate()}var g,yt=(0,_vue.ref)(0),St=((0,_vue.watch)(function(){return H.data?H.data.length:-1},function(){yt.value++}),(0,_vue.watch)(function(){return H.data},function(){yt.value++}),(0,_vue.watch)(yt,function(){var l=P.inited,o=P.initStatus;U(H.data||[]).then(function(){var e,t=$.scrollXLoad,n=$.scrollYLoad,r=$.expandColumn;P.inited=!0,P.initStatus=!0,o||O(),l||F(),"development"===process.env.NODE_ENV&&(e=E.value,P.tableFullColumn.find(function(e){return"checkbox"===e.type})&&300<P.tableFullData.length&&!e.checkField&&(0,_log.warnLog)("vxe.error.checkProp",["checkbox-config.checkField"]),t||n)&&r&&(0,_log.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),W.recalculate()})}),(0,_vue.ref)(0)),It=((0,_vue.watch)(function(){return $.staticColumns.length},function(){St.value++}),(0,_vue.watch)(function(){return $.staticColumns},function(){St.value++}),(0,_vue.watch)(St,function(){o($.staticColumns)}),(0,_vue.ref)(0)),Dt=((0,_vue.watch)(function(){return $.tableColumn.length},function(){It.value++}),(0,_vue.watch)(function(){return $.tableColumn},function(){It.value++}),(0,_vue.watch)(It,function(){X.analyColumnWidth()}),(0,_vue.watch)(function(){return H.showHeader},function(){(0,_vue.nextTick)(function(){W.recalculate(!0).then(function(){return W.refreshScroll()})})}),(0,_vue.watch)(function(){return H.showFooter},function(){(0,_vue.nextTick)(function(){W.recalculate(!0).then(function(){return W.refreshScroll()})})}),(0,_vue.watch)(function(){return H.height},function(){(0,_vue.nextTick)(function(){return W.recalculate(!0)})}),(0,_vue.watch)(function(){return H.maxHeight},function(){(0,_vue.nextTick)(function(){return W.recalculate(!0)})}),(0,_vue.watch)(function(){return H.syncResize},function(e){e&&(Tt(),(0,_vue.nextTick)(function(){Tt(),setTimeout(Tt)}))}),(0,_vue.ref)(0)),kt=((0,_vue.watch)(function(){return H.mergeCells?H.mergeCells.length:-1},function(){Dt.value++}),(0,_vue.watch)(function(){return H.mergeCells},function(){Dt.value++}),(0,_vue.watch)(Dt,function(){W.clearMergeCells(),(0,_vue.nextTick)(function(){H.mergeCells&&W.setMergeCells(H.mergeCells)})}),(0,_vue.ref)(0));(0,_vue.watch)(function(){return H.mergeFooterItems?H.mergeFooterItems.length:-1},function(){kt.value++}),(0,_vue.watch)(function(){return H.mergeFooterItems},function(){kt.value++}),(0,_vue.watch)(kt,function(){W.clearMergeFooterItems(),(0,_vue.nextTick)(function(){H.mergeFooterItems&&W.setMergeFooterItems(H.mergeFooterItems)})}),_vXETable.VXETable.hooks.forEach(function(e){var e=e.setupTable;e&&(e=e(te))&&_xeUtils.default.isObject(e)&&Object.assign(te,e)}),X.preventEvent(null,"created",{$table:te}),(0,_vue.onActivated)(function(){W.recalculate().then(function(){return W.refreshScroll()}),X.preventEvent(null,"activated",{$table:te})}),(0,_vue.onDeactivated)(function(){P.isActivated=!1,X.preventEvent(null,"deactivated",{$table:te})}),(0,_vue.onMounted)(function(){(0,_vue.nextTick)(function(){var e=H.data,t=H.treeConfig,n=H.showOverflow,r=P.scrollXStore,l=P.scrollYStore,o=_.value,a=Z.value,i=ee.value,u=C.value,c=E.value,d=T.value,s=G.value;if("development"===process.env.NODE_ENV&&(H.rowId||s.keyField||!(c.reserve||c.checkRowKeys||u.reserve||u.checkRowKey||d.expandRowKeys||i.expandRowKeys)||(0,_log.warnLog)("vxe.error.reqProp",["row-config.keyField"]),H.editConfig&&(a.showStatus||a.showUpdateStatus||a.showInsertStatus)&&!H.keepSource&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),!t||!i.line||(H.rowKey||s.useKey)&&n||(0,_log.warnLog)("vxe.error.reqProp",["row-config.useKey | show-overflow"]),t&&H.stripe&&(0,_log.warnLog)("vxe.error.noTree",["stripe"]),H.showFooter&&!H.footerMethod&&(0,_log.warnLog)("vxe.error.reqProp",["footer-method"]),u=H.exportConfig,d=H.importConfig,a=tt.value,i=nt.value,d&&i.types&&!i.importMethod&&!_xeUtils.default.includeArrays(_vXETable.VXETable.config.importTypes,i.types)&&(0,_log.warnLog)("vxe.error.errProp",["export-config.types=".concat(i.types.join(",")),i.types.filter(function(e){return _xeUtils.default.includes(_vXETable.VXETable.config.importTypes,e)}).join(",")||_vXETable.VXETable.config.importTypes.join(",")]),u)&&a.types&&!a.exportMethod&&!_xeUtils.default.includeArrays(_vXETable.VXETable.config.exportTypes,a.types)&&(0,_log.warnLog)("vxe.error.errProp",["export-config.types=".concat(a.types.join(",")),a.types.filter(function(e){return _xeUtils.default.includes(_vXETable.VXETable.config.exportTypes,e)}).join(",")||_vXETable.VXETable.config.exportTypes.join(",")]),"development"===process.env.NODE_ENV){s=v.value,n=J.value,t=G.value;if(!H.id&&H.customConfig&&(!0===s.storage||s.storage&&s.storage.resizable||s.storage&&s.storage.visible)&&(0,_log.errLog)("vxe.error.reqProp",["id"]),H.treeConfig&&c.range&&(0,_log.errLog)("vxe.error.noTree",["checkbox-config.range"]),t.height&&!H.showOverflow&&(0,_log.warnLog)("vxe.error.notProp",["table.show-overflow"]),!te.handleUpdateCellAreas&&(H.clipConfig&&(0,_log.warnLog)("vxe.error.notProp",["clip-config"]),H.fnrConfig&&(0,_log.warnLog)("vxe.error.notProp",["fnr-config"]),n.area))return void(0,_log.errLog)("vxe.error.notProp",["mouse-config.area"]);n.area&&n.selected&&(0,_log.warnLog)("vxe.error.errConflicts",["mouse-config.area","mouse-config.selected"]),n.area&&c.range&&(0,_log.warnLog)("vxe.error.errConflicts",["mouse-config.area","checkbox-config.range"]),H.treeConfig&&n.area&&(0,_log.errLog)("vxe.error.noTree",["mouse-config.area"])}"development"===process.env.NODE_ENV&&(H.editConfig&&!te.insert&&(0,_log.errLog)("vxe.error.reqModule",["Edit"]),H.editRules&&!te.validate&&(0,_log.errLog)("vxe.error.reqModule",["Validator"]),(c.range||H.keyboardConfig||H.mouseConfig)&&!te.triggerCellMousedownEvent&&(0,_log.errLog)("vxe.error.reqModule",["Keyboard"]),H.printConfig||H.importConfig||H.exportConfig)&&!te.exportData&&(0,_log.errLog)("vxe.error.reqModule",["Export"]),Object.assign(l,{startIndex:0,endIndex:0,visibleSize:0,adaptive:!1!==o.adaptive}),Object.assign(r,{startIndex:0,endIndex:0,visibleSize:0}),U(e||[]).then(function(){e&&e.length&&(P.inited=!0,P.initStatus=!0,O(),F()),w()}),H.autoResize&&(d=He.value,i=V.value,u=X.getParentElem(),g=(0,_resize.createResizeEvent)(d.refreshDelay?_xeUtils.default.throttle(function(){W.recalculate(!0)},d.refreshDelay,{leading:!0,trailing:!0}):function(){H.autoResize&&W.recalculate(!0)}),i&&g.observe(i),u)&&g.observe(u)}),_event.GlobalEvent.on(te,"paste",fe),_event.GlobalEvent.on(te,"copy",ve),_event.GlobalEvent.on(te,"cut",ge),_event.GlobalEvent.on(te,"mousedown",ie),_event.GlobalEvent.on(te,"blur",ue),_event.GlobalEvent.on(te,"mousewheel",ce),_event.GlobalEvent.on(te,"keydown",se),_event.GlobalEvent.on(te,"resize",he),te.handleGlobalContextmenuEvent&&_event.GlobalEvent.on(te,"contextmenu",te.handleGlobalContextmenuEvent),X.preventEvent(null,"mounted",{$table:te})}),(0,_vue.onBeforeUnmount)(function(){g&&g.disconnect(),W.closeFilter(),te.closeMenu&&te.closeMenu(),X.preventEvent(null,"beforeUnmount",{$table:te})}),(0,_vue.onUnmounted)(function(){_event.GlobalEvent.off(te,"paste"),_event.GlobalEvent.off(te,"copy"),_event.GlobalEvent.off(te,"cut"),_event.GlobalEvent.off(te,"mousedown"),_event.GlobalEvent.off(te,"blur"),_event.GlobalEvent.off(te,"mousewheel"),_event.GlobalEvent.off(te,"keydown"),_event.GlobalEvent.off(te,"resize"),_event.GlobalEvent.off(te,"contextmenu"),X.preventEvent(null,"unmounted",{$table:te})});return te.renderVN=function(){var e=H.loading,t=H.stripe,n=H.showHeader,r=H.height,l=H.treeConfig,o=H.mouseConfig,a=H.showFooter,i=H.highlightCell,u=H.highlightHoverRow,c=H.highlightHoverColumn,d=H.editConfig,s=$.isGroup,f=$.overflowX,v=$.overflowY,g=$.scrollXLoad,h=$.scrollYLoad,m=$.scrollbarHeight,x=$.tableData,p=$.tableColumn,_=$.tableGroupColumn,w=$.footerTableData,b=$.initStore,C=$.columnStore,E=$.filterStore,R=C.leftList,C=C.rightList,T=N.loading,y=We.value,S=ee.value,I=G.value,D=B.value,k=Ee.value,L=it.value,U=J.value,O=Ve.value,F=Xe.value,M=ot.value,A=Qe.value;return(0,_vue.h)("div",{ref:V,class:["vxe-table","vxe-table--render-default","tid_".concat(Ce),"border--".concat(L),((L={})["size--".concat(k)]=k,L["vxe-editable"]=!!d,L["cell--highlight"]=i,L["cell--selected"]=o&&U.selected,L["cell--area"]=o&&U.area,L["row--highlight"]=I.isHover||u,L["column--highlight"]=D.isHover||c,L["is--header"]=n,L["is--footer"]=a,L["is--group"]=s,L["is--tree-line"]=l&&S.line,L["is--fixed-left"]=R.length,L["is--fixed-right"]=C.length,L["is--animat"]=!!H.animat,L["is--round"]=H.round,L["is--stripe"]=!l&&t,L["is--loading"]=e,L["is--empty"]=!e&&!x.length,L["is--scroll-y"]=v,L["is--scroll-x"]=f,L["is--virtual-x"]=g,L["is--virtual-y"]=h,L)],onKeydown:de},[(0,_vue.h)("div",{class:"vxe-table-slots"},N.default?N.default({}):[]),(0,_vue.h)("div",{class:"vxe-table--render-wrapper"},[(0,_vue.h)("div",{class:"vxe-table--main-wrapper"},[n?(0,_vue.h)(_header.default,{ref:z,tableData:x,tableColumn:p,tableGroupColumn:_}):(0,_vue.createCommentVNode)(),(0,_vue.h)(_body.default,{ref:j,tableData:x,tableColumn:p}),a?(0,_vue.h)(_footer.default,{ref:K,footerTableData:w,tableColumn:p}):(0,_vue.createCommentVNode)()]),(0,_vue.h)("div",{class:"vxe-table--fixed-wrapper"},[R&&R.length&&f?pe("left"):(0,_vue.createCommentVNode)(),C&&C.length&&f?pe("right"):(0,_vue.createCommentVNode)()])]),(0,_vue.h)("div",{ref:Ne,class:"vxe-table--empty-placeholder"},[(0,_vue.h)("div",{class:"vxe-table--empty-content"},(k=lt.value,d={$table:te},N.empty?N.empty(d):(i=(i=k.name?_vXETable.VXETable.renderer.get(k.name):null)?i.renderEmpty:null)?(0,_vn.getSlotVNs)(i(k,d)):(0,_utils.getFuncText)(H.emptyText)||_conf.default.i18n("vxe.table.emptyText")))]),(0,_vue.h)("div",{class:"vxe-table--border-line"}),(0,_vue.h)("div",{ref:Ae,class:"vxe-table--resizable-bar",style:f?{"padding-bottom":"".concat(m,"px")}:null}),(0,_vue.h)(_index.default,{class:"vxe-table--loading",modelValue:e,icon:M.icon,text:M.text},T?{default:function(){return T({})}}:{}),b.filter?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-filter"),{ref:Se,filterStore:E}):(0,_vue.createCommentVNode)(),b.import&&H.importConfig?(0,_vue.h)((0,_vue.resolveComponent)("vxe-import-panel"),{defaultOptions:$.importParams,storeData:$.importStore}):(0,_vue.createCommentVNode)(),b.export&&(H.exportConfig||H.printConfig)?(0,_vue.h)((0,_vue.resolveComponent)("vxe-export-panel"),{defaultOptions:$.exportParams,storeData:$.exportStore}):(0,_vue.createCommentVNode)(),A?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-context-menu"),{ref:Ie}):(0,_vue.createCommentVNode)(),be?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),{ref:Te,isArrow:!1,enterable:!1}):(0,_vue.createCommentVNode)(),be&&H.editRules&&O.showMessage&&("default"===O.message?!r:"tooltip"===O.message)?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),__assign({ref:ye,class:"vxe-table--valid-error"},"tooltip"===O.message||1===x.length?F:{})):(0,_vue.createCommentVNode)(),be?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),__assign({ref:q},y)):(0,_vue.createCommentVNode)()])},(0,_vue.provide)("xecolgroup",null),(0,_vue.provide)("$xetable",te),te},render:function(){return this.renderVN()}});exports.default=_default;